<html><!-- Online page at https://registry.terraform.io/providers/Azure/azapi/latest/docs/guides/feature_convert_arm_template --><head>
                <title>Feature: Convert ARM Template/Resource JSON to AzAPI Configuration</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <p>The AzAPI VSCode extension provides a feature to convert ARM template/resource JSON to AzAPI configuration. This feature is useful when you have an existing ARM template or resource JSON and want to convert it to AzAPI configuration.</p>

<p>This article covers how to use the feature to convert ARM template/resource JSON to AzAPI configuration.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Prerequisites"></a><h2 id="prerequisites">Prerequisites</h2>

<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=azapi-vscode.azapi">AzAPI VSCode extension</a> version 2.0.1 or later</li>
<li><a href="https://registry.terraform.io/providers/azure/azapi">Terraform AzAPI provider</a> version 2.0.1 or later</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Convert%20ARM%20template%20to%20AzAPI%20configuration"></a><h2 id="convert-arm-template-to-azapi-configuration">Convert ARM template to AzAPI configuration</h2>

<p>This feature only supports ARM template exported from the Azure portal. Other ARM templates may not be supported.</p>

<ol>
<li><p>Export the ARM template from the Azure portal. <br/>
A step-by-step guide on how to export the ARM template from the Azure portal can be found <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/export-template-portal">here</a>.</p></li>
<li><p>Copy the entire ARM template JSON. For example, the following is an ARM template JSON:</p></li>
</ol>

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"contentVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"Clusters_tfmonitoring_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tfmonitoring"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">"accounts_tfvoice_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tfvoice"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="nt">"userAssignedIdentities_monitoringtoolsuai_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"defaultValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monitoringtoolsuai"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Microsoft.CognitiveServices/accounts"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-06-01-preview"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[parameters('accounts_tfvoice_name')]"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eastus"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"F0"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SpeechServices"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"networkAcls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"defaultAction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"virtualNetworkRules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"ipRules"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">"publicNetworkAccess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"disableLocalAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Microsoft.Kusto/Clusters"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-15"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[parameters('Clusters_tfmonitoring_name')]"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"East US"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"NRMS.KustoPlatform.Classification.1P"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Corp"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dev(No SLA)_Standard_E2a_v4"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"tier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Basic"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"capacity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"zones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="s2">"1"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="s2">"3"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="s2">"2"</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nt">"identity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SystemAssigned"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"trustedExternalTenants"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">                </span><span class="nt">"enableDiskEncryption"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"enableStreamingIngest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"languageExtensions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">"enablePurge"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"enableDoubleEncryption"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"engineType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V3"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"acceptedAudiences"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">                </span><span class="nt">"restrictOutboundNetworkAccess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Disabled"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"allowedFqdnList"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">                </span><span class="nt">"publicNetworkAccess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"allowedIpRangeList"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">                </span><span class="nt">"enableAutoStop"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"publicIPType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IPv4"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<ol>
<li>Paste the ARM template JSON in a <code>*.tf</code> file in the VSCode editor. <br/>
The AzAPI VSCode extension will automatically detect the ARM template JSON and convert it to AzAPI configuration.</li>
</ol>

<div class="codehilite"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">"subscriptionId"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"The subscription id"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">"resourceGroupName"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"The resource group name"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">"Clusters_tfmonitoring_name"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfmonitoring"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">"accounts_tfvoice_name"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfvoice"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">"userAssignedIdentities_monitoringtoolsuai_name"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"monitoringtoolsuai"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azapi_resource"</span><span class="w"> </span><span class="nv">"account"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Microsoft.CognitiveServices/accounts@2024-10-01"</span><span class="w"></span>
<span class="w">  </span><span class="na">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/subscriptions/${var.subscriptionId}/resourceGroups/${var.resourceGroupName}"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.accounts_tfvoice_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"eastus"</span><span class="w"></span>
<span class="w">  </span><span class="nb">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SpeechServices"</span><span class="w"></span>
<span class="w">    </span><span class="nb">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">disableLocalAuth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">      </span><span class="nb">networkAcls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">defaultAction</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="na">ipRules</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">        </span><span class="na">virtualNetworkRules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">publicNetworkAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">sku</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"F0"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azapi_resource"</span><span class="w"> </span><span class="nv">"Cluster"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Microsoft.Kusto/Clusters@2024-04-13"</span><span class="w"></span>
<span class="w">  </span><span class="na">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/subscriptions/${var.subscriptionId}/resourceGroups/${var.resourceGroupName}"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.Clusters_tfmonitoring_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"East US"</span><span class="w"></span>
<span class="w">  </span><span class="nb">identity</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"SystemAssigned"</span><span class="w"></span>
<span class="w">    </span><span class="na">identity_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">acceptedAudiences</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">      </span><span class="na">allowedFqdnList</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">      </span><span class="na">allowedIpRangeList</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">      </span><span class="na">enableAutoStop</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">      </span><span class="na">enableDiskEncryption</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="na">enableDoubleEncryption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="na">enablePurge</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="na">enableStreamingIngest</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="na">engineType</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"V3"</span><span class="w"></span>
<span class="w">      </span><span class="nb">languageExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">publicIPType</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPv4"</span><span class="w"></span>
<span class="w">      </span><span class="na">publicNetworkAccess</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w"></span>
<span class="w">      </span><span class="na">restrictOutboundNetworkAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Disabled"</span><span class="w"></span>
<span class="w">      </span><span class="na">trustedExternalTenants</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">sku</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Dev(No SLA)_Standard_E2a_v4"</span><span class="w"></span>
<span class="w">      </span><span class="na">tier</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Basic"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"1", "3", "2"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"NRMS.KustoPlatform.Classification.1P"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Corp"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Convert%20resource%20JSON%20to%20AzAPI%20configuration"></a><h2 id="convert-resource-json-to-azapi-configuration">Convert resource JSON to AzAPI configuration</h2>

<p>This feature supports converting resource JSON to AzAPI configuration.</p>

<p>There are different ways to get the resource JSON:</p>

<ol>
<li><p>From the Azure Portal:</p>

<ol>
<li>Navigate to the target resource in the Azure portal.</li>
<li>On the <code>Overview</code> page, in the <code>Essentials</code> section, select the <code>JSON View</code> link.</li>
<li>The JSON view will display the resource JSON. And it's recommended to select the latest API version in the JSON view.  </li>
</ol></li>
<li><p>From the Azure CLI: <br/>
More details could be found <a href="https://docs.microsoft.com/en-us/cli/azure/resource?view=azure-cli-latest#az-resource-show">here</a>. <br/>
For example, to get the resource JSON of a Cognitive Services account, you can run the following command:</p></li>
</ol>

<div class="codehilite"><pre><span></span><code>az resource show --ids <span class="s2">"/subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;resource-group-name&gt;/providers/Microsoft.CognitiveServices/accounts/&lt;account-name&gt;"</span>
</code></pre></div>

<p>For example, the following is a resource JSON:</p>

<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-10-01"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/subscriptions/000000/resourceGroups/example-rg/providers/Microsoft.CognitiveServices/accounts/terraform"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terraform"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"microsoft.cognitiveservices/accounts"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S0"</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OpenAI"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eastus"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"provisioningState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Succeeded"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"dateCreated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-03-29T06:22:27.5216767Z"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"isMigrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"customSubDomainName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terraform"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"privateEndpointConnections"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"></span>
<span class="w">        </span><span class="nt">"publicNetworkAccess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"disableLocalAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"OpenAI Language Model Instance API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"OpenAI Dall-E API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"OpenAI Whisper API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"OpenAI Model Scaleset API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"OpenAI Realtime API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"Token Service API"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://terraform.openai.azure.com/"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"systemData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">"etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"\"4207bbe6-0000-0100-0000-674b228f0000\""</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Copy the resource JSON and paste it in a <code>*.tf</code> file in the VSCode editor. The AzAPI VSCode extension will automatically detect the resource JSON and convert it to AzAPI configuration, it will remove the read-only fields and only keep the fields that can be modified.</p>

<p>Here is the converted AzAPI configuration:</p>

<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">Note: This is a generated HCL content from the JSON input which is based on the latest API version available.</span>
<span class="cm">To import the resource, please run the following command:</span>
<span class="cm">terraform import azapi_resource.account /subscriptions/000000/resourceGroups/example-rg/providers/Microsoft.CognitiveServices/accounts/terraform?api-version=2024-10-01</span>

<span class="cm">Or add the below config:</span>
<span class="cm">import {</span>
<span class="cm">  id = "/subscriptions/000000/resourceGroups/example-rg/providers/Microsoft.CognitiveServices/accounts/terraform?api-version=2024-10-01"</span>
<span class="cm">  to = azapi_resource.account</span>
<span class="cm">}</span>
<span class="cm">*/</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azapi_resource"</span><span class="w"> </span><span class="nv">"account"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Microsoft.CognitiveServices/accounts@2024-10-01"</span><span class="w"></span>
<span class="w">  </span><span class="na">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/subscriptions/000000/resourceGroups/example-rg"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"eastus"</span><span class="w"></span>
<span class="w">  </span><span class="nb">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpenAI"</span><span class="w"></span>
<span class="w">    </span><span class="nb">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">customSubDomainName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform"</span><span class="w"></span>
<span class="w">      </span><span class="na">disableLocalAuth</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">      </span><span class="na">publicNetworkAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">sku</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"S0"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>To import the resource, you can run the following command:</p>

<div class="codehilite"><pre><span></span><code>terraform import azapi_resource.account /subscriptions/000000/resourceGroups/example-rg/providers/Microsoft.CognitiveServices/accounts/terraform?api-version<span class="o">=</span><span class="m">2024</span>-10-01
</code></pre></div>

<p>Or add the below config:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/subscriptions/000000/resourceGroups/example-rg/providers/Microsoft.CognitiveServices/accounts/terraform?api-version=2024-10-01"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">azapi_resource.account</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

            
        
    </body></html>
<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_ha_vpn_gateway --><head>
                <title>google_compute_ha_vpn_gateway</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_compute_ha_vpn_gateway">google_compute_ha_vpn_gateway</h1>

<p>Represents a VPN gateway running in GCP. This virtual device is managed
by Google, but used only by you. This type of VPN Gateway allows for the creation
of VPN solutions with higher availability than classic Target VPN Gateways.</p>

<p>To get more information about HaVpnGateway, see:</p>

<ul>
<li><a href="https://cloud.google.com/compute/docs/reference/rest/v1/vpnGateways">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/vpn/docs/how-to/choosing-a-vpn">Choosing a VPN</a></li>
<li><a href="https://cloud.google.com/vpn/docs/concepts/overview">Cloud VPN Overview</a></li>
</ul></li>
</ul>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=ha_vpn_gateway_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Ha%20Vpn%20Gateway%20Basic"></a><h2 id="example-usage-ha-vpn-gateway-basic">Example Usage - Ha Vpn Gateway Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_ha_vpn_gateway"</span><span class="w"> </span><span class="nv">"ha_gateway1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"ha-vpn-1"</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network1.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_network"</span><span class="w"> </span><span class="nv">"network1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">"network1"</span><span class="w"></span>
<span class="w">  </span><span class="na">auto_create_subnetworks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=ha_vpn_gateway_ipv6&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Ha%20Vpn%20Gateway%20Ipv6"></a><h2 id="example-usage-ha-vpn-gateway-ipv6">Example Usage - Ha Vpn Gateway Ipv6</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_ha_vpn_gateway"</span><span class="w"> </span><span class="nv">"ha_gateway1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"ha-vpn-1"</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network1.id</span><span class="w"></span>
<span class="w">  </span><span class="na">stack_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPV4_IPV6"</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">mykey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"myvalue"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_network"</span><span class="w"> </span><span class="nv">"network1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">"network1"</span><span class="w"></span>
<span class="w">  </span><span class="na">auto_create_subnetworks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Compute%20Ha%20Vpn%20Gateway%20Encrypted%20Interconnect"></a><h2 id="example-usage-compute-ha-vpn-gateway-encrypted-interconnect">Example Usage - Compute Ha Vpn Gateway Encrypted Interconnect</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_ha_vpn_gateway"</span><span class="w"> </span><span class="nv">"vpn-gateway"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-ha-vpngw"</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">vpn_interfaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"></span>
<span class="w">      </span><span class="na">interconnect_attachment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_interconnect_attachment.attachment1.self_link</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">vpn_interfaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">      </span><span class="na">interconnect_attachment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_interconnect_attachment.attachment2.self_link</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_interconnect_attachment"</span><span class="w"> </span><span class="nv">"attachment1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-interconnect-attachment1"</span><span class="w"></span>
<span class="w">  </span><span class="na">edge_availability_domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AVAILABILITY_DOMAIN_1"</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"PARTNER"</span><span class="w"></span>
<span class="w">  </span><span class="na">router</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_router.router.id</span><span class="w"></span>
<span class="w">  </span><span class="na">encryption</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPSEC"</span><span class="w"></span>
<span class="w">  </span><span class="na">ipsec_internal_addresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nv">google_compute_address.address1.self_link</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_interconnect_attachment"</span><span class="w"> </span><span class="nv">"attachment2"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-interconnect-attachment2"</span><span class="w"></span>
<span class="w">  </span><span class="na">edge_availability_domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AVAILABILITY_DOMAIN_2"</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"PARTNER"</span><span class="w"></span>
<span class="w">  </span><span class="na">router</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_router.router.id</span><span class="w"></span>
<span class="w">  </span><span class="na">encryption</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPSEC"</span><span class="w"></span>
<span class="w">  </span><span class="na">ipsec_internal_addresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nv">google_compute_address.address2.self_link</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_address"</span><span class="w"> </span><span class="nv">"address1"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-address1"</span><span class="w"></span>
<span class="w">  </span><span class="na">address_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"INTERNAL"</span><span class="w"></span>
<span class="w">  </span><span class="na">purpose</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPSEC_INTERCONNECT"</span><span class="w"></span>
<span class="w">  </span><span class="na">address</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"192.168.1.0"</span><span class="w"></span>
<span class="w">  </span><span class="na">prefix_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">29</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.self_link</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_address"</span><span class="w"> </span><span class="nv">"address2"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-address2"</span><span class="w"></span>
<span class="w">  </span><span class="na">address_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"INTERNAL"</span><span class="w"></span>
<span class="w">  </span><span class="na">purpose</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"IPSEC_INTERCONNECT"</span><span class="w"></span>
<span class="w">  </span><span class="na">address</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"192.168.2.0"</span><span class="w"></span>
<span class="w">  </span><span class="na">prefix_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">29</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.self_link</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_router"</span><span class="w"> </span><span class="nv">"router"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-router"</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.name</span><span class="w"></span>
<span class="w">  </span><span class="na">encrypted_interconnect_router</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="nb">bgp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">asn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16550</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_network"</span><span class="w"> </span><span class="nv">"network"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-network"</span><span class="w"></span>
<span class="w">  </span><span class="na">auto_create_subnetworks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>name</code> -
(Required)
Name of the resource. Provided by the client when the resource is
created. The name must be 1-63 characters long, and comply with
RFC1035.  Specifically, the name must be 1-63 characters long and
match the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means
the first character must be a lowercase letter, and all following
characters must be a dash, lowercase letter, or digit, except the last
character, which cannot be a dash.</p></li>
<li><p><code>network</code> -
(Required)
The network this VPN gateway is accepting traffic for.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> -
(Optional)
An optional description of this resource.</p></li>
<li><p><code>stack_type</code> -
(Optional)
The stack type for this VPN gateway to identify the IP protocols that are enabled.
If not specified, IPV4_ONLY will be used.
Default value is <code>IPV4_ONLY</code>.
Possible values are: <code>IPV4_ONLY</code>, <code>IPV4_IPV6</code>, <code>IPV6_ONLY</code>.</p></li>
<li><p><code>gateway_ip_version</code> -
(Optional)
The IP family of the gateway IPs for the HA-VPN gateway interfaces. If not specified, IPV4 will be used.
Default value is <code>IPV4</code>.
Possible values are: <code>IPV4</code>, <code>IPV6</code>.</p></li>
<li><p><code>vpn_interfaces</code> -
(Optional)
A list of interfaces on this VPN gateway.
Structure is <a href="#nested_vpn_interfaces">documented below</a>.</p></li>
<li><p><code>labels</code> -
(Optional)
Labels for this resource. These can only be added or modified by the setLabels method.
Each label key/value pair must comply with RFC1035. Label values may be empty.</p>

<p><strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>region</code> -
(Optional)
The region this gateway should sit in.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_vpn_interfaces"></a>The <code>vpn_interfaces</code> block supports:</p>

<ul>
<li><p><code>id</code> -
(Optional)
The numeric ID of this VPN gateway interface.</p></li>
<li><p><code>ip_address</code> -
(Output)
The external IP address for this VPN gateway interface.</p></li>
<li><p><code>interconnect_attachment</code> -
(Optional)
URL of the interconnect attachment resource. When the value
of this field is present, the VPN Gateway will be used for
IPsec-encrypted Cloud Interconnect; all Egress or Ingress
traffic for this VPN Gateway interface will go through the
specified interconnect attachment resource.
Not currently available publicly.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/regions/{{region}}/vpnGateways/{{name}}</code></p></li>
<li><p><code>label_fingerprint</code> -
A fingerprint for the labels being applied to this VpnGateway, which is essentially a hash
of the labels set used for optimistic locking. The fingerprint is initially generated by
Compute Engine and changes after every request to modify or update labels.
You must always provide an up-to-date fingerprint hash in order to update or change labels,
otherwise the request will fail with error 412 conditionNotMet.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
<li><code>self_link</code> - The URI of the created resource.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>HaVpnGateway can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/regions/{{region}}/vpnGateways/{{name}}</code></li>
<li><code>{{project}}/{{region}}/{{name}}</code></li>
<li><code>{{region}}/{{name}}</code></li>
<li><code>{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import HaVpnGateway using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/regions/{{region}}/vpnGateways/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_ha_vpn_gateway.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, HaVpnGateway can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_compute_ha_vpn_gateway.default projects/{{project}}/regions/{{region}}/vpnGateways/{{name}}
$ terraform import google_compute_ha_vpn_gateway.default {{project}}/{{region}}/{{name}}
$ terraform import google_compute_ha_vpn_gateway.default {{region}}/{{name}}
$ terraform import google_compute_ha_vpn_gateway.default {{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
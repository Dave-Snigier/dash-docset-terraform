<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/aws/latest/docs --><head>
                <title>AWS Provider</title>
                <meta charset="utf-8"/>
                <link href="../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="aws-provider">AWS Provider</h1>

<p>Use the Amazon Web Services (AWS) provider to interact with the
many resources supported by AWS. You must configure the provider
with the proper credentials before you can use it.</p>

<p>Use the navigation to the left to read about the available resources. There are currently 1485 resources and 598 data sources available in the provider.</p>

<p>To learn the basics of Terraform using this provider, follow the
hands-on <a href="https://learn.hashicorp.com/tutorials/terraform/infrastructure-as-code?in=terraform/aws-get-started&amp;utm_source=WEBSITE&amp;utm_medium=WEB_IO&amp;utm_offer=ARTICLE_PAGE&amp;utm_content=DOCS">get started tutorials</a>. Interact with AWS services,
including Lambda, RDS, and IAM by following the <a href="https://learn.hashicorp.com/collections/terraform/aws?utm_source=WEBSITE&amp;utm_medium=WEB_IO&amp;utm_offer=ARTICLE_PAGE&amp;utm_content=DOCS">AWS services
tutorials</a>.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<p>Terraform 0.13 and later:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">required_providers</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/aws"</span><span class="w"></span>
<span class="w">      </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 5.0"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Configure the AWS Provider</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-east-1"</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create a VPC</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.0.0.0/16"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Terraform 0.12 and earlier:</p>

<div class="codehilite"><pre><span></span><code><span class="c1"># Configure the AWS Provider</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 5.0"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-east-1"</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create a VPC</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.0.0.0/16"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Authentication%20and%20Configuration"></a><h2 id="authentication-and-configuration">Authentication and Configuration</h2>

<p>Configuration for the AWS Provider can be derived from several sources,
which are applied in the following order:</p>

<ol>
<li>Parameters in the provider configuration</li>
<li>Environment variables</li>
<li>Shared credentials files</li>
<li>Shared configuration files</li>
<li>Container credentials</li>
<li>Instance profile credentials and Region</li>
</ol>

<p>This order matches the precedence used by the
<a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html#cli-configure-quickstart-precedence">AWS CLI</a>
and the <a href="https://aws.amazon.com/tools/">AWS SDKs</a>.</p>

<p>The AWS Provider supports assuming an IAM role, either in
the provider configuration block parameter <code>assume_role</code>
or in <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html">a named profile</a>.
If configuring the role in the provider configuration, the provider supports IAM Role Chaining by specifying a list of roles to assume.</p>

<p>The AWS Provider supports assuming an IAM role using <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html#cli-configure-role-oidc">web identity federation and OpenID Connect (OIDC)</a>.
This can be configured either using environment variables or in a named profile.</p>

<p>When using a named profile, the AWS Provider also supports <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sourcing-external.html">sourcing credentials from an external process</a>.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Provider%20Configuration"></a><h3 id="provider-configuration">Provider Configuration</h3>

<aside class="admonition danger">
    <strong>danger</strong>
    <em>Warning</em>
    <p>Hard-coded credentials are not recommended in any Terraform configuration and risks secret leakage should this file ever be committed to a public version control system.</p>
</aside>

<p>Credentials can be provided by adding an <code>access_key</code>, <code>secret_key</code>, and optionally <code>token</code>, to the <code>aws</code> provider block.</p>

<p>Usage:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-west-2"</span><span class="w"></span>
<span class="w">  </span><span class="na">access_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-access-key"</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-secret-key"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Other settings related to authorization can be configured, such as:</p>

<ul>
<li><code>profile</code></li>
<li><code>shared_config_files</code></li>
<li><code>shared_credentials_files</code></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Environment%20Variables"></a><h3 id="environment-variables">Environment Variables</h3>

<p>Credentials can be provided by using the <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, and optionally <code>AWS_SESSION_TOKEN</code> environment variables.
The Region can be set using the <code>AWS_REGION</code> or <code>AWS_DEFAULT_REGION</code> environment variables.</p>

<p>For example:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="gp">% </span><span class="nb">export</span> <span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span><span class="s2">"anaccesskey"</span>
<span class="gp">% </span><span class="nb">export</span> <span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span><span class="s2">"asecretkey"</span>
<span class="gp">% </span><span class="nb">export</span> <span class="nv">AWS_REGION</span><span class="o">=</span><span class="s2">"us-west-2"</span>
<span class="gp">% </span>terraform plan
</code></pre></div>

<p>Other environment variables related to authorization are:</p>

<ul>
<li><code>AWS_PROFILE</code></li>
<li><code>AWS_CONFIG_FILE</code></li>
<li><code>AWS_SHARED_CREDENTIALS_FILE</code></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Shared%20Configuration%20and%20Credentials%20Files"></a><h3 id="shared-configuration-and-credentials-files">Shared Configuration and Credentials Files</h3>

<p>The AWS Provider can source credentials and other settings from the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">shared configuration and credentials files</a>.
By default, these files are located at <code>$HOME/.aws/config</code> and <code>$HOME/.aws/credentials</code> on Linux and macOS,
and <code>"%USERPROFILE%\.aws\config"</code> and <code>"%USERPROFILE%\.aws\credentials"</code> on Windows.</p>

<p>If no named profile is specified, the <code>default</code> profile is used.
Use the <code>profile</code> parameter or <code>AWS_PROFILE</code> environment variable to specify a named profile.</p>

<p>The locations of the shared configuration and credentials files can be configured using either
the parameters <code>shared_config_files</code> and <code>shared_credentials_files</code>
or the environment variables <code>AWS_CONFIG_FILE</code> and <code>AWS_SHARED_CREDENTIALS_FILE</code>.</p>

<p>For example:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">shared_config_files</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"/Users/tf_user/.aws/conf"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">shared_credentials_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"/Users/tf_user/.aws/creds"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">profile</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"customprofile"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Container%20Credentials"></a><h3 id="container-credentials">Container Credentials</h3>

<p>If you're running Terraform on CodeBuild or ECS and have configured an <a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">IAM Task Role</a>, Terraform can use the container's Task Role. This support is based on the underlying <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> and <code>AWS_CONTAINER_CREDENTIALS_FULL_URI</code> environment variables being automatically set by those services or manually for advanced usage.</p>

<p>If you're running Terraform on EKS and have configured <a href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html">IAM Roles for Service Accounts (IRSA)</a>, Terraform can use the pod's role. This support is based on the underlying <code>AWS_ROLE_ARN</code> and <code>AWS_WEB_IDENTITY_TOKEN_FILE</code> environment variables being automatically set by Kubernetes or manually for advanced usage.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Instance%20profile%20credentials%20and%20Region"></a><h3 id="instance-profile-credentials-and-region">Instance profile credentials and Region</h3>

<p>When the AWS Provider is running on an EC2 instance with an IAM Instance Profile set,
the provider can source credentials from the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html#instance-metadata-security-credentials">EC2 Instance Metadata Service</a>.
Both IMDS v1 and IMDS v2 are supported.</p>

<p>A custom endpoint for the metadata service can be provided using the <code>ec2_metadata_service_endpoint</code> parameter or the <code>AWS_EC2_METADATA_SERVICE_ENDPOINT</code> environment variable.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Assuming%20an%20IAM%20Role"></a><h3 id="assuming-an-iam-role">Assuming an IAM Role</h3>

<p>If provided with a role ARN, the AWS Provider will attempt to assume this role
using the supplied credentials.</p>

<p>Usage:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">assume_role</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">role_arn</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/ROLE_NAME"</span><span class="w"></span>
<span class="w">    </span><span class="na">session_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SESSION_NAME"</span><span class="w"></span>
<span class="w">    </span><span class="na">external_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"EXTERNAL_ID"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>To assume a role with role chaining, do the following:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">assume_role</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/INITIAL_ROLE_NAME"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">assume_role</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/FINAL_ROLE_NAME"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<blockquote>
  <p><strong>Hands-on:</strong> Try the <a href="https://learn.hashicorp.com/tutorials/terraform/aws-assumerole">Use AssumeRole to Provision AWS Resources Across Accounts</a> tutorial.</p>
</blockquote>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Assuming%20an%20IAM%20Role%20Using%20A%20Web%20Identity"></a><h3 id="assuming-an-iam-role-using-a-web-identity">Assuming an IAM Role Using A Web Identity</h3>

<p>If provided with a role ARN and a token from a web identity provider,
the AWS Provider will attempt to assume this role using the supplied credentials.</p>

<p>Usage:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">assume_role_with_web_identity</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">role_arn</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::123456789012:role/ROLE_NAME"</span><span class="w"></span>
<span class="w">    </span><span class="na">session_name</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"SESSION_NAME"</span><span class="w"></span>
<span class="w">    </span><span class="na">web_identity_token_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/Users/tf_user/secrets/web-identity-token"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Using%20an%20External%20Credentials%20Process"></a><h3 id="using-an-external-credentials-process">Using an External Credentials Process</h3>

<p>To use an <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sourcing-external.html">external process to source credentials</a>,
the process must be configured in a named profile, including the <code>default</code> profile.
The profile is configured in a shared configuration file.</p>

<p>For example:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"customprofile"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="k">[profile customprofile]</span><span class="w"></span>
<span class="na">credential_process</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">custom-process --username jdoe</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/AWS%20Configuration%20Reference"></a><h2 id="aws-configuration-reference">AWS Configuration Reference</h2>

<table>
<thead>
<tr>
  <th>Setting</th>
  <th>Provider</th>
  <th><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html">Environment Variable</a></th>
  <th><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html#cli-configure-files-settings">Shared Config</a></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Access Key ID</td>
  <td><code>access_key</code>|<code>AWS_ACCESS_KEY_ID</code>|<code>aws_access_key_id</code></td>
</tr>
<tr>
  <td>Secret Access Key</td>
  <td><code>secret_key</code>|<code>AWS_SECRET_ACCESS_KEY</code>|<code>aws_secret_access_key</code></td>
</tr>
<tr>
  <td>Session Token</td>
  <td><code>token</code>|<code>AWS_SESSION_TOKEN</code>|<code>aws_session_token</code></td>
</tr>
<tr>
  <td>Region</td>
  <td><code>region</code>|<code>AWS_REGION</code> or <code>AWS_DEFAULT_REGION</code>|<code>region</code></td>
</tr>
<tr>
  <td>Custom CA Bundle</td>
  <td><code>custom_ca_bundle</code>|<code>AWS_CA_BUNDLE</code>|<code>ca_bundle</code></td>
</tr>
<tr>
  <td>EC2 IMDS Endpoint</td>
  <td><code>ec2_metadata_service_endpoint</code>|<code>AWS_EC2_METADATA_SERVICE_ENDPOINT</code>|N/A</td>
</tr>
<tr>
  <td>EC2 IMDS Endpoint Mode</td>
  <td><code>ec2_metadata_service_endpoint_mode</code>|<code>AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE</code>|N/A</td>
</tr>
<tr>
  <td>Disable EC2 IMDS</td>
  <td><code>skip_metadata_api_check</code>|<code>AWS_EC2_METADATA_DISABLED</code>|N/A</td>
</tr>
<tr>
  <td>HTTP Proxy</td>
  <td><code>http_proxy</code>|<code>HTTP_PROXY</code> or <code>http_proxy</code>|N/A</td>
</tr>
<tr>
  <td>HTTPS Proxy</td>
  <td><code>https_proxy</code>|<code>HTTPS_PROXY</code> or <code>https_proxy</code>|N/A</td>
</tr>
<tr>
  <td>Non-Proxied Hosts</td>
  <td><code>no_proxy</code>|<code>NO_PROXY</code> or <code>no_proxy</code>|N/A</td>
</tr>
<tr>
  <td>Max Retries</td>
  <td><code>max_retries</code>|<code>AWS_MAX_ATTEMPTS</code>|<code>max_attempts</code></td>
</tr>
<tr>
  <td>Profile</td>
  <td><code>profile</code>|<code>AWS_PROFILE</code> or <code>AWS_DEFAULT_PROFILE</code>|N/A</td>
</tr>
<tr>
  <td>Retry Mode</td>
  <td><code>retry_mode</code>|<code>AWS_RETRY_MODE</code>|<code>retry_mode</code></td>
</tr>
<tr>
  <td>Shared Config Files</td>
  <td><code>shared_config_files</code>|<code>AWS_CONFIG_FILE</code>|N/A</td>
</tr>
<tr>
  <td>Shared Credentials Files</td>
  <td><code>shared_credentials_files</code>|<code>AWS_SHARED_CREDENTIALS_FILE</code>|N/A</td>
</tr>
<tr>
  <td>S3 Use Regional Endpoint for <code>us-east-1</code>|<code>s3_us_east_1_regional_endpoint</code>|<code>AWS_S3_US_EAST_1_REGIONAL_ENDPOINT</code>|<code>s3_us_east_1_regional_endpoint</code></td>
</tr>
<tr>
  <td>Use DualStack Endpoints</td>
  <td><code>use_dualstack_endpoint</code>|<code>AWS_USE_DUALSTACK_ENDPOINT</code>|<code>use_dualstack_endpoint</code></td>
</tr>
<tr>
  <td>Use FIPS Endpoints</td>
  <td><code>use_fips_endpoint</code>|<code>AWS_USE_FIPS_ENDPOINT</code>|<code>use_fips_endpoint</code></td>
</tr>
</tbody>
</table>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Assume%20Role%20Configuration%20Reference"></a><h3 id="assume-role-configuration-reference">Assume Role Configuration Reference</h3>

<p>Configuation for assuming an IAM role can be done using provider configuration or a named profile in shared configuration files.
In the provider, all parameters for assuming an IAM role are set in the <code>assume_role</code> block.</p>

<p>Note that environment variables are not supported for assuming IAM roles.</p>

<p>See the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html">assume role documentation</a> for more information.</p>

<table>
<thead>
<tr>
  <th>Setting</th>
  <th>Provider</th>
  <th><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html#cli-configure-files-settings">Shared Config</a></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Role ARN</td>
  <td><code>role_arn</code>|<code>role_arn</code></td>
</tr>
<tr>
  <td>Duration</td>
  <td><code>duration</code>|<code>duration_seconds</code></td>
</tr>
<tr>
  <td>External ID</td>
  <td><code>external_id</code>|<code>external_id</code></td>
</tr>
<tr>
  <td>Policy</td>
  <td><code>policy</code>|N/A</td>
</tr>
<tr>
  <td>Policy ARNs</td>
  <td><code>policy_arns</code>|N/A</td>
</tr>
<tr>
  <td>Session Name</td>
  <td><code>session_name</code>|<code>role_session_name</code></td>
</tr>
<tr>
  <td>Source Identity</td>
  <td><code>source_identity</code>|N/A</td>
</tr>
<tr>
  <td>Tags</td>
  <td><code>tags</code>|N/A</td>
</tr>
<tr>
  <td>Transitive Tag Keys</td>
  <td><code>transitive_tag_keys</code>|N/A</td>
</tr>
</tbody>
</table>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Assume%20Role%20with%20Web%20Identity%20Configuration%20Reference"></a><h3 id="assume-role-with-web-identity-configuration-reference">Assume Role with Web Identity Configuration Reference</h3>

<p>Configuration for assuming an IAM role using web identify federation can be done using provider configuration, environment variables, or a named profile in shared configuration files.
In the provider, all parameters for assuming an IAM role are set in the <code>assume_role_with_web_identity</code> block.</p>

<p>See the assume role documentation <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html#cli-configure-role-oidc">section on web identities</a> for more information.</p>

<table>
<thead>
<tr>
  <th>Setting</th>
  <th>Provider</th>
  <th><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html">Environment Variable</a></th>
  <th><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html#cli-configure-files-settings">Shared Config</a></th>
</tr>
</thead>
<tbody>
<tr>
  <td>Role ARN</td>
  <td><code>role_arn</code>|<code>AWS_ROLE_ARN</code>|<code>role_arn</code></td>
</tr>
<tr>
  <td>Web Identity Token</td>
  <td><code>web_identity_token</code>|N/A</td>
  <td>N/A</td>
</tr>
<tr>
  <td>Web Identity Token File</td>
  <td><code>web_identity_token_file</code>|<code>AWS_WEB_IDENTITY_TOKEN_FILE</code>|<code>web_identity_token_file</code></td>
</tr>
<tr>
  <td>Duration</td>
  <td><code>duration</code>|N/A</td>
  <td><code>duration_seconds</code></td>
</tr>
<tr>
  <td>Policy</td>
  <td><code>policy</code>|N/A</td>
  <td><code>policy</code></td>
</tr>
<tr>
  <td>Policy ARNs</td>
  <td><code>policy_arns</code>|N/A</td>
  <td><code>policy_arns</code></td>
</tr>
<tr>
  <td>Session Name</td>
  <td><code>session_name</code>|<code>AWS_ROLE_SESSION_NAME</code>|<code>role_session_name</code></td>
</tr>
</tbody>
</table>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Custom%20User-Agent%20Information"></a><h2 id="custom-user-agent-information">Custom User-Agent Information</h2>

<p>By default, the underlying AWS client used by the Terraform AWS Provider creates requests with User-Agent headers including information about Terraform and AWS SDK for Go versions. To provide additional information in the User-Agent headers, the <code>TF_APPEND_USER_AGENT</code> environment variable can be set and its value will be directly added to HTTP requests. E.g.,</p>

<div class="codehilite"><pre><span></span><code><span class="gp">% </span><span class="nb">export</span> <span class="nv">TF_APPEND_USER_AGENT</span><span class="o">=</span><span class="s2">"JenkinsAgent/i-12345678 BuildID/1234 (Optional Extra Information)"</span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>In addition to <a href="https://www.terraform.io/docs/configuration/providers.html">generic <code>provider</code> arguments</a>
(e.g., <code>alias</code> and <code>version</code>), the following arguments are supported in the AWS
 <code>provider</code> block:</p>

<ul>
<li><code>access_key</code> - (Optional) AWS access key. Can also be set with the <code>AWS_ACCESS_KEY_ID</code> environment variable, or via a shared credentials file if <code>profile</code> is specified. See also <code>secret_key</code>.</li>
<li><code>allowed_account_ids</code> - (Optional) List of allowed AWS account IDs to prevent you from mistakenly using an incorrect one (and potentially end up destroying a live environment). Conflicts with <code>forbidden_account_ids</code>.</li>
<li><code>assume_role</code> - (Optional) List of configuration blocks for assuming an IAM role.
See the <a href="#assume_role-configuration-block"><code>assume_role</code> Configuration Block</a> section below.
IAM Role Chaining is supported by specifying the roles to assume in order.</li>
<li><code>assume_role_with_web_identity</code> - (Optional) Configuration block for assuming an IAM role using a web identity. See the <a href="#assume_role_with_web_identity-configuration-block"><code>assume_role_with_web_identity</code> Configuration Block</a> section below. Only one <code>assume_role_with_web_identity</code> block may be in the configuration.</li>
<li><code>custom_ca_bundle</code> - (Optional) File containing custom root and intermediate certificates.
Can also be set using the <code>AWS_CA_BUNDLE</code> environment variable.
Setting <code>ca_bundle</code> in the shared config file is not supported.</li>
<li><code>default_tags</code> - (Optional) Configuration block with resource tag settings to apply across all resources handled by this provider (see the <a href="./docs/configuration/providers.html#alias-multiple-provider-instances">Terraform multiple provider instances documentation</a> for more information about additional provider configurations). This is designed to replace redundant per-resource <code>tags</code> configurations. Provider tags can be overridden with new values, but not excluded from specific resources. To override provider tag values, use the <code>tags</code> argument within a resource to configure new tag values for matching keys. See the <a href="#default_tags-configuration-block"><code>default_tags</code></a> Configuration Block section below for example usage and available arguments. This functionality is supported in all resources that implement <code>tags</code>, with the exception of the <code>aws_autoscaling_group</code> resource.</li>
<li><code>ec2_metadata_service_endpoint</code> - (Optional) Address of the EC2 metadata service (IMDS) endpoint to use. Can also be set with the <code>AWS_EC2_METADATA_SERVICE_ENDPOINT</code> environment variable.</li>
<li><code>ec2_metadata_service_endpoint_mode</code> - (Optional) Mode to use in communicating with the metadata service. Valid values are <code>IPv4</code> and <code>IPv6</code>. Can also be set with the <code>AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE</code> environment variable.</li>
<li><code>endpoints</code> - (Optional) Configuration block for customizing service endpoints.
See the <a href="./guides/custom-service-endpoints.html">Custom Service Endpoints Guide</a> for more information about connecting to alternate AWS endpoints or AWS compatible solutions.
Can be used to specify FIPS endpoints for specific services
or, if using the parameter <code>use_fips_endpoints</code>, to override endpoints when there is no FIPS endpoint for the service.</li>
<li><code>forbidden_account_ids</code> - (Optional) List of forbidden AWS account IDs to prevent you from mistakenly using the wrong one (and potentially end up destroying a live environment). Conflicts with <code>allowed_account_ids</code>.</li>
<li><code>http_proxy</code> - (Optional) URL of a proxy to use for HTTP requests when accessing the AWS API.
Can also be set using the <code>HTTP_PROXY</code> or <code>http_proxy</code> environment variables.</li>
<li><code>https_proxy</code> - (Optional) URL of a proxy to use for HTTPS requests when accessing the AWS API.
Can also be set using the <code>HTTPS_PROXY</code> or <code>https_proxy</code> environment variables.
To use an HTTP proxy <strong>without</strong> an HTTPS proxy, set <code>https_proxy</code> to an empty string (<code>""</code>).</li>
<li><code>ignore_tags</code> - (Optional) Configuration block with resource tag settings to ignore across all resources handled by this provider (except any individual service tag resources such as <code>aws_ec2_tag</code>) for situations where external systems are managing certain resource tags. Arguments to the configuration block are described below in the <code>ignore_tags</code> Configuration Block section. See the <a href="https://www.terraform.io/docs/configuration/providers.html#alias-multiple-provider-configurations">Terraform multiple provider instances documentation</a> for more information about additional provider configurations.</li>
<li><code>insecure</code> - (Optional) Whether to explicitly allow the provider to perform "insecure" SSL requests. If omitted, the default value is <code>false</code>.</li>
<li><code>max_retries</code> - (Optional) Maximum number of times an API call is retried when AWS throttles requests or you experience transient failures.
The delay between the subsequent API calls increases exponentially.
If omitted, the default value is <code>25</code>.
Can also be set using the environment variable <code>AWS_MAX_ATTEMPTS</code>
and the shared configuration parameter <code>max_attempts</code>.</li>
<li><code>no_proxy</code> - (Optional) Comma-separated list of hosts that should not use HTTP or HTTPS proxies.
Each value can be one of:
<ul>
<li>A domain name</li>
<li>An IP address</li>
<li>A CIDR address</li>
<li>An asterisk (<code>*</code>), to indicate that no proxying should be performed
Domain name and IP address values can also include a port number.
Can also be set using the <code>NO_PROXY</code> or <code>no_proxy</code> environment variables.</li>
</ul></li>
<li><code>profile</code> - (Optional) AWS profile name as set in the shared configuration and credentials files.
Can also be set using either the environment variables <code>AWS_PROFILE</code> or <code>AWS_DEFAULT_PROFILE</code>.</li>
<li><code>region</code> - (Optional) AWS Region where the provider will operate. The Region must be set.
Can also be set with either the <code>AWS_REGION</code> or <code>AWS_DEFAULT_REGION</code> environment variables,
or via a shared config file parameter <code>region</code> if <code>profile</code> is used.
If credentials are retrieved from the EC2 Instance Metadata Service, the Region can also be retrieved from the metadata.</li>
<li><code>retry_mode</code> - (Optional) Specifies how retries are attempted.
Valid values are <code>standard</code> and <code>adaptive</code>.
Can also be configured using the <code>AWS_RETRY_MODE</code> environment variable or the shared config file parameter <code>retry_mode</code>.</li>
<li><code>s3_use_path_style</code> - (Optional) Whether to enable the request to use path-style addressing, i.e., <code>https://s3.amazonaws.com/BUCKET/KEY</code>.
By default, the S3 client will use virtual hosted bucket addressing, <code>https://BUCKET.s3.amazonaws.com/KEY</code>, when possible.
Specific to the Amazon S3 service.</li>
<li><code>s3_us_east_1_regional_endpoint</code> - (Optional) Specifies whether S3 API calls in the <code>us-east-1</code> Region use the legacy global endpoint or a regional endpoint.
Valid values are <code>legacy</code> or <code>regional</code>.
If omitted, the default behavior in the <code>us-east-1</code> Region is to use the global endpoint for general purpose buckets and the regional endpoint for directory buckets.
Can also be configured using the <code>AWS_S3_US_EAST_1_REGIONAL_ENDPOINT</code> environment variable or the <code>s3_us_east_1_regional_endpoint</code> shared config file parameter.
Specific to the Amazon S3 service.</li>
<li><code>secret_key</code> - (Optional) AWS secret key. Can also be set with the <code>AWS_SECRET_ACCESS_KEY</code> environment variable, or via a shared configuration and credentials files if <code>profile</code> is used. See also <code>access_key</code>.</li>
<li><code>shared_config_files</code> - (Optional) List of paths to AWS shared config files. If not set, the default is <code>[~/.aws/config]</code>. A single value can also be set with the <code>AWS_CONFIG_FILE</code> environment variable.</li>
<li><code>shared_credentials_files</code> - (Optional) List of paths to the shared credentials file. If not set and a profile is used, the default value is <code>[~/.aws/credentials]</code>. A single value can also be set with the <code>AWS_SHARED_CREDENTIALS_FILE</code> environment variable.</li>
<li><code>skip_credentials_validation</code> - (Optional) Whether to skip credentials validation via the STS API. This can be useful for testing and for AWS API implementations that do not have STS available.</li>
<li><code>skip_metadata_api_check</code> - (Optional) Whether to skip the AWS Metadata API check.  Useful for AWS API implementations that do not have a metadata API endpoint.  Setting to <code>true</code> prevents Terraform from authenticating via the Metadata API. You may need to use other authentication methods like static credentials, configuration variables, or environment variables.</li>
<li><code>skip_region_validation</code> - (Optional) Whether to skip validating the Region. Useful for AWS-like implementations that use their own Region names or to bypass the validation for Regions that aren't publicly available yet.</li>
<li><code>skip_requesting_account_id</code> - (Optional) Whether to skip requesting the account ID.  Useful for AWS API implementations that do not have the IAM, STS API, or metadata API.  When set to <code>true</code> and not determined previously, returns an empty account ID when manually constructing ARN attributes with the following:
<ul>
<li><a href="./resources/api_gateway_deployment.html"><code>aws_api_gateway_deployment</code> resource</a></li>
<li><a href="./resources/api_gateway_rest_api.html"><code>aws_api_gateway_rest_api</code> resource</a></li>
<li><a href="./resources/api_gateway_stage.html"><code>aws_api_gateway_stage</code> resource</a></li>
<li><a href="./data-sources/apigatewayv2_api.html"><code>aws_apigatewayv2_api</code> data source</a></li>
<li><a href="./resources/apigatewayv2_api.html"><code>aws_apigatewayv2_api</code> resource</a></li>
<li><a href="./resources/apigatewayv2_stage.html"><code>aws_apigatewayv2_stage</code> resource</a></li>
<li><a href="./resources/appconfig_application.html"><code>aws_appconfig_application</code> resource</a></li>
<li><a href="./resources/appconfig_configuration_profile.html"><code>aws_appconfig_configuration_profile</code> resource</a></li>
<li><a href="./resources/appconfig_deployment.html"><code>aws_appconfig_deployment</code> resource</a></li>
<li><a href="./resources/appconfig_deployment_strategy.html"><code>aws_appconfig_deployment_strategy</code> resource</a></li>
<li><a href="./resources/appconfig_environment.html"><code>aws_appconfig_environment</code> resource</a></li>
<li><a href="./resources/appconfig_hosted_configuration_version.html"><code>aws_appconfig_hosted_configuration_version</code> resource</a></li>
<li><a href="./resources/athena_workgroup.html"><code>aws_athena_workgroup</code> resource</a></li>
<li><a href="./resources/budgets_budget.html"><code>aws_budgets_budget</code> resource</a></li>
<li><a href="./resources/codedeploy_app.html"><code>aws_codedeploy_app</code> resource</a></li>
<li><a href="./resources/codedeploy_deployment_group.html"><code>aws_codedeploy_deployment_group</code> resource</a></li>
<li><a href="./resources/cognito_identity_pool.html"><code>aws_cognito_identity_pool</code> resource</a></li>
<li><a href="./data-sources/cognito_user_pools.html"><code>aws_cognito_user_pools</code> data source</a></li>
<li><a href="./resources/default_vpc_dhcp_options.html"><code>aws_default_vpc_dhcp_options</code></a></li>
<li><a href="./resources/dms_event_subscription.html"><code>aws_dms_event_subscription</code> resource</a></li>
<li><a href="./resources/dms_replication_subnet_group.html"><code>aws_dms_replication_subnet_group</code> resource</a></li>
<li><a href="./resources/dx_connection.html"><code>aws_dx_connection</code> resource</a></li>
<li><a href="./resources/dx_hosted_private_virtual_interface_accepter.html"><code>aws_dx_hosted_private_virtual_interface_accepter</code> resource</a></li>
<li><a href="./resources/dx_hosted_private_virtual_interface.html"><code>aws_dx_hosted_private_virtual_interface</code> resource</a></li>
<li><a href="./resources/dx_hosted_public_virtual_interface_accepter.html"><code>aws_dx_hosted_public_virtual_interface_accepter</code> resource</a></li>
<li><a href="./resources/dx_hosted_public_virtual_interface.html"><code>aws_dx_hosted_public_virtual_interface</code> resource</a></li>
<li><a href="./resources/dx_hosted_transit_virtual_interface_accepter.html"><code>aws_dx_hosted_transit_virtual_interface_accepter</code> resource</a></li>
<li><a href="./resources/dx_hosted_transit_virtual_interface.html"><code>aws_dx_hosted_transit_virtual_interface</code> resource</a></li>
<li><a href="./resources/dx_lag.html"><code>aws_dx_lag</code> resource</a></li>
<li><a href="./resources/dx_private_virtual_interface.html"><code>aws_dx_private_virtual_interface</code> resource</a></li>
<li><a href="./resources/dx_public_virtual_interface.html"><code>aws_dx_public_virtual_interface</code> resource</a></li>
<li><a href="./resources/dx_transit_virtual_interface.html"><code>aws_dx_transit_virtual_interface</code> resource</a></li>
<li><a href="./data-sources/ebs_volume.html"><code>aws_ebs_volume</code> data source</a></li>
<li><a href="./resources/ec2_client_vpn_endpoint.html"><code>aws_ec2_client_vpn_endpoint</code> resource</a></li>
<li><a href="./resources/ec2_traffic_mirror_filter.html"><code>aws_ec2_traffic_mirror_filter</code> resource</a></li>
<li><a href="./resources/ec2_traffic_mirror_filter_rule.html"><code>aws_ec2_traffic_mirror_filter_rule</code> resource</a></li>
<li><a href="./resources/ec2_traffic_mirror_session.html"><code>aws_ec2_traffic_mirror_session</code> resource</a></li>
<li><a href="./resources/ec2_traffic_mirror_target.html"><code>aws_ec2_traffic_mirror_target</code> resource</a></li>
<li><a href="./data-sources/ec2_transit_gateway_route_table.html"><code>aws_ec2_transit_gateway_route_table</code> data source</a></li>
<li><a href="./resources/ec2_transit_gateway_route_table.html"><code>aws_ec2_transit_gateway_route_table</code> resource</a></li>
<li><a href="./resources/ecs_capacity_provider.html"><code>aws_ecs_capacity_provider</code> resource (import)</a></li>
<li><a href="./resources/ecs_cluster.html"><code>aws_ecs_cluster</code> resource (import)</a></li>
<li><a href="./resources/ecs_service.html"><code>aws_ecs_service</code> resource (import)</a></li>
<li><a href="./data-sources/customer_gateway.html"><code>aws_customer_gateway</code> data source</a></li>
<li><a href="./resources/customer_gateway.html"><code>aws_customer_gateway</code> resource</a></li>
<li><a href="./data-sources/efs_access_point.html"><code>aws_efs_access_point</code> data source</a></li>
<li><a href="./resources/efs_access_point.html"><code>aws_efs_access_point</code> resource</a></li>
<li><a href="./data-sources/efs_file_system.html"><code>aws_efs_file_system</code> data source</a></li>
<li><a href="./resources/efs_file_system.html"><code>aws_efs_file_system</code> resource</a></li>
<li><a href="./data-sources/efs_mount_target.html"><code>aws_efs_mount_target</code> data source</a></li>
<li><a href="./resources/efs_mount_target.html"><code>aws_efs_mount_target</code> resource</a></li>
<li><a href="./data-sources/elasticache_cluster.html"><code>aws_elasticache_cluster</code> data source</a></li>
<li><a href="./resources/elasticache_cluster.html"><code>aws_elasticache_cluster</code> resource</a></li>
<li><a href="./data-sources/elb.html"><code>aws_elb</code> data source</a></li>
<li><a href="./resources/elb.html"><code>aws_elb</code> resource</a></li>
<li><a href="./resources/finspace_kx_dataview.html"><code>aws_finspace_kx_dataview</code> resource</a></li>
<li><a href="./resources/flow_log.html"><code>aws_flow_log</code> resource</a></li>
<li><a href="./resources/glue_catalog_database.html"><code>aws_glue_catalog_database</code> resource</a></li>
<li><a href="./resources/glue_catalog_table.html"><code>aws_glue_catalog_table</code> resource</a></li>
<li><a href="./resources/glue_connection.html"><code>aws_glue_connection</code> resource</a></li>
<li><a href="./resources/glue_crawler.html"><code>aws_glue_crawler</code> resource</a></li>
<li><a href="./resources/glue_job.html"><code>aws_glue_job</code> resource</a></li>
<li><a href="./resources/glue_ml_transform.html"><code>aws_glue_ml_transform</code> resource</a></li>
<li><a href="./resources/glue_trigger.html"><code>aws_glue_trigger</code> resource</a></li>
<li><a href="./resources/glue_user_defined_function.html"><code>aws_glue_user_defined_function</code> resource</a></li>
<li><a href="./resources/glue_workflow.html"><code>aws_glue_workflow</code> resource</a></li>
<li><a href="./resources/guardduty_detector.html"><code>aws_guardduty_detector</code> resource</a></li>
<li><a href="./resources/guardduty_ipset.html"><code>aws_guardduty_ipset</code> resource</a></li>
<li><a href="./resources/guardduty_threatintelset.html"><code>aws_guardduty_threatintelset</code> resource</a></li>
<li><a href="./data-sources/instance.html"><code>aws_instance</code> data source</a></li>
<li><a href="./resources/instance.html"><code>aws_instance</code> resource</a></li>
<li><a href="./resources/key_pair.html"><code>aws_key_pair</code> resource</a></li>
<li><a href="./data-sources/launch_template.html"><code>aws_launch_template</code> data source</a></li>
<li><a href="./resources/launch_template.html"><code>aws_launch_template</code> resource</a></li>
<li><a href="./resources/placement_group.html"><code>aws_placement_group</code> resource</a></li>
<li><a href="./resources/redshift_cluster.html"><code>aws_redshift_cluster</code> resource</a></li>
<li><a href="./resources/redshift_event_subscription.html"><code>aws_redshift_event_subscription</code> resource</a></li>
<li><a href="./resources/redshift_parameter_group.html"><code>aws_redshift_parameter_group</code> resource</a></li>
<li><a href="./resources/redshift_snapshot_copy_grant.html"><code>aws_redshift_snapshot_copy_grant</code> resource</a></li>
<li><a href="./resources/redshift_snapshot_schedule.html"><code>aws_redshift_snapshot_schedule</code> resource</a></li>
<li><a href="./resources/redshift_subnet_group.html"><code>aws_redshift_subnet_group</code> resource</a></li>
<li><a href="./resources/s3_account_public_access_block.html"><code>aws_s3_account_public_access_block</code> resource</a></li>
<li><a href="./resources/ses_active_receipt_rule_set.html"><code>aws_ses_active_receipt_rule_set</code> resource</a></li>
<li><a href="./resources/ses_configuration_set.html"><code>aws_ses_configuration_set</code> resource</a></li>
<li><a href="./resources/ses_domain_identity_verification.html"><code>aws_ses_domain_identity_verification</code> resource</a></li>
<li><a href="./resources/ses_domain_identity.html"><code>aws_ses_domain_identity</code> resource</a></li>
<li><a href="./resources/ses_email_identity.html"><code>aws_ses_email_identity</code> resource</a></li>
<li><a href="./resources/ses_event_destination.html"><code>aws_ses_event_destination</code> resource</a></li>
<li><a href="./resources/ses_receipt_filter.html"><code>aws_ses_receipt_filter</code> resource</a></li>
<li><a href="./resources/ses_receipt_rule.html"><code>aws_ses_receipt_rule</code> resource</a></li>
<li><a href="./resources/ses_template.html"><code>aws_ses_template</code> resource</a></li>
<li><a href="./data-sources/ssm_document.html"><code>aws_ssm_document</code> data source</a></li>
<li><a href="./resources/ssm_document.html"><code>aws_ssm_document</code> resource</a></li>
<li><a href="./data-sources/ssm_parameter.html"><code>aws_ssm_parameter</code> data source</a></li>
<li><a href="./resources/ssm_parameter.html"><code>aws_ssm_parameter</code> resource</a></li>
<li><a href="./resources/synthetics_canary.html"><code>aws_synthetics_canary</code> resource</a></li>
<li><a href="./data-sources/vpc_endpoint_service.html"><code>aws_vpc_endpoint_service</code> data source</a></li>
<li><a href="./resources/vpc_endpoint_service.html"><code>aws_vpc_endpoint_service</code> resource</a></li>
<li><a href="./resources/vpn_connection.html"><code>aws_vpn_connection</code> resource</a></li>
<li><a href="./data-sources/vpn_gateway.html"><code>aws_vpn_gateway</code> data source</a></li>
<li><a href="./resources/vpn_gateway.html"><code>aws_vpn_gateway</code> resource</a></li>
<li><a href="./resources/waf_geo_match_set.html"><code>aws_waf_geo_match_set</code> resource</a></li>
<li><a href="./resources/waf_ipset.html"><code>aws_waf_ipset</code> resource</a></li>
<li><a href="./resources/waf_rate_based_rule.html"><code>aws_waf_rate_based_rule</code> resource</a></li>
<li><a href="./resources/waf_regex_match_set.html"><code>aws_waf_regex_match_set</code> resource</a></li>
<li><a href="./resources/waf_regex_pattern_set.html"><code>aws_waf_regex_pattern_set</code> resource</a></li>
<li><a href="./resources/wafregional_ipset.html"><code>aws_wafregional_ipset</code> resource</a></li>
<li><a href="./resources/wafregional_rate_based_rule.html"><code>aws_wafregional_rate_based_rule</code> resource</a></li>
<li><a href="./resources/wafregional_rule.html"><code>aws_wafregional_rule</code> resource</a></li>
<li><a href="./resources/wafregional_rule_group.html"><code>aws_wafregional_rule_group</code> resource</a></li>
<li><a href="./resources/wafregional_web_acl.html"><code>aws_wafregional_web_acl</code> resource</a></li>
<li><a href="./resources/waf_rule.html"><code>aws_waf_rule</code> resource</a></li>
<li><a href="./resources/waf_rule_group.html"><code>aws_waf_rule_group</code> resource</a></li>
<li><a href="./resources/waf_size_constraint_set.html"><code>aws_waf_size_constraint_set</code> resource</a></li>
<li><a href="./resources/waf_web_acl.html"><code>aws_waf_web_acl</code> resource</a></li>
<li><a href="./resources/waf_xss_match_set.html"><code>aws_waf_xss_match_set</code> resource</a></li>
</ul></li>
<li><code>sts_region</code> - (Optional) AWS Region for STS. If unset, AWS will use the same Region for STS as other non-STS operations.</li>
<li><code>token</code> - (Optional) Session token for validating temporary credentials. Typically provided after successful identity federation or Multi-Factor Authentication (MFA) login. With MFA login, this is the session token provided afterward, not the 6 digit MFA code used to get temporary credentials.  Can also be set with the <code>AWS_SESSION_TOKEN</code> environment variable.</li>
<li><code>token_bucket_rate_limiter_capacity</code> - (Optional) The capacity of the AWS SDK's token bucket retry rate limiter. If no value is specified then client-side rate limiting is disabled. If a value is specified there is a greater likelihood of <code>retry quota exceeded</code> errors being raised.</li>
<li><code>use_dualstack_endpoint</code> - (Optional) Force the provider to resolve endpoints with DualStack capability. Can also be set with the <code>AWS_USE_DUALSTACK_ENDPOINT</code> environment variable or in a shared config file (<code>use_dualstack_endpoint</code>).</li>
<li><code>use_fips_endpoint</code> - (Optional) Force the provider to resolve endpoints with FIPS capability for all services.
Can also be set with the <code>AWS_USE_FIPS_ENDPOINT</code> environment variable or in a shared configfile (<code>use_fips_endpoint</code>).
This setting is ignored for any service with a custom endpoint specified.
Note that not all services or regions have valid FIPS endpoints.
The parameter <code>endpoints</code> can be used to override a particular service's endpoint if there is no valid FIPS endpoint.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/assume_role%20Configuration%20Block"></a><h3 id="assume_role-configuration-block">assume_role Configuration Block</h3>

<p>The <code>assume_role</code> configuration block supports the following arguments:</p>

<ul>
<li><code>duration</code> - (Optional) Duration of the assume role session.
You can provide a value from 15 minutes up to the maximum session duration setting for the role.
Represented by a string such as <code>1h</code>, <code>2h45m</code>, or <code>30m15s</code>.</li>
<li><code>external_id</code> - (Optional) External identifier to use when assuming the role.</li>
<li><code>policy</code> - (Optional) IAM Policy JSON describing further restricting permissions for the IAM Role being assumed.</li>
<li><code>policy_arns</code> - (Optional) Set of Amazon Resource Names (ARNs) of IAM Policies describing further restricting permissions for the IAM Role being assumed.</li>
<li><code>role_arn</code> - (Required) ARN of the IAM Role to assume.</li>
<li><code>session_name</code> - (Optional) Session name to use when assuming the role.</li>
<li><code>source_identity</code> - (Optional) Source identity specified by the principal assuming the role.</li>
<li><code>tags</code> - (Optional) Map of assume role session tags.</li>
<li><code>transitive_tag_keys</code> - (Optional) Set of assume role session tag keys to pass to any subsequent sessions.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/assume_role_with_web_identity%20Configuration%20Block"></a><h3 id="assume_role_with_web_identity-configuration-block">assume_role_with_web_identity Configuration Block</h3>

<p>The <code>assume_role_with_web_identity</code> configuration block supports the following arguments:</p>

<ul>
<li><code>duration</code> - (Optional) Duration of the assume role session.
You can provide a value from 15 minutes up to the maximum session duration setting for the role.
Represented by a string such as <code>1h</code>, <code>2h45m</code>, or <code>30m15s</code>.</li>
<li><code>policy</code> - (Optional) IAM Policy JSON describing further restricting permissions for the IAM Role being assumed.</li>
<li><code>policy_arns</code> - (Optional) Set of Amazon Resource Names (ARNs) of IAM Policies describing further restricting permissions for the IAM Role being assumed.</li>
<li><code>role_arn</code> - (Required) ARN of the IAM Role to assume.
Can also be set with the <code>AWS_ROLE_ARN</code> environment variable.</li>
<li><code>session_name</code> - (Optional) Session name to use when assuming the role.
Can also be set with the <code>AWS_ROLE_SESSION_NAME</code> environment variable.</li>
<li><code>web_identity_token</code> - (Optional) Value of a web identity token from an OpenID Connect (OIDC) or OAuth provider.
One of <code>web_identity_token</code> or <code>web_identity_token_file</code> is required.</li>
<li><code>web_identity_token_file</code> - (Optional) File containing a web identity token from an OpenID Connect (OIDC) or OAuth provider.
One of <code>web_identity_token_file</code> or <code>web_identity_token</code> is required.
Can also be set with the <code>AWS_WEB_IDENTITY_TOKEN_FILE</code> environment variable.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/default_tags%20Configuration%20Block"></a><h3 id="default_tags-configuration-block">default_tags Configuration Block</h3>

<blockquote>
  <p><strong>Hands-on:</strong> Try the <a href="https://learn.hashicorp.com/tutorials/terraform/aws-default-tags?in=terraform/aws">Configure Default Tags for AWS Resources</a> tutorial.</p>
</blockquote>

<p>Example: Resource with provider default tags</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">default_tags</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test"</span><span class="w"></span>
<span class="w">      </span><span class="na">Name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Provider Tag"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ..other configuration...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_resource_level_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_all_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags_all</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Outputs:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>terraform apply
<span class="go">...</span>
<span class="go">Outputs:</span>

<span class="go">vpc_all_tags = tomap({</span>
<span class="go">  "Environment" = "Test"</span>
<span class="go">  "Name" = "Provider Tag"</span>
<span class="go">})</span>
</code></pre></div>

<p>Example: Resource with tags and provider default tags</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">default_tags</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test"</span><span class="w"></span>
<span class="w">      </span><span class="na">Name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Provider Tag"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ..other configuration...</span>
<span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">Owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_resource_level_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_all_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags_all</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Outputs:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>terraform apply
<span class="go">...</span>
<span class="go">Outputs:</span>

<span class="go">vpc_all_tags = tomap({</span>
<span class="go">  "Environment" = "Test"</span>
<span class="go">  "Name" = "Provider Tag"</span>
<span class="go">  "Owner" = "example"</span>
<span class="go">})</span>
<span class="go">vpc_resource_level_tags = tomap({</span>
<span class="go">  "Owner" = "example"</span>
<span class="go">})</span>
</code></pre></div>

<p>Example: Resource overriding provider default tags</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">default_tags</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test"</span><span class="w"></span>
<span class="w">      </span><span class="na">Name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Provider Tag"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ..other configuration...</span>
<span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Production"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_resource_level_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_all_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags_all</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Outputs:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>terraform apply
<span class="go">...</span>
<span class="go">Outputs:</span>

<span class="go">vpc_all_tags = tomap({</span>
<span class="go">  "Environment" = "Production"</span>
<span class="go">  "Name" = "Provider Tag"</span>
<span class="go">})</span>
<span class="go">vpc_resource_level_tags = tomap({</span>
<span class="go">  "Environment" = "Production"</span>
<span class="go">})</span>
</code></pre></div>

<p>Example: Default tags from environment variables</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">default_tags</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Provider Tag"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ..other configuration...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_resource_level_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"vpc_all_tags"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.tags_all</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Outputs:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">$ </span><span class="nb">export</span> <span class="nv">TF_AWS_DEFAULT_TAGS_Environment</span><span class="o">=</span>Test
<span class="gp">$ </span>terraform apply
<span class="go">...</span>
<span class="go">Outputs:</span>

<span class="go">vpc_all_tags = tomap({</span>
<span class="go">  "Environment" = "Test"</span>
<span class="go">  "Name" = "Provider Tag"</span>
<span class="go">})</span>
</code></pre></div>

<p>The <code>default_tags</code> configuration block supports the following argument:</p>

<ul>
<li><code>tags</code> - (Optional) Key-value map of tags to apply to all resources.
Default tags can also be provided via environment variables matching the pattern <code>TF_AWS_DEFAULT_TAGS_&lt;tag_key&gt;=&lt;tag_value&gt;</code>.
If a tag is present in both an environment variable and this argument, the value in the provider configuration takes precedence.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/ignore_tags%20Configuration%20Block"></a><h3 id="ignore_tags-configuration-block">ignore_tags Configuration Block</h3>

<p>Example:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">ignore_tags</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"TagKey1"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>The <code>ignore_tags</code> configuration block supports the following arguments:</p>

<ul>
<li><code>keys</code> - (Optional) List of exact resource tag keys to ignore across all resources handled by this provider.
Ignored tag keys can also be provided via the <code>TF_AWS_IGNORE_TAGS_KEYS</code> environment variable.
When supplying multiple keys, the values should be comma delimited.
If both this argument and the corresponding environment variable are set, values from both sources are merged into a single list.
This configuration prevents Terraform from returning the tag in any <code>tags</code> attributes and displaying any configuration difference for the tag value.
If any resource configuration still has this tag key configured in the <code>tags</code> argument, it will display a perpetual difference until the tag is removed from the argument or <a href="https://www.terraform.io/docs/configuration/meta-arguments/lifecycle.html#ignore_changes"><code>ignore_changes</code></a> is also used.</li>
<li><code>key_prefixes</code> - (Optional) List of resource tag key prefixes to ignore across all resources handled by this provider.
Ignored tag key prefixes can also be provided via the <code>TF_AWS_IGNORE_TAGS_KEY_PREFIXES</code> environment variable.
When supplying multiple key prefixes, the values should be comma delimited.
If both this argument and the corresponding environment variable are set, values from both sources are merged into a single list.
This configuration prevents Terraform from returning any tag key matching the prefixes in any <code>tags</code> attributes and displaying any configuration difference for those tag values.
If any resource configuration still has a tag matching one of the prefixes configured in the <code>tags</code> argument, it will display a perpetual difference until the tag is removed from the argument or <a href="https://www.terraform.io/docs/configuration/meta-arguments/lifecycle.html#ignore_changes"><code>ignore_changes</code></a> is also used.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Getting%20the%20Account%20ID"></a><h2 id="getting-the-account-id">Getting the Account ID</h2>

<p>If you use either <code>allowed_account_ids</code> or <code>forbidden_account_ids</code>,
Terraform uses several approaches to get the actual account ID
in order to compare it with allowed or forbidden IDs.</p>

<p>Approaches differ per authentication providers:</p>

<ul>
<li>EC2 instance w/ IAM Instance Profile - <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html">Metadata API</a>
is always used. Introduced in Terraform <code>0.6.16</code>.</li>
<li>All other providers (environment variable, shared credentials file, ...)
will try three approaches in the following order
<ul>
<li><code>iam:GetUser</code> - Typically useful for IAM Users. It also means
that each user needs to be privileged to call <code>iam:GetUser</code> for themselves.</li>
<li><code>sts:GetCallerIdentity</code> - _Should_ work for both IAM Users and federated IAM Roles,
introduced in Terraform <code>0.6.16</code>.</li>
<li><code>iam:ListRoles</code> - This is specifically useful for IdP-federated profiles
which cannot use <code>iam:GetUser</code>. It also means that each federated user
need to be _assuming_ an IAM role which allows <code>iam:ListRoles</code>.
Used in Terraform <code>0.6.16+</code>.
There used to be no better way to get account ID out of the API
when using the federated account until <code>sts:GetCallerIdentity</code> was introduced.</li>
</ul></li>
</ul>

            
        
    </body></html>
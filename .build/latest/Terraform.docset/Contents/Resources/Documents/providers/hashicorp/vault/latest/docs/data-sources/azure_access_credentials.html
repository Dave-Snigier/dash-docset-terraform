<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/vault/latest/docs/data-sources/azure_access_credentials --><head>
                <title>vault_azure_access_credentials</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="vault_azure_access_credentials">vault_azure_access_credentials</h1>

<p>Reads Azure credentials from an Azure secret backend in Vault.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>Important</em>
    <p>All data retrieved from Vault will be written in cleartext to state file generated by Terraform, will appear in the console output when Terraform runs, and may be included in plan files if secrets are interpolated into any resource attributes. Protect these artifacts accordingly. See <a href="../index.html">the main provider documentation</a> for more details.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Description"></a><h2 id="description">Description</h2>

<p>The Azure Active Directory data source exists to easily pull short-lived
credentials from Vault for use in Terraform. By default, it returns a 
dynamically generated <code>client_id</code> and <code>client_secret</code> without testing 
whether they've fully propagated for use in Azure Active Directory. However,
by activating <code>validate_creds</code>, credentials will be tested before being 
returned. This will, however, increase the time it takes for the credentials
to be returned, blocking Terraform's execution until they are ready.</p>

<p>If <code>validate_creds</code> is used, by default, credentials will be validated by 
making a test call to Azure every 1 seconds. When we have received 8 
successes in a row, the credentials will be returned. We have seen propagation 
times take up to 15 minutes, so the maximum length of time for the check defaults 
to 20 minutes. However, propagation times will vary widely based on each company's Azure
usage, so all these settings are configurable.</p>

<p>Credentials are tested by attempting to refresh a client token with them.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"vault_azure_access_credentials"</span><span class="w"> </span><span class="nv">"creds"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-role"</span><span class="w"></span>
<span class="w">  </span><span class="na">validate_creds</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">num_sequential_successes</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">  </span><span class="na">num_seconds_between_tests</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">max_cred_validation_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"> </span>
<span class="p">}</span><span class="w"></span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">"azure"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">client_id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">data.vault_azure_access_credentials.creds.client_id</span><span class="w"></span>
<span class="w">  </span><span class="na">client_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.vault_azure_access_credentials.creds.client_secret</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Caveats"></a><h2 id="caveats">Caveats</h2>

<p>The <code>validate_creds</code> option requires read-access to the <code>backend</code> config endpoint.
If the effective Vault role does not have the required permissions then valid values 
are required to be set for: <code>subscription_id</code>, <code>tenant_id</code>, <code>environment</code>.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>namespace</code> - (Optional) The namespace of the target resource.
The value should not contain leading or trailing forward slashes.
The <code>namespace</code> is always relative to the provider's configured <a href="../index.html#namespace">namespace</a>.
<em>Available only for Vault Enterprise</em>.</p></li>
<li><p><code>backend</code> - (Required) The path to the Azure secret backend to
read credentials from, with no leading or trailing <code>/</code>s.</p></li>
<li><p><code>role</code> - (Required) The name of the Azure secret backend role to read
credentials from, with no leading or trailing <code>/</code>s.</p></li>
<li><p><code>validate_creds</code> - (Optional) Whether generated credentials should be 
validated before being returned. Defaults to <code>false</code>, which returns 
credentials without checking whether they have fully propagated throughout
Azure Active Directory. Designating <code>true</code> activates testing.</p></li>
<li><p><code>num_sequential_successes</code> - (Optional) If 'validate_creds' is true, 
the number of sequential successes required to validate generated 
credentials. Defaults to 8.</p></li>
<li><p><code>num_seconds_between_tests</code> - (Optional) If 'validate_creds' is true, 
the number of seconds to wait between each test of generated credentials.
Defaults to 1.</p></li>
<li><p><code>max_cred_validation_seconds</code> - (Optional) If 'validate_creds' is true, 
the number of seconds after which to give up validating credentials. Defaults
to 300.</p></li>
<li><p><code>subscription_id</code> - (Optional) The subscription ID to use during credential
validation. Defaults to the subscription ID configured in the Vault <code>backend</code>. <br/>
<em>See the <a href="#caveats">caveats</a> section for more information on this field.</em></p></li>
<li><p><code>tenant_id</code> - (Optional) The tenant ID to use during credential validation.
Defaults to the tenant ID configured in the Vault <code>backend</code>. <br/>
<em>See the <a href="#caveats">caveats</a> section for more information on this field.</em></p></li>
<li><p><code>environment</code> - (Optional) The Azure environment to use during credential validation.
Defaults to the environment configured in the Vault backend.
Some possible values: <code>AzurePublicCloud</code>, <code>AzureGovernmentCloud</code> <br/>
<em>See the <a href="#caveats">caveats</a> section for more information on this field.</em></p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments above, the following attributes are exported:</p>

<ul>
<li><p><code>client_id</code> - The client id for credentials to query the Azure APIs.</p></li>
<li><p><code>client_secret</code> - The client secret for credentials to query the Azure APIs.</p></li>
<li><p><code>lease_id</code> - The lease identifier assigned by Vault.</p></li>
<li><p><code>lease_duration</code> - The duration of the secret lease, in seconds relative
to the time the data was requested. Once this time has passed any plan
generated with this data may fail to apply.</p></li>
<li><p><code>lease_start_time</code> - As a convenience, this records the current time
on the computer where Terraform is running when the data is requested.
This can be used to approximate the absolute time represented by
<code>lease_duration</code>, though users must allow for any clock drift and response
latency relative to the Vault server.</p></li>
<li><p><code>lease_renewable</code> - <code>true</code> if the lease can be renewed using Vault's
<code>sys/renew/{lease-id}</code> endpoint. Terraform does not currently support lease
renewal, and so it will request a new lease each time this data source is
refreshed.</p></li>
</ul>

            
        
    </body></html>
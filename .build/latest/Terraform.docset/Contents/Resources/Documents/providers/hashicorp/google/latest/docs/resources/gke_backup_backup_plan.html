<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/gke_backup_backup_plan --><head>
                <title>google_gke_backup_backup_plan</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_gke_backup_backup_plan">google_gke_backup_backup_plan</h1>

<p>Represents a Backup Plan instance.</p>

<p>To get more information about BackupPlan, see:</p>

<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/projects.locations.backupPlans">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke">Official Documentation</a></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Basic"></a><h2 id="example-usage-gkebackup-backupplan-basic">Example Usage - Gkebackup Backupplan Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"basic-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"basic-plan"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=gkebackup_backupplan_autopilot&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Autopilot"></a><h2 id="example-usage-gkebackup-backupplan-autopilot">Example Usage - Gkebackup Backupplan Autopilot</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"autopilot-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">enable_autopilot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="nb">ip_allocation_policy</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">release_channel</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RAPID"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"autopilot"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"autopilot-plan"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Cmek"></a><h2 id="example-usage-gkebackup-backupplan-cmek">Example Usage - Gkebackup Backupplan Cmek</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"cmek-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"cmek"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cmek-plan"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_namespaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"default", "test"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">encryption_key</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">gcp_kms_encryption_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_kms_crypto_key.crypto_key.id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_kms_crypto_key"</span><span class="w"> </span><span class="nv">"crypto_key"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"backup-key"</span><span class="w"></span>
<span class="w">  </span><span class="na">key_ring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_kms_key_ring.key_ring.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_kms_key_ring"</span><span class="w"> </span><span class="nv">"key_ring"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"backup-key"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Full"></a><h2 id="example-usage-gkebackup-backupplan-full">Example Usage - Gkebackup Backupplan Full</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"full-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"full"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"full-plan"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">retention_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_delete_lock_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_retain_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">180</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_schedule</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">cron_schedule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0 9 * * 1"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_applications</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">namespaced_names</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"app1"</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns1"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">namespaced_names</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"app2"</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns2"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Permissive"></a><h2 id="example-usage-gkebackup-backupplan-permissive">Example Usage - Gkebackup Backupplan Permissive</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"permissive-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"permissive"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"permissive-plan"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">retention_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_delete_lock_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_retain_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">180</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_schedule</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">cron_schedule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0 9 * * 1"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">permissive_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_applications</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">namespaced_names</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"app1"</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns1"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">namespaced_names</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"app2"</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns2"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Rpo%20Daily%20Window"></a><h2 id="example-usage-gkebackup-backupplan-rpo-daily-window">Example Usage - Gkebackup Backupplan Rpo Daily Window</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"rpo-daily-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"rpo_daily_window"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rpo-daily-window"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">retention_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_delete_lock_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_retain_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">180</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_schedule</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">paused</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">rpo_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">target_rpo_minutes</span><span class="o">=</span><span class="m">1440</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_windows</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">start_time</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"7200s"</span><span class="w"></span>
<span class="w">        </span><span class="na">daily</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_windows</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">start_time</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">          </span><span class="na">minutes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="w"></span>
<span class="w">          </span><span class="na">seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">          </span><span class="na">nanos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3600s"</span><span class="w"></span>
<span class="w">        </span><span class="nb">single_occurrence_date</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2024</span><span class="w"></span>
<span class="w">          </span><span class="na">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">          </span><span class="na">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Backupplan%20Rpo%20Weekly%20Window"></a><h2 id="example-usage-gkebackup-backupplan-rpo-weekly-window">Example Usage - Gkebackup Backupplan Rpo Weekly Window</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"rpo-weekly-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"rpo_weekly_window"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rpo-weekly-window"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">retention_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_delete_lock_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_retain_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">180</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_schedule</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">paused</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">rpo_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">target_rpo_minutes</span><span class="o">=</span><span class="m">1440</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_windows</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">start_time</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">          </span><span class="na">minutes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">23</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1800s"</span><span class="w"></span>
<span class="w">        </span><span class="nb">days_of_week</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">days_of_week</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"MONDAY", "THURSDAY"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_windows</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">start_time</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3600s"</span><span class="w"></span>
<span class="w">        </span><span class="nb">single_occurrence_date</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2024</span><span class="w"></span>
<span class="w">          </span><span class="na">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">          </span><span class="na">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">17</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_windows</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">start_time</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">          </span><span class="na">minutes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"600s"</span><span class="w"></span>
<span class="w">        </span><span class="nb">single_occurrence_date</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2024</span><span class="w"></span>
<span class="w">          </span><span class="na">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">          </span><span class="na">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">18</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>name</code> -
(Required)
The full name of the BackupPlan Resource.</p></li>
<li><p><code>cluster</code> -
(Required)
The source cluster from which Backups will be created via this BackupPlan.</p></li>
<li><p><code>location</code> -
(Required)
The region of the Backup Plan.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> -
(Optional)
User specified descriptive string for this BackupPlan.</p></li>
<li><p><code>retention_policy</code> -
(Optional)
RetentionPolicy governs lifecycle of Backups created under this plan.
Structure is <a href="#nested_retention_policy">documented below</a>.</p></li>
<li><p><code>labels</code> -
(Optional)
Description: A set of custom labels supplied by the user.
A list of key-&gt;value pairs.
Example: { "name": "wrench", "mass": "1.3kg", "count": "3" }.</p>

<p><strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>backup_schedule</code> -
(Optional)
Defines a schedule for automatic Backup creation via this BackupPlan.
Structure is <a href="#nested_backup_schedule">documented below</a>.</p></li>
<li><p><code>deactivated</code> -
(Optional)
This flag indicates whether this BackupPlan has been deactivated.
Setting this field to True locks the BackupPlan such that no further updates will be allowed
(except deletes), including the deactivated field itself. It also prevents any new Backups
from being created via this BackupPlan (including scheduled Backups).</p></li>
<li><p><code>backup_config</code> -
(Optional)
Defines the configuration of Backups created via this BackupPlan.
Structure is <a href="#nested_backup_config">documented below</a>.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_retention_policy"></a>The <code>retention_policy</code> block supports:</p>

<ul>
<li><p><code>backup_delete_lock_days</code> -
(Optional)
Minimum age for a Backup created via this BackupPlan (in days).
Must be an integer value between 0-90 (inclusive).
A Backup created under this BackupPlan will not be deletable
until it reaches Backup's (create time + backup_delete_lock_days).
Updating this field of a BackupPlan does not affect existing Backups.
Backups created after a successful update will inherit this new value.</p></li>
<li><p><code>backup_retain_days</code> -
(Optional)
The default maximum age of a Backup created via this BackupPlan.
This field MUST be an integer value &gt;= 0 and &lt;= 365. If specified,
a Backup created under this BackupPlan will be automatically deleted
after its age reaches (createTime + backupRetainDays).
If not specified, Backups created under this BackupPlan will NOT be
subject to automatic deletion. Updating this field does NOT affect
existing Backups under it. Backups created AFTER a successful update
will automatically pick up the new value.
NOTE: backupRetainDays must be &gt;= backupDeleteLockDays.
If cronSchedule is defined, then this must be &lt;= 360 * the creation interval.
If rpo_config is defined, then this must be
&lt;= 360 * targetRpoMinutes/(1440minutes/day)</p></li>
<li><p><code>locked</code> -
(Optional)
This flag denotes whether the retention policy of this BackupPlan is locked.
If set to True, no further update is allowed on this policy, including
the locked field itself.</p></li>
</ul>

<p><a name="nested_backup_schedule"></a>The <code>backup_schedule</code> block supports:</p>

<ul>
<li><p><code>cron_schedule</code> -
(Optional)
A standard cron string that defines a repeating schedule for
creating Backups via this BackupPlan.
This is mutually exclusive with the rpoConfig field since at most one
schedule can be defined for a BackupPlan.
If this is defined, then backupRetainDays must also be defined.</p></li>
<li><p><code>paused</code> -
(Optional)
This flag denotes whether automatic Backup creation is paused for this BackupPlan.</p></li>
<li><p><code>rpo_config</code> -
(Optional)
Defines the RPO schedule configuration for this BackupPlan. This is mutually
exclusive with the cronSchedule field since at most one schedule can be defined
for a BackupPLan. If this is defined, then backupRetainDays must also be defined.
Structure is <a href="#nested_backup_schedule_rpo_config">documented below</a>.</p></li>
</ul>

<p><a name="nested_backup_schedule_rpo_config"></a>The <code>rpo_config</code> block supports:</p>

<ul>
<li><p><code>target_rpo_minutes</code> -
(Required)
Defines the target RPO for the BackupPlan in minutes, which means the target
maximum data loss in time that is acceptable for this BackupPlan. This must be
at least 60, i.e., 1 hour, and at most 86400, i.e., 60 days.</p></li>
<li><p><code>exclusion_windows</code> -
(Optional)
User specified time windows during which backup can NOT happen for this BackupPlan.
Backups should start and finish outside of any given exclusion window. Note: backup
jobs will be scheduled to start and finish outside the duration of the window as
much as possible, but running jobs will not get canceled when it runs into the window.
All the time and date values in exclusionWindows entry in the API are in UTC. We
only allow &lt;=1 recurrence (daily or weekly) exclusion window for a BackupPlan while no
restriction on number of single occurrence windows.
Structure is <a href="#nested_backup_schedule_rpo_config_exclusion_windows">documented below</a>.</p></li>
</ul>

<p><a name="nested_backup_schedule_rpo_config_exclusion_windows"></a>The <code>exclusion_windows</code> block supports:</p>

<ul>
<li><p><code>start_time</code> -
(Required)
Specifies the start time of the window using time of the day in UTC.
Structure is <a href="#nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_start_time">documented below</a>.</p></li>
<li><p><code>duration</code> -
(Required)
Specifies duration of the window in seconds with up to nine fractional digits,
terminated by 's'. Example: "3.5s". Restrictions for duration based on the
recurrence type to allow some time for backup to happen:</p>

<ul>
<li>single_occurrence_date:  no restriction</li>
<li>daily window: duration &lt; 24 hours</li>
<li>weekly window:
<ul>
<li>days of week includes all seven days of a week: duration &lt; 24 hours</li>
<li>all other weekly window: duration &lt; 168 hours (i.e., 24 * 7 hours)</li>
</ul></li>
</ul></li>
<li><p><code>single_occurrence_date</code> -
(Optional)
No recurrence. The exclusion window occurs only once and on this date in UTC.
Only one of singleOccurrenceDate, daily and daysOfWeek may be set.
Structure is <a href="#nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_single_occurrence_date">documented below</a>.</p></li>
<li><p><code>daily</code> -
(Optional)
The exclusion window occurs every day if set to "True".
Specifying this field to "False" is an error.
Only one of singleOccurrenceDate, daily and daysOfWeek may be set.</p></li>
<li><p><code>days_of_week</code> -
(Optional)
The exclusion window occurs on these days of each week in UTC.
Only one of singleOccurrenceDate, daily and daysOfWeek may be set.
Structure is <a href="#nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_days_of_week">documented below</a>.</p></li>
</ul>

<p><a name="nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_start_time"></a>The <code>start_time</code> block supports:</p>

<ul>
<li><p><code>hours</code> -
(Optional)
Hours of day in 24 hour format.</p></li>
<li><p><code>minutes</code> -
(Optional)
Minutes of hour of day.</p></li>
<li><p><code>seconds</code> -
(Optional)
Seconds of minutes of the time.</p></li>
<li><p><code>nanos</code> -
(Optional)
Fractions of seconds in nanoseconds.</p></li>
</ul>

<p><a name="nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_single_occurrence_date"></a>The <code>single_occurrence_date</code> block supports:</p>

<ul>
<li><p><code>year</code> -
(Optional)
Year of the date.</p></li>
<li><p><code>month</code> -
(Optional)
Month of a year.</p></li>
<li><p><code>day</code> -
(Optional)
Day of a month.</p></li>
</ul>

<p><a name="nested_backup_schedule_rpo_config_exclusion_windows_exclusion_windows_days_of_week"></a>The <code>days_of_week</code> block supports:</p>

<ul>
<li><code>days_of_week</code> -
(Optional)
A list of days of week.
Each value may be one of: <code>MONDAY</code>, <code>TUESDAY</code>, <code>WEDNESDAY</code>, <code>THURSDAY</code>, <code>FRIDAY</code>, <code>SATURDAY</code>, <code>SUNDAY</code>.</li>
</ul>

<p><a name="nested_backup_config"></a>The <code>backup_config</code> block supports:</p>

<ul>
<li><p><code>include_volume_data</code> -
(Optional)
This flag specifies whether volume data should be backed up when PVCs are
included in the scope of a Backup.</p></li>
<li><p><code>include_secrets</code> -
(Optional)
This flag specifies whether Kubernetes Secret resources should be included
when they fall into the scope of Backups.</p></li>
<li><p><code>encryption_key</code> -
(Optional)
This defines a customer managed encryption key that will be used to encrypt the "config"
portion (the Kubernetes resources) of Backups created via this plan.
Structure is <a href="#nested_backup_config_encryption_key">documented below</a>.</p></li>
<li><p><code>all_namespaces</code> -
(Optional)
If True, include all namespaced resources.</p></li>
<li><p><code>selected_namespaces</code> -
(Optional)
If set, include just the resources in the listed namespaces.
Structure is <a href="#nested_backup_config_selected_namespaces">documented below</a>.</p></li>
<li><p><code>selected_applications</code> -
(Optional)
A list of namespaced Kubernetes Resources.
Structure is <a href="#nested_backup_config_selected_applications">documented below</a>.</p></li>
<li><p><code>permissive_mode</code> -
(Optional)
This flag specifies whether Backups will not fail when
Backup for GKE detects Kubernetes configuration that is
non-standard or requires additional setup to restore.</p></li>
</ul>

<p><a name="nested_backup_config_encryption_key"></a>The <code>encryption_key</code> block supports:</p>

<ul>
<li><code>gcp_kms_encryption_key</code> -
(Required)
Google Cloud KMS encryption key. Format: projects/<em>/locations/</em>/keyRings/<em>/cryptoKeys/</em></li>
</ul>

<p><a name="nested_backup_config_selected_namespaces"></a>The <code>selected_namespaces</code> block supports:</p>

<ul>
<li><code>namespaces</code> -
(Required)
A list of Kubernetes Namespaces.</li>
</ul>

<p><a name="nested_backup_config_selected_applications"></a>The <code>selected_applications</code> block supports:</p>

<ul>
<li><code>namespaced_names</code> -
(Required)
A list of namespaced Kubernetes resources.
Structure is <a href="#nested_backup_config_selected_applications_namespaced_names">documented below</a>.</li>
</ul>

<p><a name="nested_backup_config_selected_applications_namespaced_names"></a>The <code>namespaced_names</code> block supports:</p>

<ul>
<li><p><code>namespace</code> -
(Required)
The namespace of a Kubernetes Resource.</p></li>
<li><p><code>name</code> -
(Required)
The name of a Kubernetes Resource.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/locations/{{location}}/backupPlans/{{name}}</code></p></li>
<li><p><code>uid</code> -
Server generated, unique identifier of UUID format.</p></li>
<li><p><code>etag</code> -
etag is used for optimistic concurrency control as a way to help prevent simultaneous
updates of a backup plan from overwriting each other. It is strongly suggested that
systems make use of the 'etag' in the read-modify-write cycle to perform BackupPlan updates
in order to avoid race conditions: An etag is returned in the response to backupPlans.get,
and systems are expected to put that etag in the request to backupPlans.patch or
backupPlans.delete to ensure that their change will be applied to the same version of the resource.</p></li>
<li><p><code>protected_pod_count</code> -
The number of Kubernetes Pods backed up in the last successful Backup created via this BackupPlan.</p></li>
<li><p><code>state</code> -
The State of the BackupPlan.</p></li>
<li><p><code>state_reason</code> -
Detailed description of why BackupPlan is in its current state.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>BackupPlan can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/locations/{{location}}/backupPlans/{{name}}</code></li>
<li><code>{{project}}/{{location}}/{{name}}</code></li>
<li><code>{{location}}/{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import BackupPlan using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/locations/{{location}}/backupPlans/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, BackupPlan can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_gke_backup_backup_plan.default projects/{{project}}/locations/{{location}}/backupPlans/{{name}}
$ terraform import google_gke_backup_backup_plan.default {{project}}/{{location}}/{{name}}
$ terraform import google_gke_backup_backup_plan.default {{location}}/{{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
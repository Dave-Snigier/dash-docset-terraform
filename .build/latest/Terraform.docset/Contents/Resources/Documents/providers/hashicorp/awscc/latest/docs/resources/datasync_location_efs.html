<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/datasync_location_efs --><head>
                <title>awscc_datasync_location_efs</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_datasync_location_efs-resource">awscc_datasync_location_efs (Resource)</h1>

<p>Resource schema for AWS::DataSync::LocationEFS.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/DataSync%20EFS%20Location%20with%20TLS%20Encryption"></a><h3 id="datasync-efs-location-with-tls-encryption">DataSync EFS Location with TLS Encryption</h3>

<p>Create a DataSync location for an EFS file system with TLS 1.2 encryption, including all necessary networking components (VPC, subnet, security group) and IAM role for secure access.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS account ID and region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Create VPC and Subnet</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_ec2_vpc"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.0.0.0/16"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Name"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DataSync-EFS-Example"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_ec2_subnet"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_ec2_vpc.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.0.1.0/24"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Name"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DataSync-EFS-Example"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Security Group for EFS</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_ec2_security_group"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">group_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"datasync-efs-sg"</span><span class="w"></span>
<span class="w">  </span><span class="na">group_description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Security group for EFS mount target"</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_ec2_vpc.example.id</span><span class="w"></span>

<span class="w">  </span><span class="na">security_group_ingress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">ip_protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w"></span>
<span class="w">      </span><span class="na">from_port</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">2049</span><span class="w"></span>
<span class="w">      </span><span class="na">to_port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2049</span><span class="w"></span>
<span class="w">      </span><span class="na">cidr_ip</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.0.0.0/16"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Name"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DataSync-EFS-Example"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create EFS File System</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_efs_file_system"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">encrypted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create EFS Mount Target</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_efs_mount_target"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">file_system_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_efs_file_system.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">subnet_id</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_ec2_subnet.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">awscc_ec2_security_group.example.id</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># IAM role for DataSync</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"assume_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"sts:AssumeRole"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="nb">principals</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Service"</span><span class="w"></span>
<span class="w">      </span><span class="na">identifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"datasync.amazonaws.com"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create IAM role</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"datasync"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="nv">data.aws_iam_policy_document.assume_role.json</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"Role for DataSync to access EFS"</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"DataSyncEFSRole"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create DataSync Location EFS</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_datasync_location_efs"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">ec_2_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">security_group_arns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arn:aws:ec2:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:security-group/${awscc_ec2_security_group.example.id}"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">subnet_arn</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:ec2:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:subnet/${awscc_ec2_subnet.example.id}"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">efs_filesystem_arn</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_efs_file_system.example.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">file_system_access_role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.datasync.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">subdirectory</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"/example"</span><span class="w"></span>
<span class="w">  </span><span class="na">in_transit_encryption</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"TLS1_2"</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>ec_2_config</code> (Attributes) The subnet and security group that DataSync uses to access target EFS file system. (see <a href="#nestedatt--ec_2_config">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>access_point_arn</code> (String) The Amazon Resource Name (ARN) for the Amazon EFS Access point that DataSync uses when accessing the EFS file system.</li>
<li><code>efs_filesystem_arn</code> (String) The Amazon Resource Name (ARN) for the Amazon EFS file system.</li>
<li><code>file_system_access_role_arn</code> (String) The Amazon Resource Name (ARN) of the AWS IAM role that the DataSync will assume when mounting the EFS file system.</li>
<li><code>in_transit_encryption</code> (String) Protocol that is used for encrypting the traffic exchanged between the DataSync Agent and the EFS file system.</li>
<li><code>subdirectory</code> (String) A subdirectory in the location's path. This subdirectory in the EFS file system is used to read data from the EFS source location or write data to the EFS destination.</li>
<li><code>tags</code> (Attributes Set) An array of key-value pairs to apply to this resource. (see <a href="#nestedatt--tags">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
<li><code>location_arn</code> (String) The Amazon Resource Name (ARN) of the Amazon EFS file system location that is created.</li>
<li><code>location_uri</code> (String) The URL of the EFS location that was described.</li>
</ul>

<p><a id="nestedatt--ec_2_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20ec_2_config"></a><h3 id="nested-schema-for-ec_2_config">Nested Schema for <code>ec_2_config</code></h3>

<p>Required:</p>

<ul>
<li><code>security_group_arns</code> (List of String) The Amazon Resource Names (ARNs) of the security groups that are configured for the Amazon EC2 resource.</li>
<li><code>subnet_arn</code> (String) The ARN of the subnet that DataSync uses to access the target EFS file system.</li>
</ul>

<p><a id="nestedatt--tags"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20tags"></a><h3 id="nested-schema-for-tags">Nested Schema for <code>tags</code></h3>

<p>Optional:</p>

<ul>
<li><code>key</code> (String) The key for an AWS resource tag.</li>
<li><code>value</code> (String) The value for an AWS resource tag.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_datasync_location_efs.example <span class="s2">"location_arn"</span>
</code></pre></div>

            
        
    </body></html>
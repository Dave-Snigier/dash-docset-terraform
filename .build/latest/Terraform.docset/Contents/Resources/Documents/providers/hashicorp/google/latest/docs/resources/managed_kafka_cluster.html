<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/managed_kafka_cluster --><head>
                <title>google_managed_kafka_cluster</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_managed_kafka_cluster">google_managed_kafka_cluster</h1>

<p>A Managed Service for Apache Kafka cluster. Apache Kafka is a trademark owned by the Apache Software Foundation.</p>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=managedkafka_cluster_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Managedkafka%20Cluster%20Basic"></a><h2 id="example-usage-managedkafka-cluster-basic">Example Usage - Managedkafka Cluster Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_managed_kafka_cluster"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">capacity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">vcpu_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">    </span><span class="na">memory_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3221225472</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">gcp_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">access_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">network_configs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">subnet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/${data.google_project.project.number}/regions/us-central1/subnetworks/default"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">rebalance_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"NO_REBALANCE"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"value"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"google_project"</span><span class="w"> </span><span class="nv">"project"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=managedkafka_cluster_cmek&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Managedkafka%20Cluster%20Cmek"></a><h2 id="example-usage-managedkafka-cluster-cmek">Example Usage - Managedkafka Cluster Cmek</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_managed_kafka_cluster"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">capacity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">vcpu_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">    </span><span class="na">memory_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3221225472</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">gcp_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">access_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">network_configs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">subnet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/${data.google_project.project.number}/regions/us-central1/subnetworks/default"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">kms_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_kms_crypto_key.key.id</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_project_service_identity"</span><span class="w"> </span><span class="nv">"kafka_service_identity"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">data.google_project.project.project_id</span><span class="w"></span>
<span class="w">  </span><span class="na">service</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"managedkafka.googleapis.com"</span><span class="w"></span>

<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_kms_crypto_key"</span><span class="w"> </span><span class="nv">"key"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-key"</span><span class="w"></span>
<span class="w">  </span><span class="na">key_ring</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_kms_key_ring.key_ring.id</span><span class="w"></span>

<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_kms_key_ring"</span><span class="w"> </span><span class="nv">"key_ring"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-key-ring"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_kms_crypto_key_iam_binding"</span><span class="w"> </span><span class="nv">"crypto_key_binding"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">crypto_key_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_kms_crypto_key.key.id</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"roles/cloudkms.cryptoKeyEncrypterDecrypter"</span><span class="w"></span>

<span class="w">  </span><span class="na">members</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">"serviceAccount:service-${data.google_project.project.number}@gcp-sa-managedkafka.iam.gserviceaccount.com"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"google_project"</span><span class="w"> </span><span class="nv">"project"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>gcp_config</code> -
(Required)
Configuration properties for a Kafka cluster deployed to Google Cloud Platform.
Structure is <a href="#nested_gcp_config">documented below</a>.</p></li>
<li><p><code>capacity_config</code> -
(Required)
A capacity configuration of a Kafka cluster.
Structure is <a href="#nested_capacity_config">documented below</a>.</p></li>
<li><p><code>location</code> -
(Required)
ID of the location of the Kafka resource. See https://cloud.google.com/managed-kafka/docs/locations for a list of supported locations.</p></li>
<li><p><code>cluster_id</code> -
(Required)
The ID to use for the cluster, which will become the final component of the cluster's name. The ID must be 1-63 characters long, and match the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> to comply with RFC 1035. This value is structured like: <code>my-cluster-id</code>.</p></li>
</ul>

<p><a name="nested_gcp_config"></a>The <code>gcp_config</code> block supports:</p>

<ul>
<li><p><code>access_config</code> -
(Required)
The configuration of access to the Kafka cluster.
Structure is <a href="#nested_gcp_config_access_config">documented below</a>.</p></li>
<li><p><code>kms_key</code> -
(Optional)
The Cloud KMS Key name to use for encryption. The key must be located in the same region as the cluster and cannot be changed. Must be in the format <code>projects/PROJECT_ID/locations/LOCATION/keyRings/KEY_RING/cryptoKeys/KEY</code>.</p></li>
</ul>

<p><a name="nested_gcp_config_access_config"></a>The <code>access_config</code> block supports:</p>

<ul>
<li><code>network_configs</code> -
(Required)
Virtual Private Cloud (VPC) subnets where IP addresses for the Kafka cluster are allocated. To make the cluster available in a VPC, you must specify at least one subnet per network. You must specify between 1 and 10 subnets. Additional subnets may be specified with additional <code>network_configs</code> blocks.
Structure is <a href="#nested_gcp_config_access_config_network_configs">documented below</a>.</li>
</ul>

<p><a name="nested_gcp_config_access_config_network_configs"></a>The <code>network_configs</code> block supports:</p>

<ul>
<li><code>subnet</code> -
(Required)
Name of the VPC subnet from which the cluster is accessible. Both broker and bootstrap server IP addresses and DNS entries are automatically created in the subnet. The subnet must be located in the same region as the cluster. The project may differ. The name of the subnet must be in the format <code>projects/PROJECT_ID/regions/REGION/subnetworks/SUBNET</code>.</li>
</ul>

<p><a name="nested_capacity_config"></a>The <code>capacity_config</code> block supports:</p>

<ul>
<li><p><code>vcpu_count</code> -
(Required)
The number of vCPUs to provision for the cluster. The minimum is 3.</p></li>
<li><p><code>memory_bytes</code> -
(Required)
The memory to provision for the cluster in bytes. The value must be between 1 GiB and 8 GiB per vCPU. Ex. 1024Mi, 4Gi.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>labels</code> -
(Optional)
List of label KEY=VALUE pairs to add. Keys must start with a lowercase character and contain only hyphens (-), underscores ( ), lowercase characters, and numbers. Values must contain only hyphens (-), underscores ( ), lowercase characters, and numbers.
<strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>rebalance_config</code> -
(Optional)
Defines rebalancing behavior of a Kafka cluster.
Structure is <a href="#nested_rebalance_config">documented below</a>.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_rebalance_config"></a>The <code>rebalance_config</code> block supports:</p>

<ul>
<li><code>mode</code> -
(Optional)
The rebalance behavior for the cluster. When not specified, defaults to <code>NO_REBALANCE</code>. Possible values: <code>MODE_UNSPECIFIED</code>, <code>NO_REBALANCE</code>, <code>AUTO_REBALANCE_ON_SCALE_UP</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/locations/{{location}}/clusters/{{cluster_id}}</code></p></li>
<li><p><code>name</code> -
The name of the cluster. Structured like: <code>projects/PROJECT_ID/locations/LOCATION/clusters/CLUSTER_ID</code>.</p></li>
<li><p><code>create_time</code> -
The time when the cluster was created.</p></li>
<li><p><code>update_time</code> -
The time when the cluster was last updated.</p></li>
<li><p><code>state</code> -
The current state of the cluster. Possible values: <code>STATE_UNSPECIFIED</code>, <code>CREATING</code>, <code>ACTIVE</code>, <code>DELETING</code>.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 60 minutes.</li>
<li><code>update</code> - Default is 30 minutes.</li>
<li><code>delete</code> - Default is 30 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Cluster can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/locations/{{location}}/clusters/{{cluster_id}}</code></li>
<li><code>{{project}}/{{location}}/{{cluster_id}}</code></li>
<li><code>{{location}}/{{cluster_id}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import Cluster using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/locations/{{location}}/clusters/{{cluster_id}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_managed_kafka_cluster.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, Cluster can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_managed_kafka_cluster.default projects/{{project}}/locations/{{location}}/clusters/{{cluster_id}}
$ terraform import google_managed_kafka_cluster.default {{project}}/{{location}}/{{cluster_id}}
$ terraform import google_managed_kafka_cluster.default {{location}}/{{cluster_id}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
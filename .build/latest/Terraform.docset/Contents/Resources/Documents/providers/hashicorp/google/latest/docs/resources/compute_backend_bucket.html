<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_backend_bucket --><head>
                <title>google_compute_backend_bucket</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_compute_backend_bucket">google_compute_backend_bucket</h1>

<p>Backend buckets allow you to use Google Cloud Storage buckets with HTTP(S)
load balancing.</p>

<p>An HTTP(S) load balancer can direct traffic to specified URLs to a
backend bucket rather than a backend service. It can send requests for
static content to a Cloud Storage bucket and requests for dynamic content
to a virtual machine instance.</p>

<p>To get more information about BackendBucket, see:</p>

<ul>
<li><a href="https://cloud.google.com/compute/docs/reference/v1/backendBuckets">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/compute/docs/load-balancing/http/backend-bucket">Using a Cloud Storage bucket as a load balancer backend</a></li>
</ul></li>
</ul>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=backend_bucket_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Backend%20Bucket%20Basic"></a><h2 id="example-usage-backend-bucket-basic">Example Usage - Backend Bucket Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_backend_bucket"</span><span class="w"> </span><span class="nv">"image_backend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Contains beautiful images"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.image_bucket.name</span><span class="w"></span>
<span class="w">  </span><span class="na">enable_cdn</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"image_bucket"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-store-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"EU"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=backend_bucket_security_policy&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Backend%20Bucket%20Security%20Policy"></a><h2 id="example-usage-backend-bucket-security-policy">Example Usage - Backend Bucket Security Policy</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_backend_bucket"</span><span class="w"> </span><span class="nv">"image_backend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Contains beautiful images"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.image_backend.name</span><span class="w"></span>
<span class="w">  </span><span class="na">enable_cdn</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">edge_security_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_security_policy.policy.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"image_backend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-store-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"EU"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_security_policy"</span><span class="w"> </span><span class="nv">"policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-store-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"basic security policy"</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CLOUD_ARMOR_EDGE"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=backend_bucket_query_string_whitelist&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Backend%20Bucket%20Query%20String%20Whitelist"></a><h2 id="example-usage-backend-bucket-query-string-whitelist">Example Usage - Backend Bucket Query String Whitelist</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_backend_bucket"</span><span class="w"> </span><span class="nv">"image_backend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Contains beautiful images"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.image_bucket.name</span><span class="w"></span>
<span class="w">  </span><span class="na">enable_cdn</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="nb">cdn_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">cache_key_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">query_string_whitelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"image-version"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"image_bucket"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"EU"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=backend_bucket_include_http_headers&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Backend%20Bucket%20Include%20Http%20Headers"></a><h2 id="example-usage-backend-bucket-include-http-headers">Example Usage - Backend Bucket Include Http Headers</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_backend_bucket"</span><span class="w"> </span><span class="nv">"image_backend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Contains beautiful images"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.image_bucket.name</span><span class="w"></span>
<span class="w">  </span><span class="na">enable_cdn</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="nb">cdn_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">cache_key_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">include_http_headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"X-My-Header-Field"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"image_bucket"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"image-backend-bucket"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"EU"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>bucket_name</code> -
(Required)
Cloud Storage bucket name.</p></li>
<li><p><code>name</code> -
(Required)
Name of the resource. Provided by the client when the resource is
created. The name must be 1-63 characters long, and comply with
RFC1035.  Specifically, the name must be 1-63 characters long and
match the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means
the first character must be a lowercase letter, and all following
characters must be a dash, lowercase letter, or digit, except the
last character, which cannot be a dash.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>cdn_policy</code> -
(Optional)
Cloud CDN configuration for this Backend Bucket.
Structure is <a href="#nested_cdn_policy">documented below</a>.</p></li>
<li><p><code>compression_mode</code> -
(Optional)
Compress text responses using Brotli or gzip compression, based on the client's Accept-Encoding header.
Possible values are: <code>AUTOMATIC</code>, <code>DISABLED</code>.</p></li>
<li><p><code>edge_security_policy</code> -
(Optional)
The security policy associated with this backend bucket.</p></li>
<li><p><code>custom_response_headers</code> -
(Optional)
Headers that the HTTP/S load balancer should add to proxied responses.</p></li>
<li><p><code>description</code> -
(Optional)
An optional textual description of the resource; provided by the
client when the resource is created.</p></li>
<li><p><code>enable_cdn</code> -
(Optional)
If true, enable Cloud CDN for this BackendBucket.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_cdn_policy"></a>The <code>cdn_policy</code> block supports:</p>

<ul>
<li><p><code>cache_key_policy</code> -
(Optional)
The CacheKeyPolicy for this CdnPolicy.
Structure is <a href="#nested_cdn_policy_cache_key_policy">documented below</a>.</p></li>
<li><p><code>signed_url_cache_max_age_sec</code> -
(Optional)
Maximum number of seconds the response to a signed URL request will
be considered fresh. After this time period,
the response will be revalidated before being served.
When serving responses to signed URL requests,
Cloud CDN will internally behave as though
all responses from this backend had a "Cache-Control: public,
max-age=[TTL]" header, regardless of any existing Cache-Control
header. The actual headers served in responses will not be altered.</p></li>
<li><p><code>default_ttl</code> -
(Optional)
Specifies the default TTL for cached content served by this origin for responses
that do not have an existing valid TTL (max-age or s-max-age).</p></li>
<li><p><code>max_ttl</code> -
(Optional)
Specifies the maximum allowed TTL for cached content served by this origin.</p></li>
<li><p><code>client_ttl</code> -
(Optional)
Specifies the maximum allowed TTL for cached content served by this origin.</p></li>
<li><p><code>negative_caching</code> -
(Optional)
Negative caching allows per-status code TTLs to be set, in order to apply fine-grained caching for common errors or redirects.</p></li>
<li><p><code>negative_caching_policy</code> -
(Optional)
Sets a cache TTL for the specified HTTP status code. negativeCaching must be enabled to configure negativeCachingPolicy.
Omitting the policy and leaving negativeCaching enabled will use Cloud CDN's default cache TTLs.
Structure is <a href="#nested_cdn_policy_negative_caching_policy">documented below</a>.</p></li>
<li><p><code>cache_mode</code> -
(Optional)
Specifies the cache setting for all responses from this backend.
The possible values are: USE_ORIGIN_HEADERS, FORCE_CACHE_ALL and CACHE_ALL_STATIC
Possible values are: <code>USE_ORIGIN_HEADERS</code>, <code>FORCE_CACHE_ALL</code>, <code>CACHE_ALL_STATIC</code>.</p></li>
<li><p><code>serve_while_stale</code> -
(Optional)
Serve existing content from the cache (if available) when revalidating content with the origin, or when an error is encountered when refreshing the cache.</p></li>
<li><p><code>request_coalescing</code> -
(Optional)
If true then Cloud CDN will combine multiple concurrent cache fill requests into a small number of requests to the origin.</p></li>
<li><p><code>bypass_cache_on_request_headers</code> -
(Optional)
Bypass the cache when the specified request headers are matched - e.g. Pragma or Authorization headers. Up to 5 headers can be specified. The cache is bypassed for all cdnPolicy.cacheMode settings.
Structure is <a href="#nested_cdn_policy_bypass_cache_on_request_headers">documented below</a>.</p></li>
</ul>

<p><a name="nested_cdn_policy_cache_key_policy"></a>The <code>cache_key_policy</code> block supports:</p>

<ul>
<li><p><code>query_string_whitelist</code> -
(Optional)
Names of query string parameters to include in cache keys.
Default parameters are always included. '&amp;' and '=' will
be percent encoded and not treated as delimiters.</p></li>
<li><p><code>include_http_headers</code> -
(Optional)
Allows HTTP request headers (by name) to be used in the
cache key.</p></li>
</ul>

<p><a name="nested_cdn_policy_negative_caching_policy"></a>The <code>negative_caching_policy</code> block supports:</p>

<ul>
<li><p><code>code</code> -
(Optional)
The HTTP status code to define a TTL against. Only HTTP status codes 300, 301, 308, 404, 405, 410, 421, 451 and 501
can be specified as values, and you cannot specify a status code more than once.</p></li>
<li><p><code>ttl</code> -
(Optional)
The TTL (in seconds) for which to cache responses with the corresponding status code. The maximum allowed value is 1800s
(30 minutes), noting that infrequently accessed objects may be evicted from the cache before the defined TTL.</p></li>
</ul>

<p><a name="nested_cdn_policy_bypass_cache_on_request_headers"></a>The <code>bypass_cache_on_request_headers</code> block supports:</p>

<ul>
<li><code>header_name</code> -
(Optional)
The header field name to match on when bypassing cache. Values are case-insensitive.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/global/backendBuckets/{{name}}</code></p></li>
<li><p><code>creation_timestamp</code> -
Creation timestamp in RFC3339 text format.</p></li>
<li><code>self_link</code> - The URI of the created resource.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>BackendBucket can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/global/backendBuckets/{{name}}</code></li>
<li><code>{{project}}/{{name}}</code></li>
<li><code>{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import BackendBucket using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/global/backendBuckets/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_backend_bucket.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, BackendBucket can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_compute_backend_bucket.default projects/{{project}}/global/backendBuckets/{{name}}
$ terraform import google_compute_backend_bucket.default {{project}}/{{name}}
$ terraform import google_compute_backend_bucket.default {{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
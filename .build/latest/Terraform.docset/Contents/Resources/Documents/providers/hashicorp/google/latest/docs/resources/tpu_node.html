<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/tpu_node --><head>
                <title>google_tpu_node</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_tpu_node">google_tpu_node</h1>

<p>A Cloud TPU instance.</p>

<p>To get more information about Node, see:</p>

<ul>
<li><a href="https://cloud.google.com/tpu/docs/reference/rest/v1/projects.locations.nodes">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/tpu/docs/">Official Documentation</a></li>
</ul></li>
</ul>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=tpu_node_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Tpu%20Node%20Basic"></a><h2 id="example-usage-tpu-node-basic">Example Usage - Tpu Node Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"google_tpu_tensorflow_versions"</span><span class="w"> </span><span class="nv">"available"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_tpu_node"</span><span class="w"> </span><span class="nv">"tpu"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-tpu"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-b"</span><span class="w"></span>

<span class="w">  </span><span class="na">accelerator_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"v3-8"</span><span class="w"></span>
<span class="w">  </span><span class="na">tensorflow_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.google_tpu_tensorflow_versions.available.versions[0</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.2.0.0/29"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Tpu%20Node%20Full"></a><h2 id="example-usage-tpu-node-full">Example Usage - Tpu Node Full</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"google_tpu_tensorflow_versions"</span><span class="w"> </span><span class="nv">"available"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_tpu_node"</span><span class="w"> </span><span class="nv">"tpu"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-tpu"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-b"</span><span class="w"></span>

<span class="w">  </span><span class="na">accelerator_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"v3-8"</span><span class="w"></span>

<span class="w">  </span><span class="na">tensorflow_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.google_tpu_tensorflow_versions.available.versions[0</span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Terraform Google Provider test TPU"</span><span class="w"></span>
<span class="w">  </span><span class="na">use_service_networking</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="na">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_service_networking_connection.private_service_connection.network</span><span class="w"></span>

<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">scheduling_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">preemptible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_network"</span><span class="w"> </span><span class="nv">"network"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tpu-node-network"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_global_address"</span><span class="w"> </span><span class="nv">"service_range"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-global-address"</span><span class="w"></span>
<span class="w">  </span><span class="na">purpose</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"VPC_PEERING"</span><span class="w"></span>
<span class="w">  </span><span class="na">address_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"INTERNAL"</span><span class="w"></span>
<span class="w">  </span><span class="na">prefix_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_service_networking_connection"</span><span class="w"> </span><span class="nv">"private_service_connection"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.network.id</span><span class="w"></span>
<span class="w">  </span><span class="na">service</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"servicenetworking.googleapis.com"</span><span class="w"></span>
<span class="w">  </span><span class="na">reserved_peering_ranges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">google_compute_global_address.service_range.name</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>name</code> -
(Required)
The immutable name of the TPU.</p></li>
<li><p><code>accelerator_type</code> -
(Required)
The type of hardware accelerators associated with this node.</p></li>
<li><p><code>tensorflow_version</code> -
(Required)
The version of Tensorflow running in the Node.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> -
(Optional)
The user-supplied description of the TPU. Maximum of 512 characters.</p></li>
<li><p><code>network</code> -
(Optional)
The name of a network to peer the TPU node to. It must be a
preexisting Compute Engine network inside of the project on which
this API has been activated. If none is provided, "default" will be
used.</p></li>
<li><p><code>cidr_block</code> -
(Optional)
The CIDR block that the TPU node will use when selecting an IP
address. This CIDR block must be a /29 block; the Compute Engine
networks API forbids a smaller block, and using a larger block would
be wasteful (a node can only consume one IP address).
Errors will occur if the CIDR block has already been used for a
currently existing TPU node, the CIDR block conflicts with any
subnetworks in the user's provided network, or the provided network
is peered with another network that is using that CIDR block.</p></li>
<li><p><code>use_service_networking</code> -
(Optional)
Whether the VPC peering for the node is set up through Service Networking API.
The VPC Peering should be set up before provisioning the node. If this field is set,
cidr_block field should not be specified. If the network that you want to peer the
TPU Node to is a Shared VPC network, the node must be created with this this field enabled.</p></li>
<li><p><code>scheduling_config</code> -
(Optional)
Sets the scheduling options for this TPU instance.
Structure is <a href="#nested_scheduling_config">documented below</a>.</p></li>
<li><p><code>labels</code> -
(Optional)
Resource labels to represent user provided metadata.
<strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>zone</code> -
(Optional)
The GCP location for the TPU. If it is not provided, the provider zone is used.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_scheduling_config"></a>The <code>scheduling_config</code> block supports:</p>

<ul>
<li><code>preemptible</code> -
(Required)
Defines whether the TPU instance is preemptible.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/locations/{{zone}}/nodes/{{name}}</code></p></li>
<li><p><code>service_account</code> -
The service account used to run the tensor flow services within the
node. To share resources, including Google Cloud Storage data, with
the Tensorflow job running in the Node, this account must have
permissions to that data.</p></li>
<li><p><code>network_endpoints</code> -
The network endpoints where TPU workers can be accessed and sent work.
It is recommended that Tensorflow clients of the node first reach out
to the first (index 0) entry.
Structure is <a href="#nested_network_endpoints">documented below</a>.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
</ul>

<p><a name="nested_network_endpoints"></a>The <code>network_endpoints</code> block contains:</p>

<ul>
<li><p><code>ip_address</code> -
(Output)
The IP address of this network endpoint.</p></li>
<li><p><code>port</code> -
(Output)
The port of this network endpoint.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Node can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/locations/{{zone}}/nodes/{{name}}</code></li>
<li><code>{{project}}/{{zone}}/{{name}}</code></li>
<li><code>{{zone}}/{{name}}</code></li>
<li><code>{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import Node using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/locations/{{zone}}/nodes/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_tpu_node.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, Node can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_tpu_node.default projects/{{project}}/locations/{{zone}}/nodes/{{name}}
$ terraform import google_tpu_node.default {{project}}/{{zone}}/{{name}}
$ terraform import google_tpu_node.default {{zone}}/{{name}}
$ terraform import google_tpu_node.default {{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
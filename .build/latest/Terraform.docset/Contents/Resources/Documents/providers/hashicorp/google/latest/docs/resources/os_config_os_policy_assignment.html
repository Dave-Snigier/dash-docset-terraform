<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/os_config_os_policy_assignment --><head>
                <title>google_os_config_os_policy_assignment</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_os_config_os_policy_assignment">google_os_config_os_policy_assignment</h1>

<p>OS policy assignment is an API resource that is used to apply a set of OS
policies to a dynamically targeted group of Compute Engine VM instances. An OS
policy is used to define the desired state configuration for a Compute Engine VM
instance through a set of configuration resources that provide capabilities such
as installing or removing software packages, or executing a script. For more
information about the OS policy resource definitions and examples, see
<a href="https://cloud.google.com/compute/docs/os-configuration-management/working-with-os-policies">OS policy and OS policy assignment</a>.</p>

<p>To get more information about OSPolicyAssignment, see:</p>

<ul>
<li><a href="https://cloud.google.com/compute/docs/osconfig/rest/v1/projects.locations.osPolicyAssignments">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/compute/docs/os-configuration-management/create-os-policy-assignment">Official Documentation</a></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Os%20Config%20Os%20Policy%20Assignment%20Basic"></a><h2 id="example-usage-os-config-os-policy-assignment-basic">Example Usage - Os Config Os Policy Assignment Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_os_config_os_policy_assignment"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">instance_filter</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">    </span><span class="nb">exclusion_labels</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">label-two</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"value-two"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">inclusion_labels</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">label-one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"value-one"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">inventories</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">os_short_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"centos"</span><span class="w"></span>
<span class="w">      </span><span class="na">os_version</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"8.*"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-a"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"policy-assignment"</span><span class="w"></span>

<span class="w">  </span><span class="nb">os_policies</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"policy"</span><span class="w"></span>
<span class="w">    </span><span class="na">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"VALIDATION"</span><span class="w"></span>

<span class="w">    </span><span class="nb">resource_groups</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">resources</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"apt-to-yum"</span><span class="w"></span>

<span class="w">        </span><span class="nb">repository</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">apt</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">archive_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DEB"</span><span class="w"></span>
<span class="w">            </span><span class="na">components</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"doc"</span><span class="p">]</span><span class="w"></span>
<span class="w">            </span><span class="na">distribution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"debian"</span><span class="w"></span>
<span class="w">            </span><span class="na">uri</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://atl.mirrors.clouvider.net/debian"</span><span class="w"></span>
<span class="w">            </span><span class="na">gpg_key</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">".gnupg/pubring.kbx"</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">inventory_filters</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">os_short_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"centos"</span><span class="w"></span>
<span class="w">        </span><span class="na">os_version</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"8.*"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="nb">resources</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"exec1"</span><span class="w"></span>
<span class="w">        </span><span class="nb">exec</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">validate</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">interpreter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SHELL"</span><span class="w"></span>
<span class="w">            </span><span class="na">args</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arg1"</span><span class="p">]</span><span class="w"></span>
<span class="w">            </span><span class="nb">file</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="na">local_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$HOME/script.sh"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="na">output_file_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$HOME/out"</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="nb">enforce</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">interpreter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SHELL"</span><span class="w"></span>
<span class="w">            </span><span class="na">args</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arg1"</span><span class="p">]</span><span class="w"></span>
<span class="w">            </span><span class="nb">file</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="na">allow_insecure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">              </span><span class="nb">remote</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">uri</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://www.example.com/script.sh"</span><span class="w"></span>
<span class="w">                </span><span class="na">sha256_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"c7938fed83afdccbb0e86a2a2e4cad7d5035012ca3214b4a61268393635c3063"</span><span class="w"></span>
<span class="w">              </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="na">output_file_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$HOME/out"</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">allow_no_resource_group_match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">    </span><span class="na">description</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"A test os policy"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">rollout</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">disruption_budget</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="na">min_wait_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"A test os policy assignment"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>name</code> - (Required) Resource name.</p></li>
<li><p><code>os_policies</code> - (Required) List of OS policies to be applied to the VMs.
Structure is <a href="#nested_os_policies">documented below</a>.</p></li>
<li><p><code>instance_filter</code> - (Required) Filter to select VMs. Structure is
<a href="#nested_instance_filter">documented below</a>.</p></li>
<li><p><code>rollout</code> - (Required) Rollout to deploy the OS policy assignment. A rollout
is triggered in the following situations: 1) OSPolicyAssignment is created.
2) OSPolicyAssignment is updated and the update contains changes to one of
the following fields: - instance_filter - os_policies 3) OSPolicyAssignment
is deleted. Structure is <a href="#nested_rollout">documented below</a>.</p></li>
<li><p><code>location</code> - (Required) The location for the resource</p></li>
</ul>

<p><a name="nested_os_policies"></a>The <code>os_policies</code> block supports:</p>

<ul>
<li><p><code>id</code> - (Required) The id of the OS policy with the following restrictions:</p>

<ul>
<li>Must contain only lowercase letters, numbers, and hyphens.</li>
<li>Must start with a letter.</li>
<li>Must be between 1-63 characters.</li>
<li>Must end with a number or a letter.</li>
<li>Must be unique within the assignment.</li>
</ul></li>
<li><p><code>description</code> - (Optional) Policy description. Length of the description is
limited to 1024 characters.</p></li>
<li><p><code>mode</code> - (Required) Policy mode Possible values are: <code>MODE_UNSPECIFIED</code>,
<code>VALIDATION</code>, <code>ENFORCEMENT</code>.</p></li>
<li><p><code>resource_groups</code> - (Required) List of resource groups for the policy. For a
particular VM, resource groups are evaluated in the order specified and the
first resource group that is applicable is selected and the rest are
ignored. If none of the resource groups are applicable for a VM, the VM is
considered to be non-compliant w.r.t this policy. This behavior can be
toggled by the flag <code>allow_no_resource_group_match</code> Structure is
<a href="#nested_resource_groups">documented below</a>.</p></li>
<li><p><code>allow_no_resource_group_match</code> - (Optional) This flag determines the OS
policy compliance status when none of the resource groups within the policy
are applicable for a VM. Set this value to <code>true</code> if the policy needs to be
reported as compliant even if the policy has nothing to validate or enforce.</p></li>
</ul>

<p><a name="nested_resource_groups"></a>The <code>resource_groups</code> block supports:</p>

<ul>
<li><p><code>inventory_filters</code> - (Optional) List of inventory filters for the resource
group. The resources in this resource group are applied to the target VM if
it satisfies at least one of the following inventory filters. For example,
to apply this resource group to VMs running either <code>RHEL</code> or <code>CentOS</code>
operating systems, specify 2 items for the list with following values:
inventory_filters[0].os_short_name='rhel' and
inventory_filters[1].os_short_name='centos' If the list is empty, this
resource group will be applied to the target VM unconditionally. Structure
is <a href="#nested_inventory_filters">documented below</a>.</p></li>
<li><p><code>resources</code> - (Required) List of resources configured for this resource
group. The resources are executed in the exact order specified here.
Structure is <a href="#nested_resources">documented below</a>.</p></li>
</ul>

<p><a name="nested_inventory_filters"></a>The <code>inventory_filters</code> block supports:</p>

<ul>
<li><p><code>os_short_name</code> - (Required) The OS short name</p></li>
<li><p><code>os_version</code> - (Optional) The OS version Prefix matches are supported if
asterisk(*) is provided as the last character. For example, to match all
versions with a major version of <code>7</code>, specify the following value for this
field <code>7.*</code> An empty string matches all OS versions.</p></li>
</ul>

<p><a name="nested_resources"></a>The <code>resources</code> block supports:</p>

<ul>
<li><p><code>id</code> - (Required) The id of the resource with the following restrictions:</p>

<ul>
<li>Must contain only lowercase letters, numbers, and hyphens.</li>
<li>Must start with a letter.</li>
<li>Must be between 1-63 characters.</li>
<li>Must end with a number or a letter.</li>
<li>Must be unique within the OS policy.</li>
</ul></li>
<li><p><code>pkg</code> - (Optional) Package resource Structure is
<a href="#nested_pkg">documented below</a>.</p></li>
<li><p><code>repository</code> - (Optional) Package repository resource Structure is
<a href="#nested_repository">documented below</a>.</p></li>
<li><p><code>exec</code> - (Optional) Exec resource Structure is
<a href="#nested_exec">documented below</a>.</p></li>
<li><p><code>file</code> - (Optional) File resource Structure is
<a href="#nested_file">documented below</a>.</p></li>
</ul>

<p><a name="nested_pkg"></a>The <code>pkg</code> block supports:</p>

<ul>
<li><p><code>desired_state</code> - (Required) The desired state the agent should maintain for
this package. Possible values are: <code>DESIRED_STATE_UNSPECIFIED</code>, <code>INSTALLED</code>,
<code>REMOVED</code>.</p></li>
<li><p><code>apt</code> - (Optional) A package managed by Apt. Structure is
<a href="#nested_apt">documented below</a>.</p></li>
<li><p><code>deb</code> - (Optional) A deb package file. Structure is
<a href="#nested_deb">documented below</a>.</p></li>
<li><p><code>yum</code> - (Optional) A package managed by YUM. Structure is
<a href="#nested_yum">documented below</a>.</p></li>
<li><p><code>zypper</code> - (Optional) A package managed by Zypper. Structure is
<a href="#nested_zypper">documented below</a>.</p></li>
<li><p><code>rpm</code> - (Optional) An rpm package file. Structure is
<a href="#nested_rpm">documented below</a>.</p></li>
<li><p><code>googet</code> - (Optional) A package managed by GooGet. Structure is
<a href="#nested_googet">documented below</a>.</p></li>
<li><p><code>msi</code> - (Optional) An MSI package. Structure is
<a href="#nested_msi">documented below</a>.</p></li>
</ul>

<p><a name="nested_apt"></a>The <code>apt</code> block supports:</p>

<ul>
<li><code>name</code> - (Required) Package name.</li>
</ul>

<p><a name="nested_deb"></a>The <code>deb</code> block supports:</p>

<ul>
<li><p><code>source</code> - (Required) A deb package. Structure is
<a href="#nested_source">documented below</a>.</p></li>
<li><p><code>pull_deps</code> - (Optional) Whether dependencies should also be installed. -
install when false: <code>dpkg -i package</code> - install when true: <code>apt-get update
&amp;&amp; apt-get -y install package.deb</code></p></li>
</ul>

<p><a name="nested_source"></a>The <code>source</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_yum"></a>The <code>yum</code> block supports:</p>

<ul>
<li><code>name</code> - (Required) Package name.</li>
</ul>

<p><a name="nested_zypper"></a>The <code>zypper</code> block supports:</p>

<ul>
<li><code>name</code> - (Required) Package name.</li>
</ul>

<p><a name="nested_rpm"></a>The <code>rpm</code> block supports:</p>

<ul>
<li><p><code>source</code> - (Required) An rpm package. Structure is
<a href="#nested_source">documented below</a>.</p></li>
<li><p><code>pull_deps</code> - (Optional) Whether dependencies should also be installed. -
install when false: <code>rpm --upgrade --replacepkgs package.rpm</code> - install when
true: <code>yum -y install package.rpm</code> or <code>zypper -y install package.rpm</code></p></li>
</ul>

<p><a name="nested_source"></a>The <code>source</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_googet"></a>The <code>googet</code> block supports:</p>

<ul>
<li><code>name</code> - (Required) Package name.</li>
</ul>

<p><a name="nested_msi"></a>The <code>msi</code> block supports:</p>

<ul>
<li><p><code>source</code> - (Required) The MSI package. Structure is
<a href="#nested_source">documented below</a>.</p></li>
<li><p><code>properties</code> - (Optional) Additional properties to use during installation.
This should be in the format of Property=Setting. Appended to the defaults
of <code>ACTION=INSTALL REBOOT=ReallySuppress</code>.</p></li>
</ul>

<p><a name="nested_source"></a>The <code>source</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_repository"></a>The <code>repository</code> block supports:</p>

<ul>
<li><p><code>apt</code> - (Optional) An Apt Repository. Structure is
<a href="#nested_apt">documented below</a>.</p></li>
<li><p><code>yum</code> - (Optional) A Yum Repository. Structure is
<a href="#nested_yum">documented below</a>.</p></li>
<li><p><code>zypper</code> - (Optional) A Zypper Repository. Structure is
<a href="#nested_zypper">documented below</a>.</p></li>
<li><p><code>goo</code> - (Optional) A Goo Repository. Structure is
<a href="#nested_goo">documented below</a>.</p></li>
</ul>

<p><a name="nested_apt"></a>The <code>apt</code> block supports:</p>

<ul>
<li><p><code>archive_type</code> - (Required) Type of archive files in this repository.
Possible values are: <code>ARCHIVE_TYPE_UNSPECIFIED</code>, <code>DEB</code>, <code>DEB_SRC</code>.</p></li>
<li><p><code>uri</code> - (Required) URI for this repository.</p></li>
<li><p><code>distribution</code> - (Required) Distribution of this repository.</p></li>
<li><p><code>components</code> - (Required) List of components for this repository. Must
contain at least one item.</p></li>
<li><p><code>gpg_key</code> - (Optional) URI of the key file for this repository. The agent
maintains a keyring at <code>/etc/apt/trusted.gpg.d/osconfig_agent_managed.gpg</code>.</p></li>
</ul>

<p><a name="nested_yum"></a>The <code>yum</code> block supports:</p>

<ul>
<li><p><code>id</code> - (Required) A one word, unique name for this repository. This is the
<code>repo id</code> in the yum config file and also the <code>display_name</code> if
<code>display_name</code> is omitted. This id is also used as the unique identifier
when checking for resource conflicts.</p></li>
<li><p><code>display_name</code> - (Optional) The display name of the repository.</p></li>
<li><p><code>base_url</code> - (Required) The location of the repository directory.</p></li>
<li><p><code>gpg_keys</code> - (Optional) URIs of GPG keys.</p></li>
</ul>

<p><a name="nested_zypper"></a>The <code>zypper</code> block supports:</p>

<ul>
<li><p><code>id</code> - (Required) A one word, unique name for this repository. This is the
<code>repo id</code> in the zypper config file and also the <code>display_name</code> if
<code>display_name</code> is omitted. This id is also used as the unique identifier
when checking for GuestPolicy conflicts.</p></li>
<li><p><code>display_name</code> - (Optional) The display name of the repository.</p></li>
<li><p><code>base_url</code> - (Required) The location of the repository directory.</p></li>
<li><p><code>gpg_keys</code> - (Optional) URIs of GPG keys.</p></li>
</ul>

<p><a name="nested_goo"></a>The <code>goo</code> block supports:</p>

<ul>
<li><p><code>name</code> - (Required) The name of the repository.</p></li>
<li><p><code>url</code> - (Required) The url of the repository.</p></li>
</ul>

<p><a name="nested_exec"></a>The <code>exec</code> block supports:</p>

<ul>
<li><p><code>validate</code> - (Required) What to run to validate this resource is in the
desired state. An exit code of 100 indicates "in desired state", and exit
code of 101 indicates "not in desired state". Any other exit code indicates
a failure running validate. Structure is
<a href="#nested_validate">documented below</a>.</p></li>
<li><p><code>enforce</code> - (Optional) What to run to bring this resource into the desired
state. An exit code of 100 indicates "success", any other exit code
indicates a failure running enforce. Structure is
<a href="#nested_enforce">documented below</a>.</p></li>
</ul>

<p><a name="nested_validate"></a>The <code>validate</code> block supports:</p>

<ul>
<li><p><code>file</code> - (Optional) A remote or local file. Structure is
<a href="#nested_file">documented below</a>.</p></li>
<li><p><code>script</code> - (Optional) An inline script. The size of the script is limited to
1024 characters.</p></li>
<li><p><code>args</code> - (Optional) Optional arguments to pass to the source during
execution.</p></li>
<li><p><code>interpreter</code> - (Required) The script interpreter to use. Possible values
are: <code>INTERPRETER_UNSPECIFIED</code>, <code>NONE</code>, <code>SHELL</code>, <code>POWERSHELL</code>.</p></li>
<li><p><code>output_file_path</code> - (Optional) Only recorded for enforce Exec. Path to an
output file (that is created by this Exec) whose content will be recorded in
OSPolicyResourceCompliance after a successful run. Absence or failure to
read this file will result in this ExecResource being non-compliant. Output
file size is limited to 100K bytes.</p></li>
</ul>

<p><a name="nested_file"></a>The <code>file</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_enforce"></a>The <code>enforce</code> block supports:</p>

<ul>
<li><p><code>file</code> - (Optional) A remote or local file. Structure is
<a href="#nested_file">documented below</a>.</p></li>
<li><p><code>script</code> - (Optional) An inline script. The size of the script is limited to
1024 characters.</p></li>
<li><p><code>args</code> - (Optional) Optional arguments to pass to the source during
execution.</p></li>
<li><p><code>interpreter</code> - (Required) The script interpreter to use. Possible values
are: <code>INTERPRETER_UNSPECIFIED</code>, <code>NONE</code>, <code>SHELL</code>, <code>POWERSHELL</code>.</p></li>
<li><p><code>output_file_path</code> - (Optional) Only recorded for enforce Exec. Path to an
output file (that is created by this Exec) whose content will be recorded in
OSPolicyResourceCompliance after a successful run. Absence or failure to
read this file will result in this ExecResource being non-compliant. Output
file size is limited to 100K bytes.</p></li>
</ul>

<p><a name="nested_file"></a>The <code>file</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_file"></a>The <code>file</code> block supports:</p>

<ul>
<li><p><code>file</code> - (Optional) A remote or local source. Structure is
<a href="#nested_file">documented below</a>.</p></li>
<li><p><code>content</code> - (Optional) A a file with this content. The size of the content
is limited to 1024 characters.</p></li>
<li><p><code>path</code> - (Required) The absolute path of the file within the VM.</p></li>
<li><p><code>state</code> - (Required) Desired state of the file. Possible values are:
<code>DESIRED_STATE_UNSPECIFIED</code>, <code>PRESENT</code>, <code>ABSENT</code>, <code>CONTENTS_MATCH</code>.</p></li>
<li><p><code>permissions</code> - (Output) Consists of three octal digits which represent, in
order, the permissions of the owner, group, and other users for the file
(similarly to the numeric mode used in the linux chmod utility). Each digit
represents a three bit number with the 4 bit corresponding to the read
permissions, the 2 bit corresponds to the write bit, and the one bit
corresponds to the execute permission. Default behavior is 755. Below are
some examples of permissions and their associated values: read, write, and
execute: 7 read and execute: 5 read and write: 6 read only: 4</p></li>
</ul>

<p><a name="nested_file"></a>The <code>file</code> block supports:</p>

<ul>
<li><p><code>remote</code> - (Optional) A generic remote file. Structure is
<a href="#nested_remote">documented below</a>.</p></li>
<li><p><code>gcs</code> - (Optional) A Cloud Storage object. Structure is
<a href="#nested_gcs">documented below</a>.</p></li>
<li><p><code>local_path</code> - (Optional) A local path within the VM to use.</p></li>
<li><p><code>allow_insecure</code> - (Optional) Defaults to false. When false, files are
subject to validations based on the file type: Remote: A checksum must be
specified. Cloud Storage: An object generation number must be specified.</p></li>
</ul>

<p><a name="nested_remote"></a>The <code>remote</code> block supports:</p>

<ul>
<li><p><code>uri</code> - (Required) URI from which to fetch the object. It should contain
both the protocol and path following the format <code>{protocol}://{location}</code>.</p></li>
<li><p><code>sha256_checksum</code> - (Optional) SHA256 checksum of the remote file.</p></li>
</ul>

<p><a name="nested_gcs"></a>The <code>gcs</code> block supports:</p>

<ul>
<li><p><code>bucket</code> - (Required) Bucket of the Cloud Storage object.</p></li>
<li><p><code>object</code> - (Required) Name of the Cloud Storage object.</p></li>
<li><p><code>generation</code> - (Optional) Generation number of the Cloud Storage object.</p></li>
</ul>

<p><a name="nested_instance_filter"></a>The <code>instance_filter</code> block supports:</p>

<ul>
<li><p><code>all</code> - (Optional) Target all VMs in the project. If true, no other criteria
is permitted.</p></li>
<li><p><code>inclusion_labels</code> - (Optional) List of label sets used for VM inclusion. If
the list has more than one <code>LabelSet</code>, the VM is included if any of the
label sets are applicable for the VM. Structure is
<a href="#nested_inclusion_labels">documented below</a>.</p></li>
<li><p><code>exclusion_labels</code> - (Optional) List of label sets used for VM exclusion. If
the list has more than one label set, the VM is excluded if any of the label
sets are applicable for the VM. Structure is
<a href="#nested_exclusion_labels">documented below</a>.</p></li>
<li><p><code>inventories</code> - (Optional) List of inventories to select VMs. A VM is
selected if its inventory data matches at least one of the following
inventories. Structure is <a href="#nested_inventories">documented below</a>.</p></li>
</ul>

<p><a name="nested_inclusion_labels"></a>The <code>inclusion_labels</code> block supports:</p>

<ul>
<li><code>labels</code> - (Optional) Labels are identified by key/value pairs in this map.
A VM should contain all the key/value pairs specified in this map to be
selected.</li>
</ul>

<p><a name="nested_exclusion_labels"></a>The <code>exclusion_labels</code> block supports:</p>

<ul>
<li><code>labels</code> - (Optional) Labels are identified by key/value pairs in this map.
A VM should contain all the key/value pairs specified in this map to be
selected.</li>
</ul>

<p><a name="nested_inventories"></a>The <code>inventories</code> block supports:</p>

<ul>
<li><p><code>os_short_name</code> - (Required) The OS short name</p></li>
<li><p><code>os_version</code> - (Optional) The OS version Prefix matches are supported if
asterisk(*) is provided as the last character. For example, to match all
versions with a major version of <code>7</code>, specify the following value for this
field <code>7.*</code> An empty string matches all OS versions.</p></li>
</ul>

<p><a name="nested_rollout"></a>The <code>rollout</code> block supports:</p>

<ul>
<li><p><code>disruption_budget</code> - (Required) The maximum number (or percentage) of VMs
per zone to disrupt at any given moment. Structure is
<a href="#nested_disruption_budget">documented below</a>.</p></li>
<li><p><code>min_wait_duration</code> - (Required) This determines the minimum duration of
time to wait after the configuration changes are applied through the current
rollout. A VM continues to count towards the <code>disruption_budget</code> at least
until this duration of time has passed after configuration changes are
applied.</p></li>
</ul>

<p><a name="nested_disruption_budget"></a>The <code>disruption_budget</code> block supports:</p>

<ul>
<li><p><code>fixed</code> - (Optional) Specifies a fixed value.</p></li>
<li><p><code>percent</code> - (Optional) Specifies the relative value defined as a percentage,
which will be multiplied by a reference value.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> - (Optional) OS policy assignment description. Length of the
description is limited to 1024 characters.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
<li><p><code>skip_await_rollout</code> - (Optional) Set to true to skip awaiting rollout
during resource creation and update.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are
exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format
<code>projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}</code></p></li>
<li><p><code>revision_id</code> - Output only. The assignment revision ID A new revision is
committed whenever a rollout is triggered for a OS policy assignment</p></li>
<li><p><code>revision_create_time</code> - Output only. The timestamp that the revision was
created.</p></li>
<li><p><code>etag</code> - The etag for this OS policy assignment. If this is provided on
update, it must match the server's etag.</p></li>
<li><p><code>rollout_state</code> - Output only. OS policy assignment rollout state</p></li>
<li><p><code>baseline</code> - Output only. Indicates that this revision has been successfully
rolled out in this zone and new VMs will be assigned OS policies from this
revision. For a given OS policy assignment, there is only one revision with
a value of <code>true</code> for this field.</p></li>
<li><p><code>deleted</code> - Output only. Indicates that this revision deletes the OS policy
assignment.</p></li>
<li><p><code>reconciling</code> - Output only. Indicates that reconciliation is in progress
for the revision. This value is <code>true</code> when the <code>rollout_state</code> is one of:</p>

<ul>
<li>IN_PROGRESS</li>
<li>CANCELLING</li>
</ul></li>
<li><p><code>uid</code> - Output only. Server generated unique id for the OS policy assignment
resource.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a>
configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>OSPolicyAssignment can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}</code></li>
<li><code>{{project}}/{{location}}/{{name}}</code></li>
<li><code>{{location}}/{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import OSPolicyAssignment using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_os_config_os_policy_assignment.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, OSPolicyAssignment can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_os_config_os_policy_assignment.default projects/{{project}}/locations/{{location}}/osPolicyAssignments/{{name}}
$ terraform import google_os_config_os_policy_assignment.default {{project}}/{{location}}/{{name}}
$ terraform import google_os_config_os_policy_assignment.default {{location}}/{{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports
<a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/sagemaker_image_version --><head>
                <title>awscc_sagemaker_image_version</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_sagemaker_image_version-resource">awscc_sagemaker_image_version (Resource)</h1>

<p>Resource Type definition for AWS::SageMaker::ImageVersion</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/SageMaker%20Image%20Version%20for%20PyTorch%20Training"></a><h3 id="sagemaker-image-version-for-pytorch-training">SageMaker Image Version for PyTorch Training</h3>

<p>Creates a SageMaker image version from a PyTorch GPU training container with associated IAM role and policy for ECR access, supporting multiple aliases and ML framework specifications.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Data sources to get AWS account ID and region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Create IAM role for SageMaker using AWSCC</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"sagemaker_image_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sagemaker-image-role"</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="nb">Principal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">Service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sagemaker.amazonaws.com"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create IAM policy for SageMaker (keeping AWS provider as no AWSCC equivalent)</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_iam_role_policy"</span><span class="w"> </span><span class="nv">"sagemaker_image_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sagemaker-image-policy"</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.sagemaker_image_role.id</span><span class="w"></span>

<span class="w">  </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="s2">"ecr:BatchCheckLayerAvailability"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"ecr:BatchGetImage"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"ecr:GetDownloadUrlForLayer"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"ecr:GetAuthorizationToken"</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">Resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arn:aws:ecr:${data.aws_region.current.name}:763104351884:repository/*"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">},</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="s2">"ecr:GetAuthorizationToken"</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">Resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"*"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># First create a SageMaker Image</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_sagemaker_image"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">image_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-sagemaker-image"</span><span class="w"></span>
<span class="w">  </span><span class="na">image_role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.sagemaker_image_role.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create the Image Version</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_sagemaker_image_version"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">image_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_sagemaker_image.example.image_name</span><span class="w"></span>
<span class="w">  </span><span class="na">base_image</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"763104351884.dkr.ecr.${data.aws_region.current.name}.amazonaws.com/pytorch-training:1.8.1-gpu-py36-cu111-ubuntu18.04"</span><span class="w"></span>
<span class="w">  </span><span class="na">alias</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"v1"</span><span class="w"></span>
<span class="w">  </span><span class="na">aliases</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"latest", "stable"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">horovod</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">job_type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"TRAINING"</span><span class="w"></span>
<span class="w">  </span><span class="na">ml_framework</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"PyTorch1.8"</span><span class="w"></span>
<span class="w">  </span><span class="na">processor</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"GPU"</span><span class="w"></span>
<span class="w">  </span><span class="na">programming_lang</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Python3.6"</span><span class="w"></span>
<span class="w">  </span><span class="na">release_notes</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"PyTorch 1.8.1 training image version"</span><span class="w"></span>
<span class="w">  </span><span class="na">vendor_guidance</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"STABLE"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>base_image</code> (String) The registry path of the container image on which this image version is based.</li>
<li><code>image_name</code> (String) The name of the image this version belongs to.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>alias</code> (String) The alias of the image version.</li>
<li><code>aliases</code> (List of String) List of aliases for the image version.</li>
<li><code>horovod</code> (Boolean) Indicates Horovod compatibility.</li>
<li><code>job_type</code> (String) Indicates SageMaker job type compatibility.</li>
<li><code>ml_framework</code> (String) The machine learning framework vended in the image version.</li>
<li><code>processor</code> (String) Indicates CPU or GPU compatibility.</li>
<li><code>programming_lang</code> (String) The supported programming language and its version.</li>
<li><code>release_notes</code> (String) The maintainer description of the image version.</li>
<li><code>vendor_guidance</code> (String) The availability of the image version specified by the maintainer.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>container_image</code> (String) The registry path of the container image that contains this image version.</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
<li><code>image_arn</code> (String) The Amazon Resource Name (ARN) of the parent image.</li>
<li><code>image_version_arn</code> (String) The Amazon Resource Name (ARN) of the image version.</li>
<li><code>version</code> (Number) The version number of the image version.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_sagemaker_image_version.example <span class="s2">"image_version_arn"</span>
</code></pre></div>

            
        
    </body></html>
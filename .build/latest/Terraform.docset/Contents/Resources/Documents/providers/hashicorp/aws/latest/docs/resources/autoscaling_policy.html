<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/autoscaling_policy --><head>
                <title>aws_autoscaling_policy</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="resource-aws_autoscaling_policy">Resource: aws_autoscaling_policy</h1>

<p>Provides an AutoScaling Scaling Policy resource.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>You may want to omit <code>desired_capacity</code> attribute from attached <code>aws_autoscaling_group</code> when using autoscaling policies. It's good practice to pick either <a href="https://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/as-manual-scaling.html">manual</a> or <a href="https://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/as-scale-based-on-demand.html">dynamic</a> (policy-based) scaling.</p>
</aside>

<blockquote>
  <p><strong>Hands-on:</strong> Try the <a href="https://learn.hashicorp.com/tutorials/terraform/aws-asg?utm_source=WEBSITE&amp;utm_medium=WEB_IO&amp;utm_offer=ARTICLE_PAGE&amp;utm_content=DOCS">Manage AWS Auto Scaling Groups</a> tutorial on HashiCorp Learn.</p>
</blockquote>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"bat"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"foobar3-terraform-test"</span><span class="w"></span>
<span class="w">  </span><span class="na">scaling_adjustment</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="w">  </span><span class="na">adjustment_type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ChangeInCapacity"</span><span class="w"></span>
<span class="w">  </span><span class="na">cooldown</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>
<span class="w">  </span><span class="na">autoscaling_group_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_autoscaling_group.bar.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_group"</span><span class="w"> </span><span class="nv">"bar"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">availability_zones</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"us-east-1a"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="s2">"foobar3-terraform-test"</span><span class="w"></span>
<span class="w">  </span><span class="na">max_size</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="w">  </span><span class="na">min_size</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_grace_period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"ELB"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_delete</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">launch_configuration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_launch_configuration.foo.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Create%20target%20tracking%20scaling%20policy%20using%20metric%20math"></a><h3 id="create-target-tracking-scaling-policy-using-metric-math">Create target tracking scaling policy using metric math</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">autoscaling_group_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-test-asg"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_type</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"TargetTrackingScaling"</span><span class="w"></span>
<span class="w">  </span><span class="nb">target_tracking_configuration</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">target_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="w"></span>
<span class="w">    </span><span class="nb">customized_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">metrics</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get the queue size (the number of messages waiting to be processed)"</span><span class="w"></span>
<span class="w">        </span><span class="na">id</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"m1"</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_stat</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">metric</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">namespace</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS/SQS"</span><span class="w"></span>
<span class="w">            </span><span class="na">metric_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ApproximateNumberOfMessagesVisible"</span><span class="w"></span>
<span class="w">            </span><span class="nb">dimensions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"QueueName"</span><span class="w"></span>
<span class="w">              </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-queue"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="na">stat</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Sum"</span><span class="w"></span>
<span class="w">          </span><span class="na">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">return_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">metrics</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Get the group size (the number of InService instances)"</span><span class="w"></span>
<span class="w">        </span><span class="na">id</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"m2"</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_stat</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nb">metric</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">namespace</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS/AutoScaling"</span><span class="w"></span>
<span class="w">            </span><span class="na">metric_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"GroupInServiceInstances"</span><span class="w"></span>
<span class="w">            </span><span class="nb">dimensions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"AutoScalingGroupName"</span><span class="w"></span>
<span class="w">              </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-asg"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="na">stat</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average"</span><span class="w"></span>
<span class="w">          </span><span class="na">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">return_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">metrics</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">label</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"Calculate the backlog per instance"</span><span class="w"></span>
<span class="w">        </span><span class="na">id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"e1"</span><span class="w"></span>
<span class="w">        </span><span class="na">expression</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"m1 / m2"</span><span class="w"></span>
<span class="w">        </span><span class="na">return_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Create%20predictive%20scaling%20policy%20using%20customized%20metrics"></a><h3 id="create-predictive-scaling-policy-using-customized-metrics">Create predictive scaling policy using customized metrics</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">autoscaling_group_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-test-asg"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_type</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"PredictiveScaling"</span><span class="w"></span>
<span class="w">  </span><span class="nb">predictive_scaling_configuration</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">target_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">      </span><span class="nb">customized_load_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"load_sum"</span><span class="w"></span>
<span class="w">          </span><span class="na">expression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SUM(SEARCH('{AWS/EC2,AutoScalingGroupName} MetricName=\"CPUUtilization\" my-test-asg', 'Sum', 3600))"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">customized_capacity_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"capacity_sum"</span><span class="w"></span>
<span class="w">          </span><span class="na">expression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SUM(SEARCH('{AWS/AutoScaling,AutoScalingGroupName} MetricName=\"GroupInServiceIntances\" my-test-asg', 'Average', 300))"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">customized_scaling_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"capacity_sum"</span><span class="w"></span>
<span class="w">          </span><span class="na">expression</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"SUM(SEARCH('{AWS/AutoScaling,AutoScalingGroupName} MetricName=\"GroupInServiceIntances\" my-test-asg', 'Average', 300))"</span><span class="w"></span>
<span class="w">          </span><span class="na">return_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"load_sum"</span><span class="w"></span>
<span class="w">          </span><span class="na">expression</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"SUM(SEARCH('{AWS/EC2,AutoScalingGroupName} MetricName=\"CPUUtilization\" my-test-asg', 'Sum', 300))"</span><span class="w"></span>
<span class="w">          </span><span class="na">return_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"weighted_average"</span><span class="w"></span>
<span class="w">          </span><span class="na">expression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"load_sum / (capacity_sum * PERIOD(capacity_sum) / 60)"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Create%20predictive%20scaling%20policy%20using%20customized%20scaling%20and%20predefined%20load%20metric"></a><h3 id="create-predictive-scaling-policy-using-customized-scaling-and-predefined-load-metric">Create predictive scaling policy using customized scaling and predefined load metric</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">autoscaling_group_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-test-asg"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_type</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"PredictiveScaling"</span><span class="w"></span>
<span class="w">  </span><span class="nb">predictive_scaling_configuration</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">target_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">      </span><span class="nb">predefined_load_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">predefined_metric_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ASGTotalCPUUtilization"</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_label</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"app/my-alb/778d41231b141a0f/targetgroup/my-alb-target-group/943f017f100becff"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">customized_scaling_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">metric_data_queries</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scaling"</span><span class="w"></span>
<span class="w">          </span><span class="nb">metric_stat</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nb">metric</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="na">metric_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CPUUtilization"</span><span class="w"></span>
<span class="w">              </span><span class="na">namespace</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS/EC2"</span><span class="w"></span>
<span class="w">              </span><span class="nb">dimensions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"AutoScalingGroupName"</span><span class="w"></span>
<span class="w">                </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-test-asg"</span><span class="w"></span>
<span class="w">              </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="na">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Average"</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<ul>
<li><code>name</code> - (Required) Name of the policy.</li>
<li><code>autoscaling_group_name</code> - (Required) Name of the autoscaling group.</li>
<li><code>adjustment_type</code> - (Optional) Whether the adjustment is an absolute number or a percentage of the current capacity. Valid values are <code>ChangeInCapacity</code>, <code>ExactCapacity</code>, and <code>PercentChangeInCapacity</code>.</li>
<li><code>policy_type</code> - (Optional) Policy type, either "SimpleScaling", "StepScaling", "TargetTrackingScaling", or "PredictiveScaling". If this value isn't provided, AWS will default to "SimpleScaling."</li>
<li><code>predictive_scaling_configuration</code> - (Optional) Predictive scaling policy configuration to use with Amazon EC2 Auto Scaling.</li>
<li><code>estimated_instance_warmup</code> - (Optional) Estimated time, in seconds, until a newly launched instance will contribute CloudWatch metrics. Without a value, AWS will default to the group's specified cooldown period.</li>
<li><code>enabled</code> - (Optional) Whether the scaling policy is enabled or disabled. Default: <code>true</code>.</li>
</ul>

<p>The following argument is only available to "SimpleScaling" and "StepScaling" type policies:</p>

<ul>
<li><code>min_adjustment_magnitude</code> - (Optional) Minimum value to scale by when <code>adjustment_type</code> is set to <code>PercentChangeInCapacity</code>.</li>
</ul>

<p>The following arguments are only available to "SimpleScaling" type policies:</p>

<ul>
<li><code>cooldown</code> - (Optional) Amount of time, in seconds, after a scaling activity completes and before the next scaling activity can start.</li>
<li><code>scaling_adjustment</code> - (Optional) Number of instances by which to scale. <code>adjustment_type</code> determines the interpretation of this number (e.g., as an absolute number or as a percentage of the existing Auto Scaling group size). A positive increment adds to the current capacity and a negative value removes from the current capacity.</li>
</ul>

<p>The following arguments are only available to "StepScaling" type policies:</p>

<ul>
<li><code>metric_aggregation_type</code> - (Optional) Aggregation type for the policy's metrics. Valid values are "Minimum", "Maximum", and "Average". Without a value, AWS will treat the aggregation type as "Average".</li>
<li><code>step_adjustment</code> - (Optional) Set of adjustments that manage
group scaling. These have the following structure:</li>
</ul>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ... other configuration ...</span>

<span class="w">  </span><span class="nb">step_adjustment</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">scaling_adjustment</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="err">-</span><span class="m">1</span><span class="w"></span>
<span class="w">    </span><span class="na">metric_interval_lower_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">1.0</span><span class="w"></span>
<span class="w">    </span><span class="na">metric_interval_upper_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">2.0</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">step_adjustment</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">scaling_adjustment</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">    </span><span class="na">metric_interval_lower_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">2.0</span><span class="w"></span>
<span class="w">    </span><span class="na">metric_interval_upper_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">3.0</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>The following fields are available in step adjustments:</p>

<ul>
<li><code>scaling_adjustment</code> - (Required) Number of members by which to
scale, when the adjustment bounds are breached. A positive value scales
up. A negative value scales down.</li>
<li><code>metric_interval_lower_bound</code> - (Optional) Lower bound for the
difference between the alarm threshold and the CloudWatch metric.
Without a value, AWS will treat this bound as negative infinity.</li>
<li><code>metric_interval_upper_bound</code> - (Optional) Upper bound for the
difference between the alarm threshold and the CloudWatch metric.
Without a value, AWS will treat this bound as positive infinity. The upper bound
must be greater than the lower bound.</li>
</ul>

<p>Notice the bounds are <strong>relative</strong> to the alarm threshold, meaning that the starting point is not 0%, but the alarm threshold. Check the official <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-scaling-simple-step.html#as-scaling-steps">docs</a> for a detailed example.</p>

<p>The following arguments are only available to "TargetTrackingScaling" type policies:</p>

<ul>
<li><code>target_tracking_configuration</code> - (Optional) Target tracking policy. These have the following structure:</li>
</ul>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_autoscaling_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ... other configuration ...</span>

<span class="w">  </span><span class="nb">target_tracking_configuration</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">predefined_metric_specification</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">predefined_metric_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ASGAverageCPUUtilization"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="na">target_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">40.0</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>The following fields are available in target tracking configuration:</p>

<ul>
<li><code>predefined_metric_specification</code> - (Optional) Predefined metric. Conflicts with <code>customized_metric_specification</code>.</li>
<li><code>customized_metric_specification</code> - (Optional) Customized metric. Conflicts with <code>predefined_metric_specification</code>.</li>
<li><code>target_value</code> - (Required) Target value for the metric.</li>
<li><code>disable_scale_in</code> - (Optional, Default: false) Whether scale in by the target tracking policy is disabled.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/predefined_metric_specification"></a><h3 id="predefined_metric_specification">predefined_metric_specification</h3>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>predefined_metric_type</code> - (Required) Metric type.</li>
<li><code>resource_label</code> - (Optional) Identifies the resource associated with the metric type.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/customized_metric_specification"></a><h3 id="customized_metric_specification">customized_metric_specification</h3>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric_dimension</code> - (Optional) Dimensions of the metric.</li>
<li><code>metric_name</code> - (Optional) Name of the metric.</li>
<li><code>namespace</code> - (Optional) Namespace of the metric.</li>
<li><code>statistic</code> - (Optional) Statistic of the metric.</li>
<li><code>unit</code> - (Optional) Unit of the metric.</li>
<li><code>metrics</code> - (Optional) Metrics to include, as a metric data query.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric_dimension"></a><h4 id="metric_dimension">metric_dimension</h4>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>name</code> - (Required) Name of the dimension.</li>
<li><code>value</code> - (Required) Value of the dimension.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metrics"></a><h4 id="metrics">metrics</h4>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>expression</code> - (Optional) Math expression used on the returned metric. You must specify either <code>expression</code> or <code>metric_stat</code>, but not both.</li>
<li><code>id</code> - (Required) Short name for the metric used in target tracking scaling policy.</li>
<li><code>label</code> - (Optional) Human-readable label for this metric or expression.</li>
<li><code>metric_stat</code> - (Optional) Structure that defines CloudWatch metric to be used in target tracking scaling policy. You must specify either <code>expression</code> or <code>metric_stat</code>, but not both.</li>
<li><code>return_data</code> - (Optional) Boolean that indicates whether to return the timestamps and raw data values of this metric, the default is true</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric_stat"></a><h5 id="metric_stat">metric_stat</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric</code> - (Required) Structure that defines the CloudWatch metric to return, including the metric name, namespace, and dimensions.</li>
<li><code>period</code> - (Optional) The period of the metric in seconds.</li>
<li><code>stat</code> - (Required) Statistic of the metrics to return.</li>
<li><code>unit</code> - (Optional) Unit of the metrics to return.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric"></a><h5 id="metric">metric</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>dimensions</code> - (Optional) Dimensions of the metric.</li>
<li><code>metric_name</code> - (Required) Name of the metric.</li>
<li><code>namespace</code> - (Required) Namespace of the metric.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/dimensions"></a><h6 id="dimensions">dimensions</h6>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>name</code> - (Required) Name of the dimension.</li>
<li><code>value</code> - (Required) Value of the dimension.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/predictive_scaling_configuration"></a><h3 id="predictive_scaling_configuration">predictive_scaling_configuration</h3>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>max_capacity_breach_behavior</code> - (Optional) Defines the behavior that should be applied if the forecast capacity approaches or exceeds the maximum capacity of the Auto Scaling group. Valid values are <code>HonorMaxCapacity</code> or <code>IncreaseMaxCapacity</code>. Default is <code>HonorMaxCapacity</code>.</li>
<li><code>max_capacity_buffer</code> - (Optional) Size of the capacity buffer to use when the forecast capacity is close to or exceeds the maximum capacity. Valid range is <code>0</code> to <code>100</code>. If set to <code>0</code>, Amazon EC2 Auto Scaling may scale capacity higher than the maximum capacity to equal but not exceed forecast capacity.</li>
<li><code>metric_specification</code> - (Required) This structure includes the metrics and target utilization to use for predictive scaling.</li>
<li><code>mode</code> - (Optional) Predictive scaling mode. Valid values are <code>ForecastAndScale</code> and <code>ForecastOnly</code>. Default is <code>ForecastOnly</code>.</li>
<li><code>scheduling_buffer_time</code> - (Optional) Amount of time, in seconds, by which the instance launch time can be advanced. Minimum is <code>0</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric_specification"></a><h4 id="metric_specification">metric_specification</h4>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>customized_capacity_metric_specification</code> - (Optional) Customized capacity metric specification. The field is only valid when you use <code>customized_load_metric_specification</code></li>
<li><code>customized_load_metric_specification</code> - (Optional) Customized load metric specification.</li>
<li><code>customized_scaling_metric_specification</code> - (Optional) Customized scaling metric specification.</li>
<li><code>predefined_load_metric_specification</code> - (Optional) Predefined load metric specification.</li>
<li><code>predefined_metric_pair_specification</code> - (Optional) Metric pair specification from which Amazon EC2 Auto Scaling determines the appropriate scaling metric and load metric to use.</li>
<li><code>predefined_scaling_metric_specification</code> - (Optional) Predefined scaling metric specification.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/predefined_load_metric_specification"></a><h5 id="predefined_load_metric_specification">predefined_load_metric_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>predefined_metric_type</code> - (Required) Metric type. Valid values are <code>ASGTotalCPUUtilization</code>, <code>ASGTotalNetworkIn</code>, <code>ASGTotalNetworkOut</code>, or <code>ALBTargetGroupRequestCount</code>.</li>
<li><code>resource_label</code> - (Required) Label that uniquely identifies a specific Application Load Balancer target group from which to determine the request count served by your Auto Scaling group. You create the resource label by appending the final portion of the load balancer ARN and the final portion of the target group ARN into a single value, separated by a forward slash (/). Refer to <a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_PredefinedMetricSpecification.html">PredefinedMetricSpecification</a> for more information.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/predefined_metric_pair_specification"></a><h5 id="predefined_metric_pair_specification">predefined_metric_pair_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>predefined_metric_type</code> - (Required) Which metrics to use. There are two different types of metrics for each metric type: one is a load metric and one is a scaling metric. For example, if the metric type is <code>ASGCPUUtilization</code>, the Auto Scaling group's total CPU metric is used as the load metric, and the average CPU metric is used for the scaling metric. Valid values are <code>ASGCPUUtilization</code>, <code>ASGNetworkIn</code>, <code>ASGNetworkOut</code>, or <code>ALBRequestCount</code>.</li>
<li><code>resource_label</code> - (Required) Label that uniquely identifies a specific Application Load Balancer target group from which to determine the request count served by your Auto Scaling group. You create the resource label by appending the final portion of the load balancer ARN and the final portion of the target group ARN into a single value, separated by a forward slash (/). Refer to <a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_PredefinedMetricSpecification.html">PredefinedMetricSpecification</a> for more information.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/predefined_scaling_metric_specification"></a><h5 id="predefined_scaling_metric_specification">predefined_scaling_metric_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>predefined_metric_type</code> - (Required) Describes a scaling metric for a predictive scaling policy. Valid values are <code>ASGAverageCPUUtilization</code>, <code>ASGAverageNetworkIn</code>, <code>ASGAverageNetworkOut</code>, or <code>ALBRequestCountPerTarget</code>.</li>
<li><code>resource_label</code> - (Required) Label that uniquely identifies a specific Application Load Balancer target group from which to determine the request count served by your Auto Scaling group. You create the resource label by appending the final portion of the load balancer ARN and the final portion of the target group ARN into a single value, separated by a forward slash (/). Refer to <a href="https://docs.aws.amazon.com/autoscaling/ec2/APIReference/API_PredefinedMetricSpecification.html">PredefinedMetricSpecification</a> for more information.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/customized_scaling_metric_specification"></a><h5 id="customized_scaling_metric_specification">customized_scaling_metric_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric_data_queries</code> - (Required) List of up to 10 structures that defines custom scaling metric in predictive scaling policy</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/customized_load_metric_specification"></a><h5 id="customized_load_metric_specification">customized_load_metric_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric_data_queries</code> - (Required) List of up to 10 structures that defines custom load metric in predictive scaling policy</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/customized_capacity_metric_specification"></a><h5 id="customized_capacity_metric_specification">customized_capacity_metric_specification</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric_data_queries</code> - (Required) List of up to 10 structures that defines custom capacity metric in predictive scaling policy</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric_data_queries"></a><h5 id="metric_data_queries">metric_data_queries</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>expression</code> - (Optional) Math expression used on the returned metric. You must specify either <code>expression</code> or <code>metric_stat</code>, but not both.</li>
<li><code>id</code> - (Required) Short name for the metric used in predictive scaling policy.</li>
<li><code>label</code> - (Optional) Human-readable label for this metric or expression.</li>
<li><code>metric_stat</code> - (Optional) Structure that defines CloudWatch metric to be used in predictive scaling policy. You must specify either <code>expression</code> or <code>metric_stat</code>, but not both.</li>
<li><code>return_data</code> - (Optional) Boolean that indicates whether to return the timestamps and raw data values of this metric, the default is true</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric_stat"></a><h5 id="metric_stat-2">metric_stat</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>metric</code> - (Required) Structure that defines the CloudWatch metric to return, including the metric name, namespace, and dimensions.</li>
<li><code>stat</code> - (Required) Statistic of the metrics to return.</li>
<li><code>unit</code> - (Optional) Unit of the metrics to return.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/metric"></a><h5 id="metric-2">metric</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>dimensions</code> - (Optional) Dimensions of the metric.</li>
<li><code>metric_name</code> - (Required) Name of the metric.</li>
<li><code>namespace</code> - (Required) Namespace of the metric.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/dimensions"></a><h5 id="dimensions-2">dimensions</h5>

<p>This configuration block supports the following arguments:</p>

<ul>
<li><code>name</code> - (Required) Name of the dimension.</li>
<li><code>value</code> - (Required) Value of the dimension.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attribute%20Reference"></a><h2 id="attribute-reference">Attribute Reference</h2>

<p>This resource exports the following attributes in addition to the arguments above:</p>

<ul>
<li><code>arn</code> - ARN assigned by AWS to the scaling policy.</li>
<li><code>name</code> - Scaling policy's name.</li>
<li><code>autoscaling_group_name</code> - The scaling policy's assigned autoscaling group.</li>
<li><code>adjustment_type</code> - Scaling policy's adjustment type.</li>
<li><code>policy_type</code> - Scaling policy's type.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import AutoScaling scaling policy using the role autoscaling_group_name and name separated by <code>/</code>. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_autoscaling_policy.test-policy</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"asg-name/policy-name"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Using <code>terraform import</code>, import AutoScaling scaling policy using the role autoscaling_group_name and name separated by <code>/</code>. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">% </span>terraform import aws_autoscaling_policy.test-policy asg-name/policy-name
</code></pre></div>

            
        
    </body></html>
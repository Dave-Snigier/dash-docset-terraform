<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/appsync_function_configuration --><head>
                <title>awscc_appsync_function_configuration</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_appsync_function_configuration-resource">awscc_appsync_function_configuration (Resource)</h1>

<p>An example resource schema demonstrating some basic constructs and validation rules.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Create%20AppSync%20Function%20with%20DynamoDB%20Integration"></a><h3 id="create-appsync-function-with-dynamodb-integration">Create AppSync Function with DynamoDB Integration</h3>

<p>Creates an AppSync function configuration with JavaScript runtime that integrates with DynamoDB, including all necessary supporting resources such as IAM roles, DynamoDB table, and AppSync API.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS account ID and region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Create AppSync API (no AWSCC equivalent yet)</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_appsync_graphql_api"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-api"</span><span class="w"></span>
<span class="w">  </span><span class="na">authentication_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"API_KEY"</span><span class="w"></span>
<span class="w">  </span><span class="na">schema</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="dl">EOF</span><span class="sh"></span>
<span class="sh">type Query {</span>
<span class="sh">  getExample(id: ID!): Example</span>
<span class="sh">}</span>

<span class="sh">type Example {</span>
<span class="sh">  id: ID!</span>
<span class="sh">  value: String</span>
<span class="sh">}</span>
<span class="dl">EOF</span>

<span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"Modified By" = "AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Example DynamoDB table for the data source</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_dynamodb_table"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">attribute_definitions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">attribute_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"id"</span><span class="w"></span>
<span class="w">      </span><span class="na">attribute_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"S"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">key_schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">attribute_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"id"</span><span class="w"></span>
<span class="w">      </span><span class="na">key_type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"HASH"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">table_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-table"</span><span class="w"></span>
<span class="w">  </span><span class="na">billing_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PAY_PER_REQUEST"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># IAM role for AppSync to access DynamoDB</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"appsync_datasource_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-appsync-dynamodb-role"</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="nb">Principal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">Service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"appsync.amazonaws.com"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role_policy"</span><span class="w"> </span><span class="nv">"appsync_dynamodb_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DynamoDBAccess"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.appsync_datasource_role.role_name</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:GetItem"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:PutItem"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:DeleteItem"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:UpdateItem"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:Query"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"dynamodb:Scan"</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">Resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="nv">awscc_dynamodb_table.example.arn</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="s2">"${awscc_dynamodb_table.example.arn}/index/*"</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create AppSync datasource (no AWSCC equivalent yet)</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_appsync_datasource"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">api_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_appsync_graphql_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example_datasource"</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"AMAZON_DYNAMODB"</span><span class="w"></span>

<span class="w">  </span><span class="nb">dynamodb_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_dynamodb_table.example.table_name</span><span class="w"></span>
<span class="w">    </span><span class="na">region</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_region.current.name</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">service_role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.appsync_datasource_role.arn</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create AppSync function configuration using AWSCC</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_appsync_function_configuration"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">api_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_appsync_graphql_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">data_source_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_appsync_datasource.example.name</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"exampleFunction"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Example AppSync Function"</span><span class="w"></span>

<span class="w">  </span><span class="nb">runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">name</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"APPSYNC_JS"</span><span class="w"></span>
<span class="w">    </span><span class="na">runtime_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="dl">EOF</span><span class="sh"></span>
<span class="sh">export function request(ctx) {</span>
<span class="sh">  return {</span>
<span class="sh">    operation: 'GetItem',</span>
<span class="sh">    key: util.dynamodb.toMapValues({id: ctx.args.id})</span>
<span class="sh">  };</span>
<span class="sh">}</span>

<span class="sh">export function response(ctx) {</span>
<span class="sh">  return ctx.result;</span>
<span class="sh">}</span>
<span class="dl">EOF</span>

<span class="w">  </span><span class="na">function_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2018-05-29"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>api_id</code> (String) The AWS AppSync GraphQL API that you want to attach using this function.</li>
<li><code>data_source_name</code> (String) The name of data source this function will attach.</li>
<li><code>name</code> (String) The name of the function.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>code</code> (String) The resolver code that contains the request and response functions. When code is used, the runtime is required. The runtime value must be APPSYNC_JS.</li>
<li><code>code_s3_location</code> (String) The Amazon S3 endpoint (where the code is located??).</li>
<li><code>description</code> (String) The function description.</li>
<li><code>function_version</code> (String) The version of the request mapping template. Currently, only the 2018-05-29 version of the template is supported.</li>
<li><code>max_batch_size</code> (Number) The maximum number of resolver request inputs that will be sent to a single AWS Lambda function in a BatchInvoke operation.</li>
<li><code>request_mapping_template</code> (String) The Function request mapping template. Functions support only the 2018-05-29 version of the request mapping template.</li>
<li><code>request_mapping_template_s3_location</code> (String) Describes a Sync configuration for a resolver. Contains information on which Conflict Detection, as well as Resolution strategy, should be performed when the resolver is invoked.</li>
<li><code>response_mapping_template</code> (String) The Function response mapping template.</li>
<li><code>response_mapping_template_s3_location</code> (String) The location of a response mapping template in an Amazon S3 bucket. Use this if you want to provision with a template file in Amazon S3 rather than embedding it in your CloudFormation template.</li>
<li><code>runtime</code> (Attributes) Describes a runtime used by an AWS AppSync pipeline resolver or AWS AppSync function. Specifies the name and version of the runtime to use. Note that if a runtime is specified, code must also be specified. (see <a href="#nestedatt--runtime">below for nested schema</a>)</li>
<li><code>sync_config</code> (Attributes) Describes a Sync configuration for a resolver. Specifies which Conflict Detection strategy and Resolution strategy to use when the resolver is invoked. (see <a href="#nestedatt--sync_config">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>function_arn</code> (String) The ARN for the function generated by the service</li>
<li><code>function_id</code> (String) The unique identifier for the function generated by the service</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
</ul>

<p><a id="nestedatt--runtime"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20runtime"></a><h3 id="nested-schema-for-runtime">Nested Schema for <code>runtime</code></h3>

<p>Optional:</p>

<ul>
<li><code>name</code> (String) The name of the runtime to use. Currently, the only allowed value is APPSYNC_JS.</li>
<li><code>runtime_version</code> (String) The version of the runtime to use. Currently, the only allowed version is 1.0.0.</li>
</ul>

<p><a id="nestedatt--sync_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20sync_config"></a><h3 id="nested-schema-for-sync_config">Nested Schema for <code>sync_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>conflict_detection</code> (String) The Conflict Detection strategy to use.</li>
<li><code>conflict_handler</code> (String) The Conflict Resolution strategy to perform in the event of a conflict.</li>
<li><code>lambda_conflict_handler_config</code> (Attributes) The LambdaConflictHandlerConfig when configuring LAMBDA as the Conflict Handler. (see <a href="#nestedatt--sync_config--lambda_conflict_handler_config">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--sync_config--lambda_conflict_handler_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20sync_config.lambda_conflict_handler_config"></a><h3 id="nested-schema-for-sync_configlambda_conflict_handler_config">Nested Schema for <code>sync_config.lambda_conflict_handler_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>lambda_conflict_handler_arn</code> (String) The Amazon Resource Name (ARN) for the Lambda function to use as the Conflict Handler.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_appsync_function_configuration.example <span class="s2">"function_arn"</span>
</code></pre></div>

            
        
    </body></html>
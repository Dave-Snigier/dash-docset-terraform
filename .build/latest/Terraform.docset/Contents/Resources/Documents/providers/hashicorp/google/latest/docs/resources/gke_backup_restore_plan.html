<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/gke_backup_restore_plan --><head>
                <title>google_gke_backup_restore_plan</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_gke_backup_restore_plan">google_gke_backup_restore_plan</h1>

<p>Represents a Restore Plan instance.</p>

<p>To get more information about RestorePlan, see:</p>

<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/projects.locations.restorePlans">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke">Official Documentation</a></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20All%20Namespaces"></a><h2 id="example-usage-gkebackup-restoreplan-all-namespaces">Example Usage - Gkebackup Restoreplan All Namespaces</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-all-ns-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-all-ns"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"all_ns"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-all-ns"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">all_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Rollback%20Namespace"></a><h2 id="example-usage-gkebackup-restoreplan-rollback-namespace">Example Usage - Gkebackup Restoreplan Rollback Namespace</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-ns-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-ns"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"rollback_ns"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-ns-rp"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_namespaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"my-ns"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DELETE_AND_RESTORE"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">selected_group_kinds</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"apiextension.k8s.io"</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CustomResourceDefinition"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">selected_group_kinds</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"storage.k8s.io"</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"StorageClass"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Protected%20Application"></a><h2 id="example-usage-gkebackup-restoreplan-protected-application">Example Usage - Gkebackup Restoreplan Protected Application</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-app-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-app"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"rollback_app"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rollback-app-rp"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_applications</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">namespaced_names</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-app"</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-ns"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DELETE_AND_RESTORE"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"REUSE_VOLUME_HANDLE_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">no_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20All%20Cluster%20Resources"></a><h2 id="example-usage-gkebackup-restoreplan-all-cluster-resources">Example Usage - Gkebackup Restoreplan All Cluster Resources</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"all-groupkinds-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"all-groupkinds"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"all_cluster_resources"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"all-groupkinds-rp"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">no_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">all_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Rename%20Namespace"></a><h2 id="example-usage-gkebackup-restoreplan-rename-namespace">Example Usage - Gkebackup Restoreplan Rename Namespace</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"rename-ns-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rename-ns"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"rename_ns"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rename-ns-rp"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">selected_namespaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"ns1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"REUSE_VOLUME_HANDLE_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">no_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">transformation_rules</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rename namespace from ns1 to ns2"</span><span class="w"></span>
<span class="w">      </span><span class="nb">resource_filter</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">group_kinds</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Namespace"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">json_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">".metadata[?(@.name == 'ns1')]"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">field_actions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">op</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"REPLACE"</span><span class="w"></span>
<span class="w">        </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/metadata/name"</span><span class="w"></span>
<span class="w">        </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns2"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">transformation_rules</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"move all resources from ns1 to ns2"</span><span class="w"></span>
<span class="w">      </span><span class="nb">resource_filter</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"ns1"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">field_actions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">op</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"REPLACE"</span><span class="w"></span>
<span class="w">        </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/metadata/namespace"</span><span class="w"></span>
<span class="w">        </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ns2"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Second%20Transformation"></a><h2 id="example-usage-gkebackup-restoreplan-second-transformation">Example Usage - Gkebackup Restoreplan Second Transformation</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"transform-rule-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transform-rule"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"transform_rule"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transform-rule-rp"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"copy nginx env variables"</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"app"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"nginx"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">excluded_namespaces</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"my-ns"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DELETE_AND_RESTORE"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">excluded_group_kinds</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"apiextension.k8s.io"</span><span class="w"></span>
<span class="w">        </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CustomResourceDefinition"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">    </span><span class="nb">transformation_rules</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Copy environment variables from the nginx container to the install init container."</span><span class="w"></span>
<span class="w">      </span><span class="nb">resource_filter</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">group_kinds</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Pod"</span><span class="w"></span>
<span class="w">          </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">json_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">".metadata[?(@.name == 'nginx')]"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">field_actions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">op</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"COPY"</span><span class="w"></span>
<span class="w">        </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/spec/initContainers/0/env"</span><span class="w"></span>
<span class="w">        </span><span class="na">from_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/spec/containers/0/env"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Gitops%20Mode"></a><h2 id="example-usage-gkebackup-restoreplan-gitops-mode">Example Usage - Gkebackup Restoreplan Gitops Mode</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"gitops-mode-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gitops-mode"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"gitops_mode"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gitops-mode"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"MERGE_SKIP_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">all_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Restore%20Order"></a><h2 id="example-usage-gkebackup-restoreplan-restore-order">Example Usage - Gkebackup Restoreplan Restore Order</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-order-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-order"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"restore_order"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restore-order"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">all_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">    </span><span class="nb">restore_order</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">group_kind_dependencies</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nb">satisfying</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"stable.example.com"</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"kindA"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="nb">requiring</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"stable.example.com"</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"kindB"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">group_kind_dependencies</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nb">satisfying</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"stable.example.com"</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"kindB"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="nb">requiring</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"stable.example.com"</span><span class="w"></span>
<span class="w">                </span><span class="na">resource_kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"kindC"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Gkebackup%20Restoreplan%20Volume%20Res"></a><h2 id="example-usage-gkebackup-restoreplan-volume-res">Example Usage - Gkebackup Restoreplan Volume Res</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_container_cluster"</span><span class="w"> </span><span class="nv">"primary"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"volume-res-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="nb">workload_identity_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">workload_pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"my-project-name.svc.id.goog"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">addons_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">gke_backup_agent_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_protection</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">  </span><span class="na">subnetwork</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_backup_plan"</span><span class="w"> </span><span class="nv">"basic"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"volume-res"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">backup_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_volume_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">include_secrets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_gke_backup_restore_plan"</span><span class="w"> </span><span class="nv">"volume_res"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"volume-res"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">backup_plan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_backup_plan.basic.id</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_container_cluster.primary.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">restore_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">all_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">namespaced_resource_restore_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"FAIL_ON_CONFLICT"</span><span class="w"></span>
<span class="w">    </span><span class="na">volume_data_restore_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"NO_VOLUME_DATA_RESTORATION"</span><span class="w"></span>
<span class="w">    </span><span class="nb">cluster_resource_restore_scope</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">all_group_kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">cluster_resource_conflict_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_EXISTING_VERSION"</span><span class="w"></span>
<span class="w">    </span><span class="nb">volume_data_restore_policy_bindings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTORE_VOLUME_DATA_FROM_BACKUP"</span><span class="w"></span>
<span class="w">        </span><span class="na">volume_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"GCE_PERSISTENT_DISK"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>name</code> -
(Required)
The full name of the BackupPlan Resource.</p></li>
<li><p><code>backup_plan</code> -
(Required)
A reference to the BackupPlan from which Backups may be used
as the source for Restores created via this RestorePlan.</p></li>
<li><p><code>cluster</code> -
(Required)
The source cluster from which Restores will be created via this RestorePlan.</p></li>
<li><p><code>restore_config</code> -
(Required)
Defines the configuration of Restores created via this RestorePlan.
Structure is <a href="#nested_restore_config">documented below</a>.</p></li>
<li><p><code>location</code> -
(Required)
The region of the Restore Plan.</p></li>
</ul>

<p><a name="nested_restore_config"></a>The <code>restore_config</code> block supports:</p>

<ul>
<li><p><code>all_namespaces</code> -
(Optional)
If True, restore all namespaced resources in the Backup.
Setting this field to False will result in an error.</p></li>
<li><p><code>excluded_namespaces</code> -
(Optional)
A list of selected namespaces excluded from restoration.
All namespaces except those in this list will be restored.
Structure is <a href="#nested_restore_config_excluded_namespaces">documented below</a>.</p></li>
<li><p><code>selected_namespaces</code> -
(Optional)
A list of selected namespaces to restore from the Backup.
The listed Namespaces and all resources contained in them will be restored.
Structure is <a href="#nested_restore_config_selected_namespaces">documented below</a>.</p></li>
<li><p><code>selected_applications</code> -
(Optional)
A list of selected ProtectedApplications to restore.
The listed ProtectedApplications and all the resources
to which they refer will be restored.
Structure is <a href="#nested_restore_config_selected_applications">documented below</a>.</p></li>
<li><p><code>no_namespaces</code> -
(Optional)
Do not restore any namespaced resources if set to "True".
Specifying this field to "False" is not allowed.</p></li>
<li><p><code>namespaced_resource_restore_mode</code> -
(Optional)
Defines the behavior for handling the situation where sets of namespaced resources
being restored already exist in the target cluster.
This MUST be set to a value other than <code>NAMESPACED_RESOURCE_RESTORE_MODE_UNSPECIFIED</code>
if the <code>namespacedResourceRestoreScope</code> is anything other than <code>noNamespaces</code>.
See https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/RestoreConfig#namespacedresourcerestoremode
for more information on each mode.
Possible values are: <code>DELETE_AND_RESTORE</code>, <code>FAIL_ON_CONFLICT</code>, <code>MERGE_SKIP_ON_CONFLICT</code>, <code>MERGE_REPLACE_VOLUME_ON_CONFLICT</code>, <code>MERGE_REPLACE_ON_CONFLICT</code>.</p></li>
<li><p><code>volume_data_restore_policy</code> -
(Optional)
Specifies the mechanism to be used to restore volume data.
This should be set to a value other than <code>NAMESPACED_RESOURCE_RESTORE_MODE_UNSPECIFIED</code>
if the <code>namespacedResourceRestoreScope</code> is anything other than <code>noNamespaces</code>.
If not specified, it will be treated as <code>NO_VOLUME_DATA_RESTORATION</code>.
See https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/RestoreConfig#VolumeDataRestorePolicy
for more information on each policy option.
Possible values are: <code>RESTORE_VOLUME_DATA_FROM_BACKUP</code>, <code>REUSE_VOLUME_HANDLE_FROM_BACKUP</code>, <code>NO_VOLUME_DATA_RESTORATION</code>.</p></li>
<li><p><code>cluster_resource_restore_scope</code> -
(Optional)
Identifies the cluster-scoped resources to restore from the Backup.
Structure is <a href="#nested_restore_config_cluster_resource_restore_scope">documented below</a>.</p></li>
<li><p><code>cluster_resource_conflict_policy</code> -
(Optional)
Defines the behavior for handling the situation where cluster-scoped resources
being restored already exist in the target cluster.
This MUST be set to a value other than <code>CLUSTER_RESOURCE_CONFLICT_POLICY_UNSPECIFIED</code>
if <code>clusterResourceRestoreScope</code> is anyting other than <code>noGroupKinds</code>.
See https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/RestoreConfig#clusterresourceconflictpolicy
for more information on each policy option.
Possible values are: <code>USE_EXISTING_VERSION</code>, <code>USE_BACKUP_VERSION</code>.</p></li>
<li><p><code>transformation_rules</code> -
(Optional)
A list of transformation rules to be applied against Kubernetes
resources as they are selected for restoration from a Backup.
Rules are executed in order defined - this order matters,
as changes made by a rule may impact the filtering logic of subsequent
rules. An empty list means no transformation will occur.
Structure is <a href="#nested_restore_config_transformation_rules">documented below</a>.</p></li>
<li><p><code>volume_data_restore_policy_bindings</code> -
(Optional)
A table that binds volumes by their scope to a restore policy. Bindings
must have a unique scope. Any volumes not scoped in the bindings are
subject to the policy defined in volume_data_restore_policy.
Structure is <a href="#nested_restore_config_volume_data_restore_policy_bindings">documented below</a>.</p></li>
<li><p><code>restore_order</code> -
(Optional)
It contains custom ordering to use on a Restore.
Structure is <a href="#nested_restore_config_restore_order">documented below</a>.</p></li>
</ul>

<p><a name="nested_restore_config_excluded_namespaces"></a>The <code>excluded_namespaces</code> block supports:</p>

<ul>
<li><code>namespaces</code> -
(Required)
A list of Kubernetes Namespaces.</li>
</ul>

<p><a name="nested_restore_config_selected_namespaces"></a>The <code>selected_namespaces</code> block supports:</p>

<ul>
<li><code>namespaces</code> -
(Required)
A list of Kubernetes Namespaces.</li>
</ul>

<p><a name="nested_restore_config_selected_applications"></a>The <code>selected_applications</code> block supports:</p>

<ul>
<li><code>namespaced_names</code> -
(Required)
A list of namespaced Kubernetes resources.
Structure is <a href="#nested_restore_config_selected_applications_namespaced_names">documented below</a>.</li>
</ul>

<p><a name="nested_restore_config_selected_applications_namespaced_names"></a>The <code>namespaced_names</code> block supports:</p>

<ul>
<li><p><code>namespace</code> -
(Required)
The namespace of a Kubernetes Resource.</p></li>
<li><p><code>name</code> -
(Required)
The name of a Kubernetes Resource.</p></li>
</ul>

<p><a name="nested_restore_config_cluster_resource_restore_scope"></a>The <code>cluster_resource_restore_scope</code> block supports:</p>

<ul>
<li><p><code>all_group_kinds</code> -
(Optional)
If True, all valid cluster-scoped resources will be restored.
Mutually exclusive to any other field in <code>clusterResourceRestoreScope</code>.</p></li>
<li><p><code>excluded_group_kinds</code> -
(Optional)
A list of cluster-scoped resource group kinds to NOT restore from the backup.
If specified, all valid cluster-scoped resources will be restored except
for those specified in the list.
Mutually exclusive to any other field in <code>clusterResourceRestoreScope</code>.
Structure is <a href="#nested_restore_config_cluster_resource_restore_scope_excluded_group_kinds">documented below</a>.</p></li>
<li><p><code>selected_group_kinds</code> -
(Optional)
A list of cluster-scoped resource group kinds to restore from the backup.
If specified, only the selected resources will be restored.
Mutually exclusive to any other field in the <code>clusterResourceRestoreScope</code>.
Structure is <a href="#nested_restore_config_cluster_resource_restore_scope_selected_group_kinds">documented below</a>.</p></li>
<li><p><code>no_group_kinds</code> -
(Optional)
If True, no cluster-scoped resources will be restored.
Mutually exclusive to any other field in <code>clusterResourceRestoreScope</code>.</p></li>
</ul>

<p><a name="nested_restore_config_cluster_resource_restore_scope_excluded_group_kinds"></a>The <code>excluded_group_kinds</code> block supports:</p>

<ul>
<li><p><code>resource_group</code> -
(Optional)
API Group string of a Kubernetes resource, e.g.
"apiextensions.k8s.io", "storage.k8s.io", etc.
Use empty string for core group.</p></li>
<li><p><code>resource_kind</code> -
(Optional)
Kind of a Kubernetes resource, e.g.
"CustomResourceDefinition", "StorageClass", etc.</p></li>
</ul>

<p><a name="nested_restore_config_cluster_resource_restore_scope_selected_group_kinds"></a>The <code>selected_group_kinds</code> block supports:</p>

<ul>
<li><p><code>resource_group</code> -
(Optional)
API Group string of a Kubernetes resource, e.g.
"apiextensions.k8s.io", "storage.k8s.io", etc.
Use empty string for core group.</p></li>
<li><p><code>resource_kind</code> -
(Optional)
Kind of a Kubernetes resource, e.g.
"CustomResourceDefinition", "StorageClass", etc.</p></li>
</ul>

<p><a name="nested_restore_config_transformation_rules"></a>The <code>transformation_rules</code> block supports:</p>

<ul>
<li><p><code>description</code> -
(Optional)
The description is a user specified string description
of the transformation rule.</p></li>
<li><p><code>resource_filter</code> -
(Optional)
This field is used to specify a set of fields that should be used to
determine which resources in backup should be acted upon by the
supplied transformation rule actions, and this will ensure that only
specific resources are affected by transformation rule actions.
Structure is <a href="#nested_restore_config_transformation_rules_transformation_rules_resource_filter">documented below</a>.</p></li>
<li><p><code>field_actions</code> -
(Required)
A list of transformation rule actions to take against candidate
resources. Actions are executed in order defined - this order
matters, as they could potentially interfere with each other and
the first operation could affect the outcome of the second operation.
Structure is <a href="#nested_restore_config_transformation_rules_transformation_rules_field_actions">documented below</a>.</p></li>
</ul>

<p><a name="nested_restore_config_transformation_rules_transformation_rules_resource_filter"></a>The <code>resource_filter</code> block supports:</p>

<ul>
<li><p><code>namespaces</code> -
(Optional)
(Filtering parameter) Any resource subject to transformation must
be contained within one of the listed Kubernetes Namespace in the
Backup. If this field is not provided, no namespace filtering will
be performed (all resources in all Namespaces, including all
cluster-scoped resources, will be candidates for transformation).
To mix cluster-scoped and namespaced resources in the same rule,
use an empty string ("") as one of the target namespaces.</p></li>
<li><p><code>group_kinds</code> -
(Optional)
(Filtering parameter) Any resource subject to transformation must
belong to one of the listed "types". If this field is not provided,
no type filtering will be performed
(all resources of all types matching previous filtering parameters
will be candidates for transformation).
Structure is <a href="#nested_restore_config_transformation_rules_transformation_rules_resource_filter_group_kinds">documented below</a>.</p></li>
<li><p><code>json_path</code> -
(Optional)
This is a JSONPath expression that matches specific fields of
candidate resources and it operates as a filtering parameter
(resources that are not matched with this expression will not
be candidates for transformation).</p></li>
</ul>

<p><a name="nested_restore_config_transformation_rules_transformation_rules_resource_filter_group_kinds"></a>The <code>group_kinds</code> block supports:</p>

<ul>
<li><p><code>resource_group</code> -
(Optional)
API Group string of a Kubernetes resource, e.g.
"apiextensions.k8s.io", "storage.k8s.io", etc.
Use empty string for core group.</p></li>
<li><p><code>resource_kind</code> -
(Optional)
Kind of a Kubernetes resource, e.g.
"CustomResourceDefinition", "StorageClass", etc.</p></li>
</ul>

<p><a name="nested_restore_config_transformation_rules_transformation_rules_field_actions"></a>The <code>field_actions</code> block supports:</p>

<ul>
<li><p><code>op</code> -
(Required)
Specifies the operation to perform.
Possible values are: <code>REMOVE</code>, <code>MOVE</code>, <code>COPY</code>, <code>ADD</code>, <code>TEST</code>, <code>REPLACE</code>.</p></li>
<li><p><code>from_path</code> -
(Optional)
A string containing a JSON Pointer value that references the
location in the target document to move the value from.</p></li>
<li><p><code>path</code> -
(Optional)
A string containing a JSON-Pointer value that references a
location within the target document where the operation is performed.</p></li>
<li><p><code>value</code> -
(Optional)
A string that specifies the desired value in string format
to use for transformation.</p></li>
</ul>

<p><a name="nested_restore_config_volume_data_restore_policy_bindings"></a>The <code>volume_data_restore_policy_bindings</code> block supports:</p>

<ul>
<li><p><code>policy</code> -
(Required)
Specifies the mechanism to be used to restore this volume data.
See https://cloud.google.com/kubernetes-engine/docs/add-on/backup-for-gke/reference/rest/v1/RestoreConfig#VolumeDataRestorePolicy
for more information on each policy option.
Possible values are: <code>RESTORE_VOLUME_DATA_FROM_BACKUP</code>, <code>REUSE_VOLUME_HANDLE_FROM_BACKUP</code>, <code>NO_VOLUME_DATA_RESTORATION</code>.</p></li>
<li><p><code>volume_type</code> -
(Required)
The volume type, as determined by the PVC's
bound PV, to apply the policy to.
Possible values are: <code>GCE_PERSISTENT_DISK</code>.</p></li>
</ul>

<p><a name="nested_restore_config_restore_order"></a>The <code>restore_order</code> block supports:</p>

<ul>
<li><code>group_kind_dependencies</code> -
(Required)
A list of group kind dependency pairs
that is used by Backup for GKE to
generate a group kind restore order.
Structure is <a href="#nested_restore_config_restore_order_group_kind_dependencies">documented below</a>.</li>
</ul>

<p><a name="nested_restore_config_restore_order_group_kind_dependencies"></a>The <code>group_kind_dependencies</code> block supports:</p>

<ul>
<li><p><code>satisfying</code> -
(Required)
The satisfying group kind must be restored first
in order to satisfy the dependency.
Structure is <a href="#nested_restore_config_restore_order_group_kind_dependencies_group_kind_dependencies_satisfying">documented below</a>.</p></li>
<li><p><code>requiring</code> -
(Required)
The requiring group kind requires that the satisfying
group kind be restored first.
Structure is <a href="#nested_restore_config_restore_order_group_kind_dependencies_group_kind_dependencies_requiring">documented below</a>.</p></li>
</ul>

<p><a name="nested_restore_config_restore_order_group_kind_dependencies_group_kind_dependencies_satisfying"></a>The <code>satisfying</code> block supports:</p>

<ul>
<li><p><code>resource_group</code> -
(Optional)
API Group of a Kubernetes resource, e.g.
"apiextensions.k8s.io", "storage.k8s.io", etc.
Use empty string for core group.</p></li>
<li><p><code>resource_kind</code> -
(Optional)
Kind of a Kubernetes resource, e.g.
"CustomResourceDefinition", "StorageClass", etc.</p></li>
</ul>

<p><a name="nested_restore_config_restore_order_group_kind_dependencies_group_kind_dependencies_requiring"></a>The <code>requiring</code> block supports:</p>

<ul>
<li><p><code>resource_group</code> -
(Optional)
API Group of a Kubernetes resource, e.g.
"apiextensions.k8s.io", "storage.k8s.io", etc.
Use empty string for core group.</p></li>
<li><p><code>resource_kind</code> -
(Optional)
Kind of a Kubernetes resource, e.g.
"CustomResourceDefinition", "StorageClass", etc.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> -
(Optional)
User specified descriptive string for this RestorePlan.</p></li>
<li><p><code>labels</code> -
(Optional)
Description: A set of custom labels supplied by the user.
A list of key-&gt;value pairs.
Example: { "name": "wrench", "mass": "1.3kg", "count": "3" }.</p>

<p><strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/locations/{{location}}/restorePlans/{{name}}</code></p></li>
<li><p><code>uid</code> -
Server generated, unique identifier of UUID format.</p></li>
<li><p><code>state</code> -
The State of the RestorePlan.</p></li>
<li><p><code>state_reason</code> -
Detailed description of why RestorePlan is in its current state.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>RestorePlan can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/locations/{{location}}/restorePlans/{{name}}</code></li>
<li><code>{{project}}/{{location}}/{{name}}</code></li>
<li><code>{{location}}/{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import RestorePlan using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/locations/{{location}}/restorePlans/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_gke_backup_restore_plan.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, RestorePlan can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_gke_backup_restore_plan.default projects/{{project}}/locations/{{location}}/restorePlans/{{name}}
$ terraform import google_gke_backup_restore_plan.default {{project}}/{{location}}/{{name}}
$ terraform import google_gke_backup_restore_plan.default {{location}}/{{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
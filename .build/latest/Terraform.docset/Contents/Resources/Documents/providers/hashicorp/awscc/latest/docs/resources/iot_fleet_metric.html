<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/iot_fleet_metric --><head>
                <title>awscc_iot_fleet_metric</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_iot_fleet_metric-resource">awscc_iot_fleet_metric (Resource)</h1>

<p>An aggregated metric of certain devices in your fleet</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/IoT%20Fleet%20Metric%20for%20Device%20Connectivity"></a><h3 id="iot-fleet-metric-for-device-connectivity">IoT Fleet Metric for Device Connectivity</h3>

<p>Creates an IoT Fleet Metric that tracks device connectivity status by querying the AWS Things index every 5 minutes, requiring IoT Fleet Indexing to be enabled first.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Enable IoT Fleet Indexing</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_iot_indexing_configuration"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">thing_indexing_configuration</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">thing_connectivity_indexing_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"STATUS"</span><span class="w"></span>
<span class="w">    </span><span class="na">thing_indexing_mode</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"REGISTRY_AND_SHADOW"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Add a time delay for indexing to complete</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"time_sleep"</span><span class="w"> </span><span class="nv">"wait_60_seconds"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">depends_on</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">aws_iot_indexing_configuration.example</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">create_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"60s"</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create an IoT Fleet Metric</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iot_fleet_metric"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">depends_on</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">time_sleep.wait_60_seconds</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">metric_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"device-connectivity-metric"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"Fleet metric to track device connectivity status"</span><span class="w"></span>
<span class="w">  </span><span class="na">index_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS_Things"</span><span class="w"></span>
<span class="w">  </span><span class="na">query_string</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"connectivity.connected:true"</span><span class="w"></span>
<span class="w">  </span><span class="na">query_version</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"2017-09-30"</span><span class="w"></span>
<span class="w">  </span><span class="na">aggregation_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"connectivity.connected"</span><span class="w"></span>
<span class="w">  </span><span class="na">period</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="c1"> # 5 minutes</span>

<span class="w">  </span><span class="nb">aggregation_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Statistics"</span><span class="w"></span>
<span class="w">    </span><span class="na">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"count"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Count"</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>metric_name</code> (String) The name of the fleet metric</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>aggregation_field</code> (String) The aggregation field to perform aggregation and metric emission</li>
<li><code>aggregation_type</code> (Attributes) Aggregation types supported by Fleet Indexing (see <a href="#nestedatt--aggregation_type">below for nested schema</a>)</li>
<li><code>description</code> (String) The description of a fleet metric</li>
<li><code>index_name</code> (String) The index name of a fleet metric</li>
<li><code>period</code> (Number) The period of metric emission in seconds</li>
<li><code>query_string</code> (String) The Fleet Indexing query used by a fleet metric</li>
<li><code>query_version</code> (String) The version of a Fleet Indexing query used by a fleet metric</li>
<li><code>tags</code> (Attributes Set) An array of key-value pairs to apply to this resource (see <a href="#nestedatt--tags">below for nested schema</a>)</li>
<li><code>unit</code> (String) The unit of data points emitted by a fleet metric</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>creation_date</code> (String) The creation date of a fleet metric</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
<li><code>last_modified_date</code> (String) The last modified date of a fleet metric</li>
<li><code>metric_arn</code> (String) The Amazon Resource Number (ARN) of a fleet metric metric</li>
<li><code>version</code> (Number) The version of a fleet metric</li>
</ul>

<p><a id="nestedatt--aggregation_type"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20aggregation_type"></a><h3 id="nested-schema-for-aggregation_type">Nested Schema for <code>aggregation_type</code></h3>

<p>Optional:</p>

<ul>
<li><code>name</code> (String) Fleet Indexing aggregation type names such as Statistics, Percentiles and Cardinality</li>
<li><code>values</code> (List of String) Fleet Indexing aggregation type values</li>
</ul>

<p><a id="nestedatt--tags"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20tags"></a><h3 id="nested-schema-for-tags">Nested Schema for <code>tags</code></h3>

<p>Optional:</p>

<ul>
<li><code>key</code> (String) The tag's key</li>
<li><code>value</code> (String) The tag's value</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_iot_fleet_metric.example <span class="s2">"metric_name"</span>
</code></pre></div>

            
        
    </body></html>
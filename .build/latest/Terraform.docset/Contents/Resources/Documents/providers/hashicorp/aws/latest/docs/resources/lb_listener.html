<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener --><head>
                <title>aws_lb_listener</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="resource-aws_lb_listener">Resource: aws_lb_listener</h1>

<p>Provides a Load Balancer Listener resource.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p><code>aws_alb_listener</code> is known as <code>aws_lb_listener</code>. The functionality is identical.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Forward%20Action"></a><h3 id="forward-action">Forward Action</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_target_group"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"443"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTPS"</span><span class="w"></span>
<span class="w">  </span><span class="na">ssl_policy</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ELBSecurityPolicy-2016-08"</span><span class="w"></span>
<span class="w">  </span><span class="na">certificate_arn</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::187416307283:server-certificate/test_cert_rab3wuqwgja25ct3n4jdj2tzu4"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>To a NLB:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"443"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"TLS"</span><span class="w"></span>
<span class="w">  </span><span class="na">ssl_policy</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ELBSecurityPolicy-2016-08"</span><span class="w"></span>
<span class="w">  </span><span class="na">certificate_arn</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:iam::187416307283:server-certificate/test_cert_rab3wuqwgja25ct3n4jdj2tzu4"</span><span class="w"></span>
<span class="w">  </span><span class="na">alpn_policy</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP2Preferred"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Redirect%20Action"></a><h3 id="redirect-action">Redirect Action</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"80"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"redirect"</span><span class="w"></span>

<span class="w">    </span><span class="nb">redirect</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">port</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"443"</span><span class="w"></span>
<span class="w">      </span><span class="na">protocol</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTPS"</span><span class="w"></span>
<span class="w">      </span><span class="na">status_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP_301"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Fixed-response%20Action"></a><h3 id="fixed-response-action">Fixed-response Action</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"80"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fixed-response"</span><span class="w"></span>

<span class="w">    </span><span class="nb">fixed_response</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">content_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="w"></span>
<span class="w">      </span><span class="na">message_body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Fixed response content"</span><span class="w"></span>
<span class="w">      </span><span class="na">status_code</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"200"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Authenticate-cognito%20Action"></a><h3 id="authenticate-cognito-action">Authenticate-cognito Action</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_target_group"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_cognito_user_pool"</span><span class="w"> </span><span class="nv">"pool"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_cognito_user_pool_client"</span><span class="w"> </span><span class="nv">"client"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_cognito_user_pool_domain"</span><span class="w"> </span><span class="nv">"domain"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"80"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"authenticate-cognito"</span><span class="w"></span>

<span class="w">    </span><span class="nb">authenticate_cognito</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">user_pool_arn</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_cognito_user_pool.pool.arn</span><span class="w"></span>
<span class="w">      </span><span class="na">user_pool_client_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_cognito_user_pool_client.client.id</span><span class="w"></span>
<span class="w">      </span><span class="na">user_pool_domain</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_cognito_user_pool_domain.domain.domain</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Authenticate-OIDC%20Action"></a><h3 id="authenticate-oidc-action">Authenticate-OIDC Action</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_target_group"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"front_end"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"80"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP"</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"authenticate-oidc"</span><span class="w"></span>

<span class="w">    </span><span class="nb">authenticate_oidc</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">authorization_endpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://example.com/authorization_endpoint"</span><span class="w"></span>
<span class="w">      </span><span class="na">client_id</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"client_id"</span><span class="w"></span>
<span class="w">      </span><span class="na">client_secret</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"client_secret"</span><span class="w"></span>
<span class="w">      </span><span class="na">issuer</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://example.com"</span><span class="w"></span>
<span class="w">      </span><span class="na">token_endpoint</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://example.com/token_endpoint"</span><span class="w"></span>
<span class="w">      </span><span class="na">user_info_endpoint</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://example.com/user_info_endpoint"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.front_end.arn</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Gateway%20Load%20Balancer%20Listener"></a><h3 id="gateway-load-balancer-listener">Gateway Load Balancer Listener</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gateway"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"example"</span><span class="w"></span>

<span class="w">  </span><span class="nb">subnet_mapping</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">subnet_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_subnet.example.id</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_target_group"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"example"</span><span class="w"></span>
<span class="w">  </span><span class="na">port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">6081</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"GENEVE"</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.example.id</span><span class="w"></span>

<span class="w">  </span><span class="nb">health_check</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="w">    </span><span class="na">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.example.id</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.example.id</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Mutual%20TLS%20Authentication"></a><h3 id="mutual-tls-authentication">Mutual TLS Authentication</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"application"</span><span class="c1"></span>

<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_target_group"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">  # ...</span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_lb_listener"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.example.id</span><span class="w"></span>

<span class="w">  </span><span class="nb">default_action</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">target_group_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_target_group.example.id</span><span class="w"></span>
<span class="w">    </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"forward"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">mutual_authentication</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">mode</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"verify"</span><span class="w"></span>
<span class="w">    </span><span class="na">trust_store_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"..."</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are required:</p>

<ul>
<li><code>default_action</code> - (Required) Configuration block for default actions. See below.</li>
<li><code>load_balancer_arn</code> - (Required, Forces New Resource) ARN of the load balancer.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>alpn_policy</code> - (Optional)  Name of the Application-Layer Protocol Negotiation (ALPN) policy. Can be set if <code>protocol</code> is <code>TLS</code>. Valid values are <code>HTTP1Only</code>, <code>HTTP2Only</code>, <code>HTTP2Optional</code>, <code>HTTP2Preferred</code>, and <code>None</code>.</li>
<li><code>certificate_arn</code> - (Optional) ARN of the default SSL server certificate. Exactly one certificate is required if the protocol is HTTPS. For adding additional SSL certificates, see the <a href="../resources/lb_listener_certificate.html"><code>aws_lb_listener_certificate</code> resource</a>.</li>
<li><code>mutual_authentication</code> - (Optional) The mutual authentication configuration information. See below.</li>
<li><code>port</code> - (Optional) Port on which the load balancer is listening. Not valid for Gateway Load Balancers.</li>
<li><code>protocol</code> - (Optional) Protocol for connections from clients to the load balancer. For Application Load Balancers, valid values are <code>HTTP</code> and <code>HTTPS</code>, with a default of <code>HTTP</code>. For Network Load Balancers, valid values are <code>TCP</code>, <code>TLS</code>, <code>UDP</code>, and <code>TCP_UDP</code>. Not valid to use <code>UDP</code> or <code>TCP_UDP</code> if dual-stack mode is enabled. Not valid for Gateway Load Balancers.</li>
<li><code>ssl_policy</code> - (Optional) Name of the SSL Policy for the listener. Required if <code>protocol</code> is <code>HTTPS</code> or <code>TLS</code>. Default is <code>ELBSecurityPolicy-2016-08</code>.</li>
<li><code>tcp_idle_timeout_seconds</code> - (Optional) TCP idle timeout value in seconds. Can only be set if protocol is <code>TCP</code> on Network Load Balancer, or with a Gateway Load Balancer. Not supported for Application Load Balancers. Valid values are between <code>60</code> and <code>6000</code> inclusive. Default: <code>350</code>.</li>
<li><code>routing_http_response_server_enabled</code> - (Optional) Enables you to allow or remove the HTTP response server header. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Valid values are <code>true</code> or <code>false</code>.</li>
<li><code>routing_http_response_strict_transport_security_header_value</code> - (Optional) Informs browsers that the site should only be accessed using HTTPS, and that any future attempts to access it using HTTP should automatically be converted to HTTPS. Default values are <code>max-age=31536000; includeSubDomains; preload</code> consult the Strict-Transport-Security documentation for further details.</li>
<li><code>routing_http_response_access_control_allow_origin_header_value</code> - (Optional) Specifies which origins are allowed to access the server. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. A valid value is a URI, eg: <code>https://example.com</code>.</li>
<li><code>routing_http_response_access_control_allow_methods_header_value</code> - (Optional) Set which HTTP methods are allowed when accessing the server from a different origin. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Valid values are <code>GET</code>, <code>HEAD</code>, <code>POST</code>, <code>DELETE</code>, <code>CONNECT</code>, <code>OPTIONS</code>, <code>TRACE</code> or <code>PATCH</code>.</li>
<li><code>routing_http_response_access_control_allow_headers_header_value</code> - (Optional) Specifies which headers can be used during the request. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Valid values are <code>*</code>, <code>Accept</code>, <code>Accept-Language</code>, <code>Cache-Control</code>, <code>Content-Language</code>, <code>Content-Length</code>, <code>Content-Type</code>, <code>Expires</code>, <code>Last-Modified</code>, <code>Pragma</code>. Dependent on your use-case other headers can be exposed and then set as a value consult the Access-Control-Allow-Headers documentation.</li>
<li><code>routing_http_response_access_control_allow_credentials_header_value</code> - (Optional) Specifies which headers the browser can expose to the requesting client. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. The only valid value is <code>true</code>.</li>
<li><code>routing_http_response_access_control_expose_headers_header_value</code> - (Optional) Specifies whether the browser should include credentials such as cookies or authentication when making requests. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Valid values are <code>*</code>, <code>Cache-Control</code>, <code>Content-Language</code>, <code>Content-Length</code>, <code>Content-Type</code>, <code>Expires</code>, <code>Last-Modified</code>, or <code>Pragma</code>. Dependent on your use-case other headers can be exposed, consult the Access-Control-Expose-Headers documentation.</li>
<li><code>routing_http_response_access_control_max_age_header_value</code> - (Optional) Specifies how long the results of a preflight request can be cached, in seconds. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Valid values are between <code>0</code> and <code>86400</code>. This value is browser specific, consult the Access-Control-Max-Age documentation.</li>
<li><code>routing_http_response_content_security_policy_header_value</code> - (Optional) Specifies restrictions enforced by the browser to help minimize the risk of certain types of security threats. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. Values for this are extensive, and can be impactful when set, consult Content-Security-Policy documentation.</li>
<li><code>routing_http_response_x_content_type_options_header_value</code> - (Optional) Indicates whether the MIME types advertised in the Content-Type headers should be followed and not be changed. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. The only valid value is <code>nosniff</code>.</li>
<li><code>routing_http_response_x_frame_options_header_value</code> - (Optional) Indicates whether the browser is allowed to render a page in a frame, iframe, embed or object. Can only be set if protocol is <code>HTTP</code> or <code>HTTPS</code> for Application Load Balancers. Not supported for Network Load Balancer, or with a Gateway Load Balancer. The only valid values are <code>DENY</code>, <code>SAMEORIGIN</code>, or <code>ALLOW-FROM https://example.com</code>.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert-Serial-Number</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_issuer_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert-Issuer</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_subject_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert-Subject</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_validity_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert-Validity</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_leaf_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert-Leaf</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_mtls_clientcert_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Mtls-Clientcert</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_tls_version_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Tls-Version</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>routing_http_request_x_amzn_tls_cipher_suite_header_name</code> - (Optional) Enables you to modify the header name of the <code>X-Amzn-Tls-Cipher-Suite</code> HTTP request header. Can only be set if protocol is <code>HTTPS</code> for Application Load Balancers.</li>
<li><code>tags</code> - (Optional) A map of tags to assign to the resource. If configured with a provider <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block"><code>default_tags</code> configuration block</a> present, tags with matching keys will overwrite those defined at the provider-level.</li>
</ul>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>When a <code>Name</code> key is specified in the map, the AWS Console maps the value to the <code>Name Tag</code> column value inside the <code>Listener Rules</code> table within a specific load balancer listener page. Otherwise, the value resolves to <code>Default</code>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/default_action"></a><h3 id="default_action">default_action</h3>

<p>The following arguments are required:</p>

<ul>
<li><code>type</code> - (Required) Type of routing action. Valid values are <code>forward</code>, <code>redirect</code>, <code>fixed-response</code>, <code>authenticate-cognito</code> and <code>authenticate-oidc</code>.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>authenticate_cognito</code> - (Optional) Configuration block for using Amazon Cognito to authenticate users. Specify only when <code>type</code> is <code>authenticate-cognito</code>. See below.</li>
<li><code>authenticate_oidc</code> - (Optional) Configuration block for an identity provider that is compliant with OpenID Connect (OIDC). Specify only when <code>type</code> is <code>authenticate-oidc</code>. See below.</li>
<li><code>fixed_response</code> - (Optional) Information for creating an action that returns a custom HTTP response. Required if <code>type</code> is <code>fixed-response</code>.</li>
<li><code>forward</code> - (Optional) Configuration block for creating an action that distributes requests among one or more target groups. Specify only if <code>type</code> is <code>forward</code>. See below.</li>
<li><code>order</code> - (Optional) Order for the action. The action with the lowest value for order is performed first. Valid values are between <code>1</code> and <code>50000</code>. Defaults to the position in the list of actions.</li>
<li><code>redirect</code> - (Optional) Configuration block for creating a redirect action. Required if <code>type</code> is <code>redirect</code>. See below.</li>
<li><code>target_group_arn</code> - (Optional) ARN of the Target Group to which to route traffic. Specify only if <code>type</code> is <code>forward</code> and you want to route to a single target group. To route to one or more target groups, use a <code>forward</code> block instead. Can be specified with <code>forward</code> but ARNs must match.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/authenticate_cognito"></a><h4 id="authenticate_cognito">authenticate_cognito</h4>

<p>The following arguments are required:</p>

<ul>
<li><code>user_pool_arn</code> - (Required) ARN of the Cognito user pool.</li>
<li><code>user_pool_client_id</code> - (Required) ID of the Cognito user pool client.</li>
<li><code>user_pool_domain</code> - (Required) Domain prefix or fully-qualified domain name of the Cognito user pool.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>authentication_request_extra_params</code> - (Optional) Query parameters to include in the redirect request to the authorization endpoint. Max: 10. See below.</li>
<li><code>on_unauthenticated_request</code> - (Optional) Behavior if the user is not authenticated. Valid values are <code>deny</code>, <code>allow</code> and <code>authenticate</code>.</li>
<li><code>scope</code> - (Optional) Set of user claims to be requested from the IdP.</li>
<li><code>session_cookie_name</code> - (Optional) Name of the cookie used to maintain session information.</li>
<li><code>session_timeout</code> - (Optional) Maximum duration of the authentication session, in seconds.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/authentication_request_extra_params"></a><h5 id="authentication_request_extra_params">authentication_request_extra_params</h5>

<ul>
<li><code>key</code> - (Required) Key of query parameter.</li>
<li><code>value</code> - (Required) Value of query parameter.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/authenticate_oidc"></a><h4 id="authenticate_oidc">authenticate_oidc</h4>

<p>The following arguments are required:</p>

<ul>
<li><code>authorization_endpoint</code> - (Required) Authorization endpoint of the IdP.</li>
<li><code>client_id</code> - (Required) OAuth 2.0 client identifier.</li>
<li><code>client_secret</code> - (Required) OAuth 2.0 client secret.</li>
<li><code>issuer</code> - (Required) OIDC issuer identifier of the IdP.</li>
<li><code>token_endpoint</code> - (Required) Token endpoint of the IdP.</li>
<li><code>user_info_endpoint</code> - (Required) User info endpoint of the IdP.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>authentication_request_extra_params</code> - (Optional) Query parameters to include in the redirect request to the authorization endpoint. Max: 10.</li>
<li><code>on_unauthenticated_request</code> - (Optional) Behavior if the user is not authenticated. Valid values: <code>deny</code>, <code>allow</code> and <code>authenticate</code></li>
<li><code>scope</code> - (Optional) Set of user claims to be requested from the IdP.</li>
<li><code>session_cookie_name</code> - (Optional) Name of the cookie used to maintain session information.</li>
<li><code>session_timeout</code> - (Optional) Maximum duration of the authentication session, in seconds.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/fixed_response"></a><h4 id="fixed_response">fixed_response</h4>

<p>The following arguments are required:</p>

<ul>
<li><code>content_type</code> - (Required) Content type. Valid values are <code>text/plain</code>, <code>text/css</code>, <code>text/html</code>, <code>application/javascript</code> and <code>application/json</code>.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>message_body</code> - (Optional) Message body.</li>
<li><code>status_code</code> - (Optional) HTTP response code. Valid values are <code>2XX</code>, <code>4XX</code>, or <code>5XX</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/forward"></a><h4 id="forward">forward</h4>

<p>The following arguments are required:</p>

<ul>
<li><code>target_group</code> - (Required) Set of 1-5 target group blocks. See below.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>stickiness</code> - (Optional) Configuration block for target group stickiness for the rule. See below.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/target_group"></a><h5 id="target_group">target_group</h5>

<p>The following arguments are required:</p>

<ul>
<li><code>arn</code> - (Required) ARN of the target group.</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>weight</code> - (Optional) Weight. The range is 0 to 999.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/stickiness"></a><h5 id="stickiness">stickiness</h5>

<p>The following arguments are required:</p>

<ul>
<li><code>duration</code> - (Required) Time period, in seconds, during which requests from a client should be routed to the same target group. The range is 1-604800 seconds (7 days).</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>enabled</code> - (Optional) Whether target group stickiness is enabled. Default is <code>false</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/redirect"></a><h4 id="redirect">redirect</h4>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>You can reuse URI components using the following reserved keywords: <code>#{protocol}</code>, <code>#{host}</code>, <code>#{port}</code>, <code>#{path}</code> (the leading "/" is removed) and <code>#{query}</code>.</p>
</aside>

<p>The following arguments are required:</p>

<ul>
<li><code>status_code</code> - (Required) HTTP redirect code. The redirect is either permanent (<code>HTTP_301</code>) or temporary (<code>HTTP_302</code>).</li>
</ul>

<p>The following arguments are optional:</p>

<ul>
<li><code>host</code> - (Optional) Hostname. This component is not percent-encoded. The hostname can contain <code>#{host}</code>. Defaults to <code>#{host}</code>.</li>
<li><code>path</code> - (Optional) Absolute path, starting with the leading "/". This component is not percent-encoded. The path can contain #{host}, #{path}, and #{port}. Defaults to <code>/#{path}</code>.</li>
<li><code>port</code> - (Optional) Port. Specify a value from <code>1</code> to <code>65535</code> or <code>#{port}</code>. Defaults to <code>#{port}</code>.</li>
<li><code>protocol</code> - (Optional) Protocol. Valid values are <code>HTTP</code>, <code>HTTPS</code>, or <code>#{protocol}</code>. Defaults to <code>#{protocol}</code>.</li>
<li><code>query</code> - (Optional) Query parameters, URL-encoded when necessary, but not percent-encoded. Do not include the leading "?". Defaults to <code>#{query}</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/mutual_authentication"></a><h3 id="mutual_authentication">mutual_authentication</h3>

<ul>
<li><code>advertise_trust_store_ca_names</code> - (Optional) Valid values are <code>off</code> and <code>on</code>.</li>
<li><code>ignore_client_certificate_expiry</code> - (Optional) Whether client certificate expiry is ignored. Default is <code>false</code>.</li>
<li><code>mode</code> - (Required) Valid values are <code>off</code>, <code>verify</code> and <code>passthrough</code>.</li>
<li><code>trust_store_arn</code> - (Required) ARN of the elbv2 Trust Store.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attribute%20Reference"></a><h2 id="attribute-reference">Attribute Reference</h2>

<p>This resource exports the following attributes in addition to the arguments above:</p>

<ul>
<li><code>arn</code> - ARN of the listener (matches <code>id</code>).</li>
<li><code>id</code> - ARN of the listener (matches <code>arn</code>).</li>
<li><code>tags_all</code> - A map of tags assigned to the resource, including those inherited from the provider <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block"><code>default_tags</code> configuration block</a>.</li>
</ul>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>When importing a listener with a forward-type default action, you must include both a top-level target group ARN and a <code>forward</code> block with a <code>target_group</code> and <code>arn</code> to avoid import differences.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import listeners using their ARN. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb_listener.front_end</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"arn:aws:elasticloadbalancing:us-west-2:187416307283:listener/app/front-end-alb/8e4497da625e2d8a/9ab28ade35828f96"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Using <code>terraform import</code>, import listeners using their ARN. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="gp">% </span>terraform import aws_lb_listener.front_end arn:aws:elasticloadbalancing:us-west-2:187416307283:listener/app/front-end-alb/8e4497da625e2d8a/9ab28ade35828f96
</code></pre></div>

            
        
    </body></html>
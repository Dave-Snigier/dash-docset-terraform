<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/transfer_agreement --><head>
                <title>awscc_transfer_agreement</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_transfer_agreement-resource">awscc_transfer_agreement (Resource)</h1>

<p>Resource Type definition for AWS::Transfer::Agreement</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/AWS%20Transfer%20Agreement%20Setup"></a><h3 id="aws-transfer-agreement-setup">AWS Transfer Agreement Setup</h3>

<p>Creates an AWS Transfer Agreement with supporting SFTP server and required profiles, enabling secure file transfer between local and partner entities using AWS Transfer Family service.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS account ID and region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># IAM role for Transfer server to access S3</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"transfer_assume_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">effect</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"sts:AssumeRole"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="nb">principals</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Service"</span><span class="w"></span>
<span class="w">      </span><span class="na">identifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"transfer.amazonaws.com"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"transfer_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:ListBucket"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:GetBucketLocation"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arn:aws:s3:::example-bucket"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:PutObject"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:GetObject"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:DeleteObject"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arn:aws:s3:::example-bucket/*"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create IAM role for Transfer Agreement</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"transfer_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"transfer-agreement-role"</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="nf">jsondecode</span><span class="p">(</span><span class="nv">data.aws_iam_policy_document.transfer_assume_role.json</span><span class="p">))</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role_policy"</span><span class="w"> </span><span class="nv">"transfer_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"transfer-agreement-policy"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.transfer_role.role_name</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="nf">jsondecode</span><span class="p">(</span><span class="nv">data.aws_iam_policy_document.transfer_policy.json</span><span class="p">))</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Transfer Server</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_transfer_server"</span><span class="w"> </span><span class="nv">"sftp"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">endpoint_type</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"PUBLIC"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocols</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"SFTP"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">identity_provider_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SERVICE_MANAGED"</span><span class="w"></span>
<span class="w">  </span><span class="na">domain</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"S3"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Local Profile</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_transfer_profile"</span><span class="w"> </span><span class="nv">"local"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">as_2_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"LOCAL_AS2_ID"</span><span class="w"></span>
<span class="w">  </span><span class="na">profile_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"LOCAL"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Partner Profile</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_transfer_profile"</span><span class="w"> </span><span class="nv">"partner"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">as_2_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"PARTNER_AS2_ID"</span><span class="w"></span>
<span class="w">  </span><span class="na">profile_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PARTNER"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Transfer Agreement</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_transfer_agreement"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">access_role</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.transfer_role.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">base_directory</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"/transfer/agreement"</span><span class="w"></span>
<span class="w">  </span><span class="na">local_profile_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_transfer_profile.local.profile_id</span><span class="w"></span>
<span class="w">  </span><span class="na">partner_profile_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_transfer_profile.partner.profile_id</span><span class="w"></span>
<span class="w">  </span><span class="na">server_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_transfer_server.sftp.server_id</span><span class="w"></span>

<span class="w">  </span><span class="na">status</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>access_role</code> (String) Specifies the access role for the agreement.</li>
<li><code>base_directory</code> (String) Specifies the base directory for the agreement.</li>
<li><code>local_profile_id</code> (String) A unique identifier for the local profile.</li>
<li><code>partner_profile_id</code> (String) A unique identifier for the partner profile.</li>
<li><code>server_id</code> (String) A unique identifier for the server.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>description</code> (String) A textual description for the agreement.</li>
<li><code>enforce_message_signing</code> (String) Specifies whether to enforce an AS2 message is signed for this agreement.</li>
<li><code>preserve_filename</code> (String) Specifies whether to preserve the filename received for this agreement.</li>
<li><code>status</code> (String) Specifies the status of the agreement.</li>
<li><code>tags</code> (Attributes Set) Key-value pairs that can be used to group and search for agreements. Tags are metadata attached to agreements for any purpose. (see <a href="#nestedatt--tags">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>agreement_id</code> (String) A unique identifier for the agreement.</li>
<li><code>arn</code> (String) Specifies the unique Amazon Resource Name (ARN) for the agreement.</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
</ul>

<p><a id="nestedatt--tags"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20tags"></a><h3 id="nested-schema-for-tags">Nested Schema for <code>tags</code></h3>

<p>Optional:</p>

<ul>
<li><code>key</code> (String) The name assigned to the tag that you create.</li>
<li><code>value</code> (String) Contains one or more values that you assigned to the key name you create.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_transfer_agreement.example <span class="s2">"agreement_id|server_id"</span>
</code></pre></div>

            
        
    </body></html>
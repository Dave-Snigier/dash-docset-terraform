<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/common_issues --><head>
                <title>Google Provider Common Issues/FAQ</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google-provider-common-issuesfaq">Google Provider Common Issues/FAQ</h1>

<a class="dashAnchor" name="//apple_ref/cpp/Section/403%20Service%20API%20disabled"></a><h2 id="403-service-api-disabled">403 Service API disabled</h2>

<pre><code>&lt;service&gt; API has not been used in project &lt;project&gt; before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/&lt;service&gt;.googleapis.com/overview?project=&lt;project&gt; then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.
</code></pre>

<p>Services must be <a href="https://cloud.google.com/service-usage/docs/enable-disable">enabled in a project</a> before their service API can be used by the provider. The <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project_service"><code>google_project_service</code> resource</a> enables GCP service APIs with Terraform. </p>

<p>For <code>google_project_service</code> guidance and troubleshooting, see the <a href="../guides/google_project_service.html">advanced user guide</a>.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/API%20not%20enabled%20in%20a%20different%20project%20than%20the%20resource"></a><h2 id="api-not-enabled-in-a-different-project-than-the-resource">API not enabled in a different project than the resource</h2>

<p>Quota projects refer to the project used in requests to GCP APIs for the purpose of preconditions, quota, and billing. By default, a resource’s quota project is determined by the API and may be the project associated with your credentials, or the resource project depending on the API. For most resources, <code>user_project_override</code> (and optionally <code>billing_project</code>) can control the quota project used in API requests. See the <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">provider_reference documentation</a> for more information.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Handling%20default%20service%20accounts%20%28user-managed%29"></a><h2 id="handling-default-service-accounts-user-managed">Handling default service accounts (user-managed)</h2>

<p>Certain GCP services automatically create user-managed service accounts called default service accounts. These are granted a large set of permissions on project creation and are the responsibility of the user once they are created. See <a href="https://cloud.google.com/iam/docs/service-account-types#default">Google’s guide on default service accounts</a>.</p>

<p>Constraining the permissions or <a href="https://github.com/terraform-google-modules/terraform-google-project-factory/blob/master/docs/FAQ.md#why-do-you-delete-the-default-service-account">replacing</a> the default service accounts entirely may be a suitable form of management. The Google provider offers the <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project_default_service_accounts">google_project_default_service_accounts resource</a> as a way to manage default service accounts within Terraform.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Handling%20Google-managed%20service%20accounts"></a><h2 id="handling-google-managed-service-accounts">Handling Google-managed service accounts</h2>

<p>Some services create service accounts that are fully managed by Google. These exist outside of user projects, so they do not appear when viewing a project’s service accounts. See Google’s information on <a href="https://cloud.google.com/iam/docs/service-account-types#default">Google-managed service accounts</a>.</p>

<p>The Google provider offers the <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/project_service_identity">google_project_service_identity resource</a>, enabling access to the email address of Google-managed service accounts per service.</p>

            
        
    </body></html>
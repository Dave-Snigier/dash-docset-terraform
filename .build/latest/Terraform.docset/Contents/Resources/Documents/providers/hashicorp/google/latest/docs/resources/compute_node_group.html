<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_node_group --><head>
                <title>google_compute_node_group</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_compute_node_group">google_compute_node_group</h1>

<p>Represents a NodeGroup resource to manage a group of sole-tenant nodes.</p>

<p>To get more information about NodeGroup, see:</p>

<ul>
<li><a href="https://cloud.google.com/compute/docs/reference/rest/v1/nodeGroups">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/compute/docs/nodes/">Sole-Tenant Nodes</a></li>
</ul></li>
</ul>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=node_group_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Node%20Group%20Basic"></a><h2 id="example-usage-node-group-basic">Example Usage - Node Group Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_template"</span><span class="w"> </span><span class="nv">"soletenant-tmpl"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-tmpl"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">node_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n1-node-96-624"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_group"</span><span class="w"> </span><span class="nv">"nodes"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-group"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-f"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example google_compute_node_group for Terraform Google Provider"</span><span class="w"></span>

<span class="w">  </span><span class="na">initial_size</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">node_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_node_template.soletenant-tmpl.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=node_group_maintenance_interval&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Node%20Group%20Maintenance%20Interval"></a><h2 id="example-usage-node-group-maintenance-interval">Example Usage - Node Group Maintenance Interval</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_template"</span><span class="w"> </span><span class="nv">"soletenant-tmpl"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-tmpl"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">node_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"c2-node-60-240"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_group"</span><span class="w"> </span><span class="nv">"nodes"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-group"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-a"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example google_compute_node_group for Terraform Google Provider"</span><span class="w"></span>

<span class="w">  </span><span class="na">initial_size</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">node_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_node_template.soletenant-tmpl.id</span><span class="w"></span>

<span class="w">  </span><span class="na">maintenance_interval</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"RECURRENT"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=node_group_autoscaling_policy&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Node%20Group%20Autoscaling%20Policy"></a><h2 id="example-usage-node-group-autoscaling-policy">Example Usage - Node Group Autoscaling Policy</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_template"</span><span class="w"> </span><span class="nv">"soletenant-tmpl"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-tmpl"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">node_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n1-node-96-624"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_group"</span><span class="w"> </span><span class="nv">"nodes"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-group"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-f"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example google_compute_node_group for Terraform Google Provider"</span><span class="w"></span>
<span class="w">  </span><span class="na">maintenance_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RESTART_IN_PLACE"</span><span class="w"></span>
<span class="w">  </span><span class="nb">maintenance_window</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"08:00"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">initial_size</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">node_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_node_template.soletenant-tmpl.id</span><span class="w"></span>
<span class="w">  </span><span class="nb">autoscaling_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">mode</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"ONLY_SCALE_OUT"</span><span class="w"></span>
<span class="w">    </span><span class="na">min_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">    </span><span class="na">max_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Node%20Group%20Share%20Settings"></a><h2 id="example-usage-node-group-share-settings">Example Usage - Node Group Share Settings</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_project"</span><span class="w"> </span><span class="nv">"guest_project"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"project-id"</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"project-name"</span><span class="w"></span>
<span class="w">  </span><span class="na">org_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"123456789"</span><span class="w"></span>
<span class="w">  </span><span class="na">deletion_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_template"</span><span class="w"> </span><span class="nv">"soletenant-tmpl"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-tmpl"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="na">node_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n1-node-96-624"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_node_group"</span><span class="w"> </span><span class="nv">"nodes"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"soletenant-group"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-f"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example google_compute_node_group for Terraform Google Provider"</span><span class="w"></span>

<span class="w">  </span><span class="na">initial_size</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">node_template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_node_template.soletenant-tmpl.id</span><span class="w"></span>

<span class="w">  </span><span class="nb">share_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">share_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SPECIFIC_PROJECTS"</span><span class="w"></span>
<span class="w">    </span><span class="nb">project_map</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_project.guest_project.project_id</span><span class="w"></span>
<span class="w">      </span><span class="na">project_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_project.guest_project.project_id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>node_template</code> -
(Required)
The URL of the node template to which this node group belongs.</li>
</ul>

<hr/>

<ul>
<li><p><code>description</code> -
(Optional)
An optional textual description of the resource.</p></li>
<li><p><code>name</code> -
(Optional)
Name of the resource.</p></li>
<li><p><code>initial_size</code> -
(Optional)
The initial number of nodes in the node group. One of <code>initial_size</code> or <code>autoscaling_policy</code> must be configured on resource creation.</p></li>
<li><p><code>maintenance_policy</code> -
(Optional)
Specifies how to handle instances when a node in the group undergoes maintenance. Set to one of: DEFAULT, RESTART_IN_PLACE, or MIGRATE_WITHIN_NODE_GROUP. The default value is DEFAULT.</p></li>
<li><p><code>maintenance_window</code> -
(Optional)
contains properties for the timeframe of maintenance
Structure is <a href="#nested_maintenance_window">documented below</a>.</p></li>
<li><p><code>autoscaling_policy</code> -
(Optional)
If you use sole-tenant nodes for your workloads, you can use the node
group autoscaler to automatically manage the sizes of your node groups.
One of <code>initial_size</code> or <code>autoscaling_policy</code> must be configured on resource creation.
Structure is <a href="#nested_autoscaling_policy">documented below</a>.</p></li>
<li><p><code>share_settings</code> -
(Optional)
Share settings for the node group.
Structure is <a href="#nested_share_settings">documented below</a>.</p></li>
<li><p><code>maintenance_interval</code> -
(Optional, <a href="https://terraform.io/docs/providers/google/guides/provider_versions.html">Beta</a>)
Specifies the frequency of planned maintenance events. Set to one of the following:</p>

<ul>
<li>AS_NEEDED: Hosts are eligible to receive infrastructure and hypervisor updates as they become available.</li>
<li>RECURRENT: Hosts receive planned infrastructure and hypervisor updates on a periodic basis, but not more frequently than every 28 days. This minimizes the number of planned maintenance operations on individual hosts and reduces the frequency of disruptions, both live migrations and terminations, on individual VMs.
Possible values are: <code>AS_NEEDED</code>, <code>RECURRENT</code>.</li>
</ul></li>
<li><p><code>zone</code> -
(Optional)
Zone where this node group is located</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_maintenance_window"></a>The <code>maintenance_window</code> block supports:</p>

<ul>
<li><code>start_time</code> -
(Required)
instances.start time of the window. This must be in UTC format that resolves to one of 00:00, 04:00, 08:00, 12:00, 16:00, or 20:00. For example, both 13:00-5 and 08:00 are valid.</li>
</ul>

<p><a name="nested_autoscaling_policy"></a>The <code>autoscaling_policy</code> block supports:</p>

<ul>
<li><p><code>mode</code> -
(Required)
The autoscaling mode. Set to one of the following:</p>

<ul>
<li>OFF: Disables the autoscaler.</li>
<li>ON: Enables scaling in and scaling out.</li>
<li>ONLY_SCALE_OUT: Enables only scaling out.
You must use this mode if your node groups are configured to
restart their hosted VMs on minimal servers.
Possible values are: <code>OFF</code>, <code>ON</code>, <code>ONLY_SCALE_OUT</code>.</li>
</ul></li>
<li><p><code>min_nodes</code> -
(Optional)
Minimum size of the node group. Must be less
than or equal to max-nodes. The default value is 0.</p></li>
<li><p><code>max_nodes</code> -
(Required)
Maximum size of the node group. Set to a value less than or equal
to 100 and greater than or equal to min-nodes.</p></li>
</ul>

<p><a name="nested_share_settings"></a>The <code>share_settings</code> block supports:</p>

<ul>
<li><p><code>share_type</code> -
(Required)
Node group sharing type.
Possible values are: <code>ORGANIZATION</code>, <code>SPECIFIC_PROJECTS</code>, <code>LOCAL</code>.</p></li>
<li><p><code>project_map</code> -
(Optional)
A map of project id and project config. This is only valid when shareType's value is SPECIFIC_PROJECTS.
Structure is <a href="#nested_share_settings_project_map">documented below</a>.</p></li>
</ul>

<p><a name="nested_share_settings_project_map"></a>The <code>project_map</code> block supports:</p>

<ul>
<li><p><code>id</code> - (Required) The identifier for this object. Format specified above.</p></li>
<li><p><code>project_id</code> -
(Required)
The project id/number should be the same as the key of this project config in the project map.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/zones/{{zone}}/nodeGroups/{{name}}</code></p></li>
<li><p><code>creation_timestamp</code> -
Creation timestamp in RFC3339 text format.</p></li>
<li><p><code>size</code> -
The total number of nodes in the node group.</p></li>
<li><code>self_link</code> - The URI of the created resource.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>NodeGroup can be imported using any of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/zones/{{zone}}/nodeGroups/{{name}}</code></li>
<li><code>{{project}}/{{zone}}/{{name}}</code></li>
<li><code>{{zone}}/{{name}}</code></li>
<li><code>{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import NodeGroup using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/zones/{{zone}}/nodeGroups/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_node_group.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, NodeGroup can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_compute_node_group.default projects/{{project}}/zones/{{zone}}/nodeGroups/{{name}}
$ terraform import google_compute_node_group.default {{project}}/{{zone}}/{{name}}
$ terraform import google_compute_node_group.default {{zone}}/{{name}}
$ terraform import google_compute_node_group.default {{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
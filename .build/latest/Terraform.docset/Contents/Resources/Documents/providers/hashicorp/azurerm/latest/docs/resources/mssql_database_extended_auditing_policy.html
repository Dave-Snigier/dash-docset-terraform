<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/mssql_database_extended_auditing_policy --><head>
                <title>azurerm_mssql_database_extended_auditing_policy</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="azurerm_mssql_database_extended_auditing_policy">azurerm_mssql_database_extended_auditing_policy</h1>

<p>Manages a MS SQL Database Extended Auditing Policy.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">provider</span><span class="w"> </span><span class="nv">"azurerm"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">features</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_resource_group"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-resources"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"West Europe"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_mssql_server"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                         </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-sqlserver"</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_group_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_resource_group.example.name</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_resource_group.example.location</span><span class="w"></span>
<span class="w">  </span><span class="na">version</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="s2">"12.0"</span><span class="w"></span>
<span class="w">  </span><span class="na">administrator_login</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"missadministrator"</span><span class="w"></span>
<span class="w">  </span><span class="na">administrator_login_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AdminPassword123!"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_mssql_database"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-db"</span><span class="w"></span>
<span class="w">  </span><span class="na">server_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_mssql_server.example.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_storage_account"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"examplesa"</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_group_name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_resource_group.example.name</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_resource_group.example.location</span><span class="w"></span>
<span class="w">  </span><span class="na">account_tier</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"Standard"</span><span class="w"></span>
<span class="w">  </span><span class="na">account_replication_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"LRS"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"azurerm_mssql_database_extended_auditing_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">database_id</span><span class="w">                             </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_mssql_database.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">storage_endpoint</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_storage_account.example.primary_blob_endpoint</span><span class="w"></span>
<span class="w">  </span><span class="na">storage_account_access_key</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_storage_account.example.primary_access_key</span><span class="w"></span>
<span class="w">  </span><span class="na">storage_account_access_key_is_secondary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">  </span><span class="na">retention_in_days</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Arguments%20Reference"></a><h2 id="arguments-reference">Arguments Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>database_id</code> - (Required) The ID of the SQL database to set the extended auditing policy. Changing this forces a new resource to be created.</p></li>
<li><p><code>enabled</code> - (Optional) Whether to enable the extended auditing policy. Possible values are <code>true</code> and <code>false</code>. Defaults to <code>true</code>.</p></li>
</ul>

<p>-&gt;<strong>NOTE:</strong>  If <code>enabled</code> is <code>true</code>, <code>storage_endpoint</code> or <code>log_monitoring_enabled</code> are required.</p>

<ul>
<li><p><code>storage_endpoint</code> - (Optional) The blob storage endpoint (e.g. <a href="https://example.blob.core.windows.net">https://example.blob.core.windows.net</a>). This blob storage will hold all extended auditing logs.</p></li>
<li><p><code>retention_in_days</code> - (Optional) The number of days to retain logs for in the storage account. Defaults to <code>0</code>.</p></li>
<li><p><code>storage_account_access_key</code> - (Optional) The access key to use for the auditing storage account.</p></li>
<li><p><code>storage_account_access_key_is_secondary</code> - (Optional) Is <code>storage_account_access_key</code> value the storage's secondary key?</p></li>
<li><p><code>log_monitoring_enabled</code> - (Optional) Enable audit events to Azure Monitor? Defaults to <code>true</code>.</p></li>
</ul>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>To enable sending audit events to Log Analytics, please refer to the example which can be found in <a href="https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/sql-azure/sql_server_auditing_log_analytics">the <code>./examples/sql-azure/sql_auditing_log_analytics</code> directory within the GitHub Repository</a>.  To enable sending server audit events to Log Analytics, please enable the master database to send audit events to Log Analytics. To enable audit events to Eventhub, please refer to the example which can be found in <a href="https://github.com/hashicorp/terraform-provider-azurerm/tree/main/examples/sql-azure/sql_auditing_eventhub">the <code>./examples/sql-azure/sql_auditing_eventhub</code> directory within the GitHub Repository</a>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the Arguments listed above - the following Attributes are exported:</p>

<ul>
<li><code>id</code> - The ID of the MS SQL Database Extended Auditing Policy.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://www.terraform.io/language/resources/syntax#operation-timeouts">timeouts</a> for certain actions:</p>

<ul>
<li><code>create</code> - (Defaults to 30 minutes) Used when creating the MS SQL Database Extended Auditing Policy.</li>
<li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the MS SQL Database Extended Auditing Policy.</li>
<li><code>update</code> - (Defaults to 30 minutes) Used when updating the MS SQL Database Extended Auditing Policy.</li>
<li><code>delete</code> - (Defaults to 30 minutes) Used when deleting the MS SQL Database Extended Auditing Policy.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>MS SQL Database Extended Auditing Policies can be imported using the <code>resource id</code>, e.g.</p>

<div class="codehilite"><pre><span></span><code>terraform import azurerm_mssql_database_extended_auditing_policy.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.Sql/servers/sqlServer1/databases/db1/extendedAuditingSettings/default
</code></pre></div>

            
        
    </body></html>
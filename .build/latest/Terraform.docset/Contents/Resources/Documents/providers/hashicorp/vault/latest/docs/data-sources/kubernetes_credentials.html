<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/vault/latest/docs/data-sources/kubernetes_credentials --><head>
                <title>vault_kubernetes_service_account_token</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="vault_kubernetes_service_account_token">vault_kubernetes_service_account_token</h1>

<p>Generates service account tokens for Kubernetes.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>Important</em>
    <p>All data retrieved from Vault will be written in cleartext to state file generated by Terraform, will appear in the console output when Terraform runs, and may be included in plan files if secrets are interpolated into any resource attributes. Protect these artifacts accordingly. See <a href="../index.html">the main provider documentation</a> for more details.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_kubernetes_secret_backend"</span><span class="w"> </span><span class="nv">"config"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="s2">"kubernetes"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"kubernetes secrets engine description"</span><span class="w"></span>
<span class="w">  </span><span class="na">kubernetes_host</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://127.0.0.1:61233"</span><span class="w"></span>
<span class="w">  </span><span class="na">kubernetes_ca_cert</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">file</span><span class="p">(</span><span class="s2">"/path/to/cert"</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="na">service_account_jwt</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nf">file</span><span class="p">(</span><span class="s2">"/path/to/token"</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="na">disable_local_ca_jwt</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_kubernetes_secret_backend_role"</span><span class="w"> </span><span class="nv">"role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">backend</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_kubernetes_secret_backend.config.path</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="s2">"service-account-name-role"</span><span class="w"></span>
<span class="w">  </span><span class="na">allowed_kubernetes_namespaces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"*"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">token_max_ttl</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="m">43200</span><span class="w"></span>
<span class="w">  </span><span class="na">token_default_ttl</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="m">21600</span><span class="w"></span>
<span class="w">  </span><span class="na">service_account_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"test-service-account-with-generated-token"</span><span class="w"></span>

<span class="w">  </span><span class="nb">extra_labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"abc123"</span><span class="w"></span>
<span class="w">    </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"some_name"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">extra_annotations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">env</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"development"</span><span class="w"></span>
<span class="w">    </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"earth"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"vault_kubernetes_service_account_token"</span><span class="w"> </span><span class="nv">"token"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">backend</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_kubernetes_secret_backend.config.path</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_kubernetes_secret_backend_role.role.name</span><span class="w"></span>
<span class="w">  </span><span class="na">kubernetes_namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test"</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster_role_binding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"1h"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>namespace</code> - (Optional) The namespace of the target resource.
The value should not contain leading or trailing forward slashes.
The <code>namespace</code> is always relative to the provider's configured <a href="../index.html#namespace">namespace</a>.
<em>Available only for Vault Enterprise</em>.</p></li>
<li><p><code>backend</code> - (Required) The Kubernetes secret backend to generate service account 
tokens from.</p></li>
<li><p><code>role</code> - (Required) The name of the Kubernetes secret backend role to generate service 
account tokens from.</p></li>
<li><p><code>kubernetes_namespace</code> - (Required) The name of the Kubernetes namespace in which to 
generate the credentials.</p></li>
<li><p><code>cluster_role_binding</code> - (Optional) If true, generate a ClusterRoleBinding to grant 
permissions across the whole cluster instead of within a namespace.</p></li>
<li><p><code>ttl</code> - (Optional) The TTL of the generated Kubernetes service account token, specified in 
seconds or as a Go duration format string.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments above, the following attributes are exported:</p>

<ul>
<li><p><code>service_account_name</code> - The name of the service account associated with the token.</p></li>
<li><p><code>service_account_namespace</code> - The Kubernetes namespace that the service account resides in.</p></li>
<li><p><code>service_account_token</code> - The Kubernetes service account token.</p></li>
<li><p><code>lease_id</code> - The lease identifier assigned by Vault.</p></li>
<li><p><code>lease_duration</code> - The duration of the lease in seconds.</p></li>
<li><p><code>lease_renewable</code> - True if the duration of this lease can be extended through renewal.</p></li>
</ul>

            
        
    </body></html>
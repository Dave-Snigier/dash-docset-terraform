<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/ecs_task_definition --><head>
                <title>awscc_ecs_task_definition</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_ecs_task_definition-resource">awscc_ecs_task_definition (Resource)</h1>

<p>Registers a new task definition from the supplied <code>family</code> and <code>containerDefinitions</code>. Optionally, you can add data volumes to your containers with the <code>volumes</code> parameter. For more information about task definition parameters and defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
 You can specify a role for your task with the <code>taskRoleArn</code> parameter. When you specify a role for a task, its containers can then use the latest versions of the CLI or SDKs to make API requests to the AWS services that are specified in the policy that's associated with the role. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html">IAM Roles for Tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
 You can specify a Docker networking mode for the containers in your task definition with the <code>networkMode</code> parameter. If you specify the <code>awsvpc</code> network mode, the task is allocated an elastic network interface, and you must specify a <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_NetworkConfiguration.html">NetworkConfiguration</a> when you create a service or run a task with the task definition. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-networking.html">Task Networking</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
  In the following example or examples, the Authorization header contents (<code>AUTHPARAMS</code>) must be replaced with an AWS Signature Version 4 signature. For more information, see <a href="https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html">Signature Version 4 Signing Process</a> in the <em>General Reference</em>.
 You only need to learn how to sign HTTP requests if you intend to create them manually. When you use the <a href="https://docs.aws.amazon.com/cli/"></a> or one of the <a href="https://docs.aws.amazon.com/tools/">SDKs</a> to make requests to AWS, these tools automatically sign the requests for you, with the access key that you specify when you configure the tools. When you use these tools, you don't have to sign requests yourself.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Fargate%20Task%20Definition%20with%20NGINX%20Container"></a><h3 id="fargate-task-definition-with-nginx-container">Fargate Task Definition with NGINX Container</h3>

<p>Creates an ECS Fargate task definition for running an NGINX container with required IAM roles, CloudWatch logging configuration, and network settings.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS region and account details</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Task execution role and policy</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"execution_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="nb">Principal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">Service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ecs-tasks.amazonaws.com"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_policy_arns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECS task execution role"</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"ecs-task-execution-role-example"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Task role and policy</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"task_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="na">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="w"></span>
<span class="w">    </span><span class="na">Statement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sts:AssumeRole"</span><span class="w"></span>
<span class="w">        </span><span class="na">Effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">        </span><span class="nb">Principal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">Service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ecs-tasks.amazonaws.com"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECS task role"</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"ecs-task-role-example"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Task definition</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_ecs_task_definition"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-task-definition"</span><span class="w"></span>
<span class="w">  </span><span class="na">requires_compatibilities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">"FARGATE"</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">execution_role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.execution_role.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">task_role_arn</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.task_role.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">cpu</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"256"</span><span class="w"></span>
<span class="w">  </span><span class="na">memory</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"512"</span><span class="w"></span>
<span class="w">  </span><span class="na">network_mode</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"awsvpc"</span><span class="w"></span>

<span class="w">  </span><span class="nb">runtime_platform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">operating_system_family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"LINUX"</span><span class="w"></span>
<span class="w">    </span><span class="na">cpu_architecture</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"X86_64"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">container_definitions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"nginx"</span><span class="w"></span>
<span class="w">      </span><span class="na">image</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"nginx:latest"</span><span class="w"></span>
<span class="w">      </span><span class="na">essential</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">      </span><span class="na">port_mappings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">container_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="w">          </span><span class="na">protocol</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>

<span class="w">      </span><span class="na">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"ENVIRONMENT"</span><span class="w"></span>
<span class="w">          </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>

<span class="w">      </span><span class="nb">log_configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">log_driver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"awslogs"</span><span class="w"></span>
<span class="w">        </span><span class="nb">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s2">"awslogs-group"</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"/ecs/example-task-definition"</span><span class="w"></span>
<span class="w">          </span><span class="s2">"awslogs-region"</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_region.current.name</span><span class="w"></span>
<span class="w">          </span><span class="s2">"awslogs-stream-prefix"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"nginx"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>container_definitions</code> (Attributes Set) A list of container definitions in JSON format that describe the different containers that make up your task. For more information about container definition parameters and defaults, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>. (see <a href="#nestedatt--container_definitions">below for nested schema</a>)</li>
<li><code>cpu</code> (String) The number of <code>cpu</code> units used by the task. If you use the EC2 launch type, this field is optional. Any value can be used. If you use the Fargate launch type, this field is required. You must use one of the following values. The value that you choose determines your range of valid values for the <code>memory</code> parameter.
If you use the EC2 launch type, this field is optional. Supported values are between <code>128</code> CPU units (<code>0.125</code> vCPUs) and <code>10240</code> CPU units (<code>10</code> vCPUs).
The CPU units cannot be less than 1 vCPU when you use Windows containers on Fargate.
<ul>
<li>256 (.25 vCPU) - Available <code>memory</code> values: 512 (0.5 GB), 1024 (1 GB), 2048 (2 GB)</li>
<li>512 (.5 vCPU) - Available <code>memory</code> values: 1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB)</li>
<li>1024 (1 vCPU) - Available <code>memory</code> values: 2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7 GB), 8192 (8 GB)</li>
<li>2048 (2 vCPU) - Available <code>memory</code> values: 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB)</li>
<li>4096 (4 vCPU) - Available <code>memory</code> values: 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB)</li>
<li>8192 (8 vCPU) - Available <code>memory</code> values: 16 GB and 60 GB in 4 GB increments
This option requires Linux platform <code>1.4.0</code> or later.</li>
<li>16384 (16vCPU) - Available <code>memory</code> values: 32GB and 120 GB in 8 GB increments
This option requires Linux platform <code>1.4.0</code> or later.</li>
</ul></li>
<li><code>enable_fault_injection</code> (Boolean) Enables fault injection and allows for fault injection requests to be accepted from the task's containers. The default value is <code>false</code>.</li>
<li><code>ephemeral_storage</code> (Attributes) The ephemeral storage settings to use for tasks run with the task definition. (see <a href="#nestedatt--ephemeral_storage">below for nested schema</a>)</li>
<li><code>execution_role_arn</code> (String) The Amazon Resource Name (ARN) of the task execution role that grants the Amazon ECS container agent permission to make AWS API calls on your behalf. For informationabout the required IAM roles for Amazon ECS, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/security-ecs-iam-role-overview.html">IAM roles for Amazon ECS</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</li>
<li><code>family</code> (String) The name of a family that this task definition is registered to. Up to 255 letters (uppercase and lowercase), numbers, hyphens, and underscores are allowed.
A family groups multiple versions of a task definition. Amazon ECS gives the first task definition that you registered to a family a revision number of 1. Amazon ECS gives sequential revision numbers to each task definition that you add.
To use revision numbers when you update a task definition, specify this property. If you don't specify a value, CFNlong generates a new task definition each time that you update it.</li>
<li><code>inference_accelerators</code> (Attributes Set) The Elastic Inference accelerators to use for the containers in the task. (see <a href="#nestedatt--inference_accelerators">below for nested schema</a>)</li>
<li><p><code>ipc_mode</code> (String) The IPC resource namespace to use for the containers in the task. The valid values are <code>host</code>, <code>task</code>, or <code>none</code>. If <code>host</code> is specified, then all containers within the tasks that specified the <code>host</code> IPC mode on the same container instance share the same IPC resources with the host Amazon EC2 instance. If <code>task</code> is specified, all containers within the specified task share the same IPC resources. If <code>none</code> is specified, then IPC resources within the containers of a task are private and not shared with other containers in a task or on the container instance. If no value is specified, then the IPC resource namespace sharing depends on the Docker daemon setting on the container instance.
If the <code>host</code> IPC mode is used, be aware that there is a heightened risk of undesired IPC namespace expose.
If you are setting namespaced kernel parameters using <code>systemControls</code> for the containers in the task, the following will apply to your IPC resource namespace. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html">System Controls</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</p>

<ul>
<li>For tasks that use the <code>host</code> IPC mode, IPC namespace related <code>systemControls</code> are not supported.</li>
<li>For tasks that use the <code>task</code> IPC mode, IPC namespace related <code>systemControls</code> will apply to all containers within a task.</li>
</ul>

<p>This parameter is not supported for Windows containers or tasks run on FARGATElong.</p></li>
<li><code>memory</code> (String) The amount (in MiB) of memory used by the task.
If your tasks runs on Amazon EC2 instances, you must specify either a task-level memory value or a container-level memory value. This field is optional and any value can be used. If a task-level memory value is specified, the container-level memory value is optional. For more information regarding container-level memory and memory reservation, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ContainerDefinition.html">ContainerDefinition</a>.
If your tasks runs on FARGATElong, this field is required. You must use one of the following values. The value you choose determines your range of valid values for the <code>cpu</code> parameter.


md5-faaa3c9d674de7ebb46b440e16f040a2



<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>



md5-7779b9ddcdc9598e7ad0d0a8f156ee38



<a id="nestedatt--container_definitions"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions"></a><h3 id="nested-schema-for-container_definitions">Nested Schema for <code>container_definitions</code></h3>

Optional:



md5-ed3c7064683b77b4096fff2fe020a255



<p>On Windows container instances, the CPU limit is enforced as an absolute limit, or a quota. Windows containers only have access to the specified amount of CPU that's described in the task definition. A null or zero CPU value is passed to Docker as <code>0</code>, which Windows interprets as 1% of one CPU.</p></li>
<li><code>credential_specs</code> (List of String) A list of ARNs in SSM or Amazon S3 to a credential spec (<code>CredSpec</code>) file that configures the container for Active Directory authentication. We recommend that you use this parameter instead of the <code>dockerSecurityOptions</code>. The maximum number of ARNs is 1.
There are two formats for each ARN.


md5-86c8caea8535ea740ce8a34cd2328a0b



<p>If the task definition is used in a blue/green deployment that uses <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-codedeploy-deploymentgroup-bluegreendeploymentconfiguration.html">AWS::CodeDeploy::DeploymentGroup BlueGreenDeploymentConfiguration</a>, the <code>dependsOn</code> parameter is not supported. For more information see <a href="https://docs.aws.amazon.com/https://github.com/aws-cloudformation/cloudformation-coverage-roadmap/issues/680">Issue #680</a> on the on the GitHub website. (see <a href="#nestedatt--container_definitions--depends_on">below for nested schema</a>)</p></li>
<li><code>disable_networking</code> (Boolean) When this parameter is true, networking is off within the container. This parameter maps to <code>NetworkDisabled</code> in the docker container create command.
This parameter is not supported for Windows containers.</li>
<li><code>dns_search_domains</code> (List of String) A list of DNS search domains that are presented to the container. This parameter maps to <code>DnsSearch</code> in the docker container create command and the <code>--dns-search</code> option to docker run.
This parameter is not supported for Windows containers.</li>
<li><code>dns_servers</code> (List of String) A list of DNS servers that are presented to the container. This parameter maps to <code>Dns</code> in the docker container create command and the <code>--dns</code> option to docker run.
This parameter is not supported for Windows containers.</li>
<li><code>docker_labels</code> (Map of String) A key/value map of labels to add to the container. This parameter maps to <code>Labels</code> in the docker container create command and the <code>--label</code> option to docker run. This parameter requires version 1.18 of the Docker Remote API or greater on your container instance. To check the Docker Remote API version on your container instance, log in to your container instance and run the following command: <code>sudo docker version --format '{{.Server.APIVersion}}'</code></li>
<li><code>docker_security_options</code> (List of String) A list of strings to provide custom configuration for multiple security systems. This field isn't valid for containers in tasks using the Fargate launch type.
For Linux tasks on EC2, this parameter can be used to reference custom labels for SELinux and AppArmor multi-level security systems.
For any tasks on EC2, this parameter can be used to reference a credential spec file that configures a container for Active Directory authentication. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/windows-gmsa.html">Using gMSAs for Windows Containers</a> and <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/linux-gmsa.html">Using gMSAs for Linux Containers</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
This parameter maps to <code>SecurityOpt</code> in the docker container create command and the <code>--security-opt</code> option to docker run.
The Amazon ECS container agent running on a container instance must register with the <code>ECS_SELINUX_CAPABLE=true</code> or <code>ECS_APPARMOR_CAPABLE=true</code> environment variables before containers placed on that instance can use these security options. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-config.html">Amazon ECS Container Agent Configuration</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
Valid values: "no-new-privileges" | "apparmor:PROFILE" | "label:value" | "credentialspec:CredentialSpecFilePath"</li>
<li><code>entry_point</code> (List of String) Early versions of the Amazon ECS container agent don't properly handle <code>entryPoint</code> parameters. If you have problems using <code>entryPoint</code>, update your container agent or enter your commands and arguments as <code>command</code> array items instead.
The entry point that's passed to the container. This parameter maps to <code>Entrypoint</code> in the docker container create command and the <code>--entrypoint</code> option to docker run.</li>
<li><code>environment</code> (Attributes Set) The environment variables to pass to a container. This parameter maps to <code>Env</code> in the docker container create command and the <code>--env</code> option to docker run.
We don't recommend that you use plaintext environment variables for sensitive information, such as credential data. (see <a href="#nestedatt--container_definitions--environment">below for nested schema</a>)</li>
<li><code>environment_files</code> (Attributes List) A list of files containing the environment variables to pass to a container. This parameter maps to the <code>--env-file</code> option to docker run.
You can specify up to ten environment files. The file must have a <code>.env</code> file extension. Each line in an environment file contains an environment variable in <code>VARIABLE=VALUE</code> format. Lines beginning with <code>#</code> are treated as comments and are ignored.
If there are environment variables specified using the <code>environment</code> parameter in a container definition, they take precedence over the variables contained within an environment file. If multiple environment files are specified that contain the same variable, they're processed from the top down. We recommend that you use unique variable names. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/taskdef-envfiles.html">Specifying Environment Variables</a> in the <em>Amazon Elastic Container Service Developer Guide</em>. (see <a href="#nestedatt--container_definitions--environment_files">below for nested schema</a>)</li>
<li><code>essential</code> (Boolean) If the <code>essential</code> parameter of a container is marked as <code>true</code>, and that container fails or stops for any reason, all other containers that are part of the task are stopped. If the <code>essential</code> parameter of a container is marked as <code>false</code>, its failure doesn't affect the rest of the containers in a task. If this parameter is omitted, a container is assumed to be essential.
All tasks must have at least one essential container. If you have an application that's composed of multiple containers, group containers that are used for a common purpose into components, and separate the different components into multiple task definitions. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/application_architecture.html">Application Architecture</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</li>
<li><code>extra_hosts</code> (Attributes List) A list of hostnames and IP address mappings to append to the <code>/etc/hosts</code> file on the container. This parameter maps to <code>ExtraHosts</code> in the docker container create command and the <code>--add-host</code> option to docker run.
This parameter isn't supported for Windows containers or tasks that use the <code>awsvpc</code> network mode. (see <a href="#nestedatt--container_definitions--extra_hosts">below for nested schema</a>)</li>
<li><code>firelens_configuration</code> (Attributes) The FireLens configuration for the container. This is used to specify and configure a log router for container logs. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_firelens.html">Custom Log Routing</a> in the <em>Amazon Elastic Container Service Developer Guide</em>. (see <a href="#nestedatt--container_definitions--firelens_configuration">below for nested schema</a>)</li>
<li><code>health_check</code> (Attributes) The container health check command and associated configuration parameters for the container. This parameter maps to <code>HealthCheck</code> in the docker container create command and the <code>HEALTHCHECK</code> parameter of docker run. (see <a href="#nestedatt--container_definitions--health_check">below for nested schema</a>)</li>
<li><code>hostname</code> (String) The hostname to use for your container. This parameter maps to <code>Hostname</code> in the docker container create command and the <code>--hostname</code> option to docker run.
The <code>hostname</code> parameter is not supported if you're using the <code>awsvpc</code> network mode.</li>
<li><code>image</code> (String) The image used to start a container. This string is passed directly to the Docker daemon. By default, images in the Docker Hub registry are available. Other repositories are specified with either <code>repository-url/image:tag</code> or <code>repository-url/image@digest</code>. Up to 255 letters (uppercase and lowercase), numbers, hyphens, underscores, colons, periods, forward slashes, and number signs are allowed. This parameter maps to <code>Image</code> in the docker container create command and the <code>IMAGE</code> parameter of docker run.


md5-c47dd5afa5c8f3a948fb2d5c53fa1e6d



<p>For tasks using the EC2 launch type, your container instances require at least version <code>1.26.0</code> of the container agent to use a container start timeout value. However, we recommend using the latest container agent version. For information about checking your agent version and updating to the latest version, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-update.html">Updating the Amazon ECS Container Agent</a> in the <em>Amazon Elastic Container Service Developer Guide</em>. If you're using an Amazon ECS-optimized Linux AMI, your instance needs at least version <code>1.26.0-1</code> of the <code>ecs-init</code> package. If your container instances are launched from version <code>20190301</code> or later, then they contain the required versions of the container agent and <code>ecs-init</code>. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">Amazon ECS-optimized Linux AMI</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
The valid values for Fargate are 2-120 seconds.</p></li>
<li><p><code>stop_timeout</code> (Number) Time duration (in seconds) to wait before the container is forcefully killed if it doesn't exit normally on its own.
For tasks using the Fargate launch type, the task or service requires the following platforms:</p>

<ul>
<li>Linux platform version <code>1.3.0</code> or later.</li>
<li>Windows platform version <code>1.0.0</code> or later.</li>
</ul>

<p>For tasks that use the Fargate launch type, the max stop timeout value is 120 seconds and if the parameter is not specified, the default value of 30 seconds is used.
For tasks that use the EC2 launch type, if the <code>stopTimeout</code> parameter isn't specified, the value set for the Amazon ECS container agent configuration variable <code>ECS_CONTAINER_STOP_TIMEOUT</code> is used. If neither the <code>stopTimeout</code> parameter or the <code>ECS_CONTAINER_STOP_TIMEOUT</code> agent configuration variable are set, then the default values of 30 seconds for Linux containers and 30 seconds on Windows containers are used. Your container instances require at least version 1.26.0 of the container agent to use a container stop timeout value. However, we recommend using the latest container agent version. For information about checking your agent version and updating to the latest version, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-update.html">Updating the Amazon ECS Container Agent</a> in the <em>Amazon Elastic Container Service Developer Guide</em>. If you're using an Amazon ECS-optimized Linux AMI, your instance needs at least version 1.26.0-1 of the <code>ecs-init</code> package. If your container instances are launched from version <code>20190301</code> or later, then they contain the required versions of the container agent and <code>ecs-init</code>. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">Amazon ECS-optimized Linux AMI</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
The valid values for Fargate are 2-120 seconds.</p></li>
<li><code>system_controls</code> (Attributes List) A list of namespaced kernel parameters to set in the container. This parameter maps to <code>Sysctls</code> in the docker container create command and the <code>--sysctl</code> option to docker run. For example, you can configure <code>net.ipv4.tcp_keepalive_time</code> setting to maintain longer lived connections. (see <a href="#nestedatt--container_definitions--system_controls">below for nested schema</a>)</li>
<li><code>ulimits</code> (Attributes List) A list of <code>ulimits</code> to set in the container. This parameter maps to <code>Ulimits</code> in the <a href="https://docs.aws.amazon.com/https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.aws.amazon.com/https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a> and the <code>--ulimit</code> option to <a href="https://docs.aws.amazon.com/https://docs.docker.com/engine/reference/run/">docker run</a>. Valid naming values are displayed in the <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_Ulimit.html">Ulimit</a> data type. This parameter requires version 1.18 of the Docker Remote API or greater on your container instance. To check the Docker Remote API version on your container instance, log in to your container instance and run the following command: <code>sudo docker version --format '{{.Server.APIVersion}}'</code> 
This parameter is not supported for Windows containers. (see <a href="#nestedatt--container_definitions--ulimits">below for nested schema</a>)</li>
<li><p><code>user</code> (String) The user to use inside the container. This parameter maps to <code>User</code> in the docker container create command and the <code>--user</code> option to docker run.
When running tasks using the <code>host</code> network mode, don't run containers using the root user (UID 0). We recommend using a non-root user for better security.
You can specify the <code>user</code> using the following formats. If specifying a UID or GID, you must specify it as a positive integer.</p>

<ul>
<li><code>user</code> </li>
<li><code>user:group</code> </li>
<li><code>uid</code> </li>
<li><code>uid:gid</code> </li>
<li><code>user:gid</code> </li>
<li><code>uid:group</code> </li>
</ul>

<p>This parameter is not supported for Windows containers.</p></li>
<li><code>version_consistency</code> (String) Specifies whether Amazon ECS will resolve the container image tag provided in the container definition to an image digest. By default, the value is <code>enabled</code>. If you set the value for a container as <code>disabled</code>, Amazon ECS will not resolve the provided container image tag to a digest and will use the original image URI specified in the container definition for deployment. For more information about container image resolution, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/deployment-type-ecs.html#deployment-container-image-stability">Container image resolution</a> in the <em>Amazon ECS Developer Guide</em>.</li>
<li><code>volumes_from</code> (Attributes Set) Data volumes to mount from another container. This parameter maps to <code>VolumesFrom</code> in the docker container create command and the <code>--volumes-from</code> option to docker run. (see <a href="#nestedatt--container_definitions--volumes_from">below for nested schema</a>)</li>
<li><code>working_directory</code> (String) The working directory to run commands inside the container in. This parameter maps to <code>WorkingDir</code> in the docker container create command and the <code>--workdir</code> option to docker run.</li>
</ul>

<a id="nestedatt--container_definitions--depends_on"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.depends_on"></a><h3 id="nested-schema-for-container_definitionsdepends_on">Nested Schema for <code>container_definitions.depends_on</code></h3>

Optional:



md5-97f75fecae3a17576cf6aaba900f4d7c



<a id="nestedatt--container_definitions--environment"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.environment"></a><h3 id="nested-schema-for-container_definitionsenvironment">Nested Schema for <code>container_definitions.environment</code></h3>

Optional:



md5-5663ce72f25e0f40db007294c4fb4a1a



<a id="nestedatt--container_definitions--environment_files"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.environment_files"></a><h3 id="nested-schema-for-container_definitionsenvironment_files">Nested Schema for <code>container_definitions.environment_files</code></h3>

Optional:



md5-5ee5c1d1893a61aea8a2e01ae9bf053c



<a id="nestedatt--container_definitions--extra_hosts"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.extra_hosts"></a><h3 id="nested-schema-for-container_definitionsextra_hosts">Nested Schema for <code>container_definitions.extra_hosts</code></h3>

Optional:



md5-8801d2b59acd2993d4b9b5a036e584fb



<a id="nestedatt--container_definitions--firelens_configuration"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.firelens_configuration"></a><h3 id="nested-schema-for-container_definitionsfirelens_configuration">Nested Schema for <code>container_definitions.firelens_configuration</code></h3>

Optional:



md5-c0517d6592f05d36cfd1f72d760bb798



<a id="nestedatt--container_definitions--health_check"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.health_check"></a><h3 id="nested-schema-for-container_definitionshealth_check">Nested Schema for <code>container_definitions.health_check</code></h3>

Optional:



md5-16c97995c9e81c2785ef00b14065f9f6



<a id="nestedatt--container_definitions--linux_parameters"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.linux_parameters"></a><h3 id="nested-schema-for-container_definitionslinux_parameters">Nested Schema for <code>container_definitions.linux_parameters</code></h3>

Optional:



md5-7d055bb59cc36ccb2d05b94fab7677e3



<a id="nestedatt--container_definitions--linux_parameters--capabilities"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.linux_parameters.capabilities"></a><h3 id="nested-schema-for-container_definitionslinux_parameterscapabilities">Nested Schema for <code>container_definitions.linux_parameters.capabilities</code></h3>

Optional:



md5-6b8889840ddb9aecf58a1418055a779a



<a id="nestedatt--container_definitions--linux_parameters--devices"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.linux_parameters.devices"></a><h3 id="nested-schema-for-container_definitionslinux_parametersdevices">Nested Schema for <code>container_definitions.linux_parameters.devices</code></h3>

Optional:



md5-dd05766ce431157735465a1f5e23946a



<a id="nestedatt--container_definitions--linux_parameters--tmpfs"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.linux_parameters.tmpfs"></a><h3 id="nested-schema-for-container_definitionslinux_parameterstmpfs">Nested Schema for <code>container_definitions.linux_parameters.tmpfs</code></h3>

Optional:



md5-d57dbe3cbe3cbd03c91d9032a41f6912



<a id="nestedatt--container_definitions--log_configuration"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.log_configuration"></a><h3 id="nested-schema-for-container_definitionslog_configuration">Nested Schema for <code>container_definitions.log_configuration</code></h3>

Optional:



md5-a5be3209941812414db3981c40c9d5d6



<a id="nestedatt--container_definitions--log_configuration--secret_options"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.log_configuration.secret_options"></a><h3 id="nested-schema-for-container_definitionslog_configurationsecret_options">Nested Schema for <code>container_definitions.log_configuration.secret_options</code></h3>

Optional:



md5-2512dcaf893afeb44f88ed8f21065827



<a id="nestedatt--container_definitions--mount_points"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.mount_points"></a><h3 id="nested-schema-for-container_definitionsmount_points">Nested Schema for <code>container_definitions.mount_points</code></h3>

Optional:



md5-8d05c319d9333e00bef7a8adb53ab91f



<a id="nestedatt--container_definitions--port_mappings"></a>
<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.port_mappings"></a><h3 id="nested-schema-for-container_definitionsport_mappings">Nested Schema for <code>container_definitions.port_mappings</code></h3>

Optional:



md5-d741258860561a061352de37c753d18c



<p>You can call <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_DescribeTasks.html">DescribeTasks</a> to view the <code>hostPortRange</code> which are the host ports that are bound to the container ports.</p>
<li><p><code>host_port</code> (Number) The port number on the container instance to reserve for your container.
If you specify a <code>containerPortRange</code>, leave this field empty and the value of the <code>hostPort</code> is set as follows:</p>

<ul>
<li>For containers in a task with the <code>awsvpc</code> network mode, the <code>hostPort</code> is set to the same value as the <code>containerPort</code>. This is a static mapping strategy.</li>
<li>For containers in a task with the <code>bridge</code> network mode, the Amazon ECS agent finds open ports on the host and automatically binds them to the container ports. This is a dynamic mapping strategy.</li>
</ul>

<p></p><p>If you use containers in a task with the <code>awsvpc</code> or <code>host</code> network mode, the <code>hostPort</code> can either be left blank or set to the same value as the <code>containerPort</code>.
If you use containers in a task with the <code>bridge</code> network mode, you can specify a non-reserved host port for your container port mapping, or you can omit the <code>hostPort</code> (or set it to <code>0</code>) while specifying a <code>containerPort</code> and your container automatically receives a port in the ephemeral port range for your container instance operating system and Docker version.
The default ephemeral port range for Docker version 1.6.0 and later is listed on the instance under <code>/proc/sys/net/ipv4/ip_local_port_range</code>. If this kernel parameter is unavailable, the default ephemeral port range from 49153 through 65535 (Linux) or 49152 through 65535 (Windows) is used. Do not attempt to specify a host port in the ephemeral port range as these are reserved for automatic assignment. In general, ports below 32768 are outside of the ephemeral port range.
The default reserved ports are 22 for SSH, the Docker ports 2375 and 2376, and the Amazon ECS container agent ports 51678-51680. Any host port that was previously specified in a running task is also reserved while the task is running. That is, after a task stops, the host port is released. The current reserved ports are displayed in the <code>remainingResources</code> of <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_DescribeContainerInstances.html">DescribeContainerInstances</a> output. A container instance can have up to 100 reserved ports at a time. This number includes the default reserved ports. Automatically assigned ports aren't included in the 100 reserved ports quota.</p></li>
<li><code>name</code> (String) The name that's used for the port mapping. This parameter is the name that you use in the <code>serviceConnectConfiguration</code> and the <code>vpcLatticeConfigurations</code> of a service. The name can include up to 64 characters. The characters can include lowercase letters, numbers, underscores (_), and hyphens (-). The name can't start with a hyphen.</li>
<li><code>protocol</code> (String) The protocol used for the port mapping. Valid values are <code>tcp</code> and <code>udp</code>. The default is <code>tcp</code>. <code>protocol</code> is immutable in a Service Connect service. Updating this field requires a service deletion and redeployment.</li>
<p></p>

<p><a id="nestedatt--container_definitions--repository_credentials"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.repository_credentials"></a><h3 id="nested-schema-for-container_definitionsrepository_credentials">Nested Schema for <code>container_definitions.repository_credentials</code></h3>

<p>Optional:</p>

<ul>
<li><code>credentials_parameter</code> (String) The Amazon Resource Name (ARN) of the secret containing the private repository credentials.
When you use the Amazon ECS API, CLI, or AWS SDK, if the secret exists in the same Region as the task that you're launching then you can use either the full ARN or the name of the secret. When you use the AWS Management Console, you must specify the full ARN of the secret.</li>
</ul>

<p><a id="nestedatt--container_definitions--resource_requirements"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.resource_requirements"></a><h3 id="nested-schema-for-container_definitionsresource_requirements">Nested Schema for <code>container_definitions.resource_requirements</code></h3>

<p>Optional:</p>

<ul>
<li><code>type</code> (String) The type of resource to assign to a container.</li>
<li><code>value</code> (String) The value for the specified resource type.
When the type is <code>GPU</code>, the value is the number of physical <code>GPUs</code> the Amazon ECS container agent reserves for the container. The number of GPUs that's reserved for all containers in a task can't exceed the number of available GPUs on the container instance that the task is launched on.
When the type is <code>InferenceAccelerator</code>, the <code>value</code> matches the <code>deviceName</code> for an <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_InferenceAccelerator.html">InferenceAccelerator</a> specified in a task definition.</li>
</ul>

<p><a id="nestedatt--container_definitions--restart_policy"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.restart_policy"></a><h3 id="nested-schema-for-container_definitionsrestart_policy">Nested Schema for <code>container_definitions.restart_policy</code></h3>

<p>Optional:</p>

<ul>
<li><code>enabled</code> (Boolean) Specifies whether a restart policy is enabled for the container.</li>
<li><code>ignored_exit_codes</code> (List of Number) A list of exit codes that Amazon ECS will ignore and not attempt a restart on. You can specify a maximum of 50 container exit codes. By default, Amazon ECS does not ignore any exit codes.</li>
<li><code>restart_attempt_period</code> (Number) A period of time (in seconds) that the container must run for before a restart can be attempted. A container can be restarted only once every <code>restartAttemptPeriod</code> seconds. If a container isn't able to run for this time period and exits early, it will not be restarted. You can set a minimum <code>restartAttemptPeriod</code> of 60 seconds and a maximum <code>restartAttemptPeriod</code> of 1800 seconds. By default, a container must run for 300 seconds before it can be restarted.</li>
</ul>

<p><a id="nestedatt--container_definitions--secrets"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.secrets"></a><h3 id="nested-schema-for-container_definitionssecrets">Nested Schema for <code>container_definitions.secrets</code></h3>

<p>Optional:</p>

<ul>
<li><code>name</code> (String) The name of the secret.</li>
<li><code>value_from</code> (String) The secret to expose to the container. The supported values are either the full ARN of the ASMlong secret or the full ARN of the parameter in the SSM Parameter Store.
For information about the require IAMlong permissions, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-secrets.html#secrets-iam">Required IAM permissions for Amazon ECS secrets</a> (for Secrets Manager) or <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/specifying-sensitive-data-parameters.html">Required IAM permissions for Amazon ECS secrets</a> (for Systems Manager Parameter store) in the <em>Amazon Elastic Container Service Developer Guide</em>.
If the SSM Parameter Store parameter exists in the same Region as the task you're launching, then you can use either the full ARN or name of the parameter. If the parameter exists in a different Region, then the full ARN must be specified.</li>
</ul>

<p><a id="nestedatt--container_definitions--system_controls"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.system_controls"></a><h3 id="nested-schema-for-container_definitionssystem_controls">Nested Schema for <code>container_definitions.system_controls</code></h3>

<p>Optional:</p>

<ul>
<li><code>namespace</code> (String) The namespaced kernel parameter to set a <code>value</code> for.</li>
<li><code>value</code> (String) The namespaced kernel parameter to set a <code>value</code> for.
Valid IPC namespace values: <code>"kernel.msgmax" | "kernel.msgmnb" | "kernel.msgmni" | "kernel.sem" | "kernel.shmall" | "kernel.shmmax" | "kernel.shmmni" | "kernel.shm_rmid_forced"</code>, and <code>Sysctls</code> that start with <code>"fs.mqueue.*"</code> 
Valid network namespace values: <code>Sysctls</code> that start with <code>"net.*"</code> 
All of these values are supported by Fargate.</li>
</ul>

<p><a id="nestedatt--container_definitions--ulimits"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.ulimits"></a><h3 id="nested-schema-for-container_definitionsulimits">Nested Schema for <code>container_definitions.ulimits</code></h3>

<p>Optional:</p>

<ul>
<li><code>hard_limit</code> (Number) The hard limit for the <code>ulimit</code> type. The value can be specified in bytes, seconds, or as a count, depending on the <code>type</code> of the <code>ulimit</code>.</li>
<li><code>name</code> (String) The <code>type</code> of the <code>ulimit</code>.</li>
<li><code>soft_limit</code> (Number) The soft limit for the <code>ulimit</code> type. The value can be specified in bytes, seconds, or as a count, depending on the <code>type</code> of the <code>ulimit</code>.</li>
</ul>

<p><a id="nestedatt--container_definitions--volumes_from"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20container_definitions.volumes_from"></a><h3 id="nested-schema-for-container_definitionsvolumes_from">Nested Schema for <code>container_definitions.volumes_from</code></h3>

<p>Optional:</p>

<ul>
<li><code>read_only</code> (Boolean) If this value is <code>true</code>, the container has read-only access to the volume. If this value is <code>false</code>, then the container can write to the volume. The default value is <code>false</code>.</li>
<li><code>source_container</code> (String) The name of another container within the same task definition to mount volumes from.</li>
</ul>

<p><a id="nestedatt--ephemeral_storage"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20ephemeral_storage"></a><h3 id="nested-schema-for-ephemeral_storage">Nested Schema for <code>ephemeral_storage</code></h3>

<p>Optional:</p>

<ul>
<li><code>size_in_gi_b</code> (Number) The total amount, in GiB, of ephemeral storage to set for the task. The minimum supported value is <code>21</code> GiB and the maximum supported value is <code>200</code> GiB.</li>
</ul>

<p><a id="nestedatt--inference_accelerators"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20inference_accelerators"></a><h3 id="nested-schema-for-inference_accelerators">Nested Schema for <code>inference_accelerators</code></h3>

<p>Optional:</p>

<ul>
<li><code>device_name</code> (String) The Elastic Inference accelerator device name. The <code>deviceName</code> must also be referenced in a container definition as a <a href="https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_ResourceRequirement.html">ResourceRequirement</a>.</li>
<li><code>device_type</code> (String) The Elastic Inference accelerator type to use.</li>
</ul>

<p><a id="nestedatt--placement_constraints"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20placement_constraints"></a><h3 id="nested-schema-for-placement_constraints">Nested Schema for <code>placement_constraints</code></h3>

<p>Optional:</p>

<ul>
<li><code>expression</code> (String) A cluster query language expression to apply to the constraint. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/cluster-query-language.html">Cluster query language</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</li>
<li><code>type</code> (String) The type of constraint. The <code>MemberOf</code> constraint restricts selection to be from a group of valid candidates.</li>
</ul>

<p><a id="nestedatt--proxy_configuration"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20proxy_configuration"></a><h3 id="nested-schema-for-proxy_configuration">Nested Schema for <code>proxy_configuration</code></h3>

<p>Optional:</p>

<ul>
<li><code>container_name</code> (String) The name of the container that will serve as the App Mesh proxy.</li>
<li><code>proxy_configuration_properties</code> (Attributes Set) The set of network configuration parameters to provide the Container Network Interface (CNI) plugin, specified as key-value pairs.
<ul>
<li><code>IgnoredUID</code> - (Required) The user ID (UID) of the proxy container as defined by the <code>user</code> parameter in a container definition. This is used to ensure the proxy ignores its own traffic. If <code>IgnoredGID</code> is specified, this field can be empty.</li>
<li><code>IgnoredGID</code> - (Required) The group ID (GID) of the proxy container as defined by the <code>user</code> parameter in a container definition. This is used to ensure the proxy ignores its own traffic. If <code>IgnoredUID</code> is specified, this field can be empty.</li>
<li><code>AppPorts</code> - (Required) The list of ports that the application uses. Network traffic to these ports is forwarded to the <code>ProxyIngressPort</code> and <code>ProxyEgressPort</code>.</li>
<li><code>ProxyIngressPort</code> - (Required) Specifies the port that incoming traffic to the <code>AppPorts</code> is directed to.</li>
<li><code>ProxyEgressPort</code> - (Required) Specifies the port that outgoing traffic from the <code>AppPorts</code> is directed to.</li>
<li><code>EgressIgnoredPorts</code> - (Required) The egress traffic going to the specified ports is ignored and not redirected to the <code>ProxyEgressPort</code>. It can be an empty list.</li>
<li><code>EgressIgnoredIPs</code> - (Required) The egress traffic going to the specified IP addresses is ignored and not redirected to the <code>ProxyEgressPort</code>. It can be an empty list. (see <a href="#nestedatt--proxy_configuration--proxy_configuration_properties">below for nested schema</a>)</li>
</ul></li>
<li><code>type</code> (String) The proxy type. The only supported value is <code>APPMESH</code>.</li>
</ul>

<p><a id="nestedatt--proxy_configuration--proxy_configuration_properties"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20proxy_configuration.proxy_configuration_properties"></a><h3 id="nested-schema-for-proxy_configurationproxy_configuration_properties">Nested Schema for <code>proxy_configuration.proxy_configuration_properties</code></h3>

<p>Optional:</p>

<ul>
<li><code>name</code> (String) The name of the key-value pair. For environment variables, this is the name of the environment variable.</li>
<li><code>value</code> (String) The value of the key-value pair. For environment variables, this is the value of the environment variable.</li>
</ul>

<p><a id="nestedatt--runtime_platform"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20runtime_platform"></a><h3 id="nested-schema-for-runtime_platform">Nested Schema for <code>runtime_platform</code></h3>

<p>Optional:</p>

<ul>
<li><code>cpu_architecture</code> (String) The CPU architecture.
You can run your Linux tasks on an ARM-based platform by setting the value to <code>ARM64</code>. This option is available for tasks that run on Linux Amazon EC2 instance or Linux containers on Fargate.</li>
<li><code>operating_system_family</code> (String) The operating system.</li>
</ul>

<p><a id="nestedatt--tags"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20tags"></a><h3 id="nested-schema-for-tags">Nested Schema for <code>tags</code></h3>

<p>Optional:</p>

<ul>
<li><code>key</code> (String) One part of a key-value pair that make up a tag. A <code>key</code> is a general label that acts like a category for more specific tag values.</li>
<li><code>value</code> (String) The optional part of a key-value pair that make up a tag. A <code>value</code> acts as a descriptor within a tag category (key).</li>
</ul>

<p><a id="nestedatt--volumes"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes"></a><h3 id="nested-schema-for-volumes">Nested Schema for <code>volumes</code></h3>

<p>Optional:</p>

<ul>
<li><code>configured_at_launch</code> (Boolean) Indicates whether the volume should be configured at launch time. This is used to create Amazon EBS volumes for standalone tasks or tasks created as part of a service. Each task definition revision may only have one volume configured at launch in the volume configuration.
To configure a volume at launch time, use this task definition revision and specify a <code>volumeConfigurations</code> object when calling the <code>CreateService</code>, <code>UpdateService</code>, <code>RunTask</code> or <code>StartTask</code> APIs.</li>
<li><code>docker_volume_configuration</code> (Attributes) This parameter is specified when you use Docker volumes.
Windows containers only support the use of the <code>local</code> driver. To use bind mounts, specify the <code>host</code> parameter instead.
Docker volumes aren't supported by tasks run on FARGATElong. (see <a href="#nestedatt--volumes--docker_volume_configuration">below for nested schema</a>)</li>
<li><code>efs_volume_configuration</code> (Attributes) This parameter is specified when you use an Amazon Elastic File System file system for task storage. (see <a href="#nestedatt--volumes--efs_volume_configuration">below for nested schema</a>)</li>
<li><code>fsx_windows_file_server_volume_configuration</code> (Attributes) This parameter is specified when you use Amazon FSx for Windows File Server file system for task storage. (see <a href="#nestedatt--volumes--fsx_windows_file_server_volume_configuration">below for nested schema</a>)</li>
<li><code>host</code> (Attributes) This parameter is specified when you use bind mount host volumes. The contents of the <code>host</code> parameter determine whether your bind mount host volume persists on the host container instance and where it's stored. If the <code>host</code> parameter is empty, then the Docker daemon assigns a host path for your data volume. However, the data isn't guaranteed to persist after the containers that are associated with it stop running.
Windows containers can mount whole directories on the same drive as <code>$env:ProgramData</code>. Windows containers can't mount directories on a different drive, and mount point can't be across drives. For example, you can mount <code>C:\my\path:C:\my\path</code> and <code>D:\:D:\</code>, but not <code>D:\my\path:C:\my\path</code> or <code>D:\:C:\my\path</code>. (see <a href="#nestedatt--volumes--host">below for nested schema</a>)</li>
<li><code>name</code> (String) The name of the volume. Up to 255 letters (uppercase and lowercase), numbers, underscores, and hyphens are allowed.
When using a volume configured at launch, the <code>name</code> is required and must also be specified as the volume name in the <code>ServiceVolumeConfiguration</code> or <code>TaskVolumeConfiguration</code> parameter when creating your service or standalone task.
For all other types of volumes, this name is referenced in the <code>sourceVolume</code> parameter of the <code>mountPoints</code> object in the container definition.
When a volume is using the <code>efsVolumeConfiguration</code>, the name is required.</li>
</ul>

<p><a id="nestedatt--volumes--docker_volume_configuration"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.docker_volume_configuration"></a><h3 id="nested-schema-for-volumesdocker_volume_configuration">Nested Schema for <code>volumes.docker_volume_configuration</code></h3>

<p>Optional:</p>

<ul>
<li><code>autoprovision</code> (Boolean) If this value is <code>true</code>, the Docker volume is created if it doesn't already exist.
This field is only used if the <code>scope</code> is <code>shared</code>.</li>
<li><code>driver</code> (String) The Docker volume driver to use. The driver value must match the driver name provided by Docker because it is used for task placement. If the driver was installed using the Docker plugin CLI, use <code>docker plugin ls</code> to retrieve the driver name from your container instance. If the driver was installed using another method, use Docker plugin discovery to retrieve the driver name. This parameter maps to <code>Driver</code> in the docker container create command and the <code>xxdriver</code> option to docker volume create.</li>
<li><code>driver_opts</code> (Map of String) A map of Docker driver-specific options passed through. This parameter maps to <code>DriverOpts</code> in the docker create-volume command and the <code>xxopt</code> option to docker volume create.</li>
<li><code>labels</code> (Map of String) Custom metadata to add to your Docker volume. This parameter maps to <code>Labels</code> in the docker container create command and the <code>xxlabel</code> option to docker volume create.</li>
<li><code>scope</code> (String) The scope for the Docker volume that determines its lifecycle. Docker volumes that are scoped to a <code>task</code> are automatically provisioned when the task starts and destroyed when the task stops. Docker volumes that are scoped as <code>shared</code> persist after the task stops.</li>
</ul>

<p><a id="nestedatt--volumes--efs_volume_configuration"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.efs_volume_configuration"></a><h3 id="nested-schema-for-volumesefs_volume_configuration">Nested Schema for <code>volumes.efs_volume_configuration</code></h3>

<p>Optional:</p>

<ul>
<li><code>authorization_config</code> (Attributes) The authorization configuration details for the Amazon EFS file system. (see <a href="#nestedatt--volumes--efs_volume_configuration--authorization_config">below for nested schema</a>)</li>
<li><code>filesystem_id</code> (String) The Amazon EFS file system ID to use.</li>
<li><code>root_directory</code> (String) The directory within the Amazon EFS file system to mount as the root directory inside the host. If this parameter is omitted, the root of the Amazon EFS volume will be used. Specifying <code>/</code> will have the same effect as omitting this parameter.
If an EFS access point is specified in the <code>authorizationConfig</code>, the root directory parameter must either be omitted or set to <code>/</code> which will enforce the path set on the EFS access point.</li>
<li><code>transit_encryption</code> (String) Determines whether to use encryption for Amazon EFS data in transit between the Amazon ECS host and the Amazon EFS server. Transit encryption must be turned on if Amazon EFS IAM authorization is used. If this parameter is omitted, the default value of <code>DISABLED</code> is used. For more information, see <a href="https://docs.aws.amazon.com/efs/latest/ug/encryption-in-transit.html">Encrypting data in transit</a> in the <em>Amazon Elastic File System User Guide</em>.</li>
<li><code>transit_encryption_port</code> (Number) The port to use when sending encrypted data between the Amazon ECS host and the Amazon EFS server. If you do not specify a transit encryption port, it will use the port selection strategy that the Amazon EFS mount helper uses. For more information, see <a href="https://docs.aws.amazon.com/efs/latest/ug/efs-mount-helper.html">EFS mount helper</a> in the <em>Amazon Elastic File System User Guide</em>.</li>
</ul>

<p><a id="nestedatt--volumes--efs_volume_configuration--authorization_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.efs_volume_configuration.authorization_config"></a><h3 id="nested-schema-for-volumesefs_volume_configurationauthorization_config">Nested Schema for <code>volumes.efs_volume_configuration.authorization_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>access_point_id</code> (String) The Amazon EFS access point ID to use. If an access point is specified, the root directory value specified in the <code>EFSVolumeConfiguration</code> must either be omitted or set to <code>/</code> which will enforce the path set on the EFS access point. If an access point is used, transit encryption must be on in the <code>EFSVolumeConfiguration</code>. For more information, see <a href="https://docs.aws.amazon.com/efs/latest/ug/efs-access-points.html">Working with Amazon EFS access points</a> in the <em>Amazon Elastic File System User Guide</em>.</li>
<li><code>iam</code> (String) Determines whether to use the Amazon ECS task role defined in a task definition when mounting the Amazon EFS file system. If it is turned on, transit encryption must be turned on in the <code>EFSVolumeConfiguration</code>. If this parameter is omitted, the default value of <code>DISABLED</code> is used. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/efs-volumes.html#efs-volume-accesspoints">Using Amazon EFS access points</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.</li>
</ul>

<p><a id="nestedatt--volumes--fsx_windows_file_server_volume_configuration"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.fsx_windows_file_server_volume_configuration"></a><h3 id="nested-schema-for-volumesfsx_windows_file_server_volume_configuration">Nested Schema for <code>volumes.fsx_windows_file_server_volume_configuration</code></h3>

<p>Optional:</p>

<ul>
<li><code>authorization_config</code> (Attributes) The authorization configuration details for the Amazon FSx for Windows File Server file system. (see <a href="#nestedatt--volumes--fsx_windows_file_server_volume_configuration--authorization_config">below for nested schema</a>)</li>
<li><code>file_system_id</code> (String) The Amazon FSx for Windows File Server file system ID to use.</li>
<li><code>root_directory</code> (String) The directory within the Amazon FSx for Windows File Server file system to mount as the root directory inside the host.</li>
</ul>

<p><a id="nestedatt--volumes--fsx_windows_file_server_volume_configuration--authorization_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.fsx_windows_file_server_volume_configuration.authorization_config"></a><h3 id="nested-schema-for-volumesfsx_windows_file_server_volume_configurationauthorization_config">Nested Schema for <code>volumes.fsx_windows_file_server_volume_configuration.authorization_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>credentials_parameter</code> (String) The authorization credential option to use. The authorization credential options can be provided using either the Amazon Resource Name (ARN) of an ASMlong secret or SSM Parameter Store parameter. The ARN refers to the stored credentials.</li>
<li><code>domain</code> (String) A fully qualified domain name hosted by an <a href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/directory_microsoft_ad.html"></a> Managed Microsoft AD (Active Directory) or self-hosted AD on Amazon EC2.</li>
</ul>

<p><a id="nestedatt--volumes--host"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20volumes.host"></a><h3 id="nested-schema-for-volumeshost">Nested Schema for <code>volumes.host</code></h3>

<p>Optional:</p>

<ul>
<li><code>source_path</code> (String) When the <code>host</code> parameter is used, specify a <code>sourcePath</code> to declare the path on the host container instance that's presented to the container. If this parameter is empty, then the Docker daemon has assigned a host path for you. If the <code>host</code> parameter contains a <code>sourcePath</code> file location, then the data volume persists at the specified location on the host container instance until you delete it manually. If the <code>sourcePath</code> value doesn't exist on the host container instance, the Docker daemon creates it. If the location does exist, the contents of the source path folder are exported.
If you're using the Fargate launch type, the <code>sourcePath</code> parameter is not supported.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_ecs_task_definition.example <span class="s2">"task_definition_arn"</span>
</code></pre></div>

            
        
    </body></html>
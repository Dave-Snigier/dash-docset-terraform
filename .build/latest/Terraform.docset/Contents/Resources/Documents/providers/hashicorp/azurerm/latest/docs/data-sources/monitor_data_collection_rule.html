<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/monitor_data_collection_rule --><head>
                <title>azurerm_monitor_data_collection_rule</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="data-source-azurerm_monitor_data_collection_rule">Data Source: azurerm_monitor_data_collection_rule</h1>

<p>Use this data source to access information about an existing Data Collection Rule.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"azurerm_monitor_data_collection_rule"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-rule"</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_group_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">azurerm_resource_group.example.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">output</span><span class="w"> </span><span class="nv">"rule_id"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.azurerm_monitor_data_collection_rule.example.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<ul>
<li><p><code>name</code> - Specifies the name of the Data Collection Rule.</p></li>
<li><p><code>resource_group_name</code> - Specifies the name of the resource group the Data Collection Rule is located in.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<ul>
<li><p><code>id</code> - The ID of the Resource.</p></li>
<li><p><code>data_collection_endpoint_id</code> - The resource ID of the Data Collection Endpoint that this rule can be used with.</p></li>
<li><p><code>data_flow</code> - One or more <code>data_flow</code> blocks as defined below.</p></li>
<li><p><code>destinations</code> - A <code>destinations</code> block as defined below.</p></li>
<li><p><code>location</code> - The Azure Region where the Data Collection Rule should exist. Changing this forces a new Data Collection Rule to be created.</p></li>
<li><p><code>data_sources</code> - A <code>data_sources</code> block as defined below. This property is optional and can be omitted if the rule is meant to be used via direct calls to the provisioned endpoint.</p></li>
<li><p><code>description</code> - The description of the Data Collection Rule.</p></li>
<li><p><code>identity</code> - An <code>identity</code> block as defined below.</p></li>
<li><p><code>kind</code> - The kind of the Data Collection Rule. Possible values are <code>Linux</code>, <code>Windows</code>,and <code>AgentDirectToStore</code>. A rule of kind <code>Linux</code> does not allow for <code>windows_event_log</code> data sources. And a rule of kind <code>Windows</code> does not allow for <code>syslog</code> data sources. If kind is not specified, all kinds of data sources are allowed.</p></li>
<li><p><code>stream_declaration</code> - A <code>stream_declaration</code> block as defined below.</p></li>
<li><p><code>tags</code> - A mapping of tags which should be assigned to the Data Collection Rule.</p></li>
</ul>

<hr/>

<p>A <code>azure_monitor_metrics</code> block exports the following:</p>

<ul>
<li><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</li>
</ul>

<hr/>

<p>A <code>column</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name of the column.</p></li>
<li><p><code>type</code> - The type of the column data. Possible values are <code>string</code>, <code>int</code>, <code>long</code>, <code>real</code>, <code>boolean</code>, <code>datetime</code>,and <code>dynamic</code>.</p></li>
</ul>

<hr/>

<p>A <code>data_import</code> block exports the following:</p>

<ul>
<li><code>event_hub_data_source</code> - An <code>event_hub_data_source</code> block as defined below.</li>
</ul>

<hr/>

<p>A <code>data_flow</code> block exports the following:</p>

<ul>
<li><p><code>destinations</code> - Specifies a list of destination names. A <code>azure_monitor_metrics</code> data source only allows for stream of kind <code>Microsoft-InsightsMetrics</code>.</p></li>
<li><p><code>streams</code> - Specifies a list of streams. Possible values include but not limited to <code>Microsoft-Event</code>, <code>Microsoft-InsightsMetrics</code>, <code>Microsoft-Perf</code>, <code>Microsoft-Syslog</code>,and <code>Microsoft-WindowsEvent</code>.</p></li>
<li><p><code>built_in_transform</code> - The built-in transform to transform stream data.</p></li>
<li><p><code>output_stream</code> - The output stream of the transform. Only required if the data flow changes data to a different stream.</p></li>
<li><p><code>transform_kql</code> - The KQL query to transform stream data.</p></li>
</ul>

<hr/>

<p>A <code>data_sources</code> block exports the following:</p>

<ul>
<li><p><code>data_import</code> - A <code>data_import</code> block as defined above.</p></li>
<li><p><code>extension</code> - One or more <code>extension</code> blocks as defined below.</p></li>
<li><p><code>iis_log</code> - One or more <code>iis_log</code> blocks as defined below.</p></li>
<li><p><code>log_file</code> - One or more <code>log_file</code> blocks as defined below.</p></li>
<li><p><code>performance_counter</code> - One or more <code>performance_counter</code> blocks as defined below.</p></li>
<li><p><code>platform_telemetry</code> - One or more <code>platform_telemetry</code> blocks as defined below.</p></li>
<li><p><code>prometheus_forwarder</code> - One or more <code>prometheus_forwarder</code> blocks as defined below.</p></li>
<li><p><code>syslog</code> - One or more <code>syslog</code> blocks as defined below.</p></li>
<li><p><code>windows_event_log</code> - One or more <code>windows_event_log</code> blocks as defined below.</p></li>
<li><p><code>windows_firewall_log</code> - One or more <code>windows_firewall_log</code> blocks as defined below.</p></li>
</ul>

<hr/>

<p>A <code>destinations</code> block exports the following:</p>

<ul>
<li><p><code>azure_monitor_metrics</code> - A <code>azure_monitor_metrics</code> block as defined above.</p></li>
<li><p><code>event_hub</code> - One or more <code>event_hub</code> blocks as defined below.</p></li>
<li><p><code>event_hub_direct</code> - One or more <code>event_hub_direct</code> blocks as defined below.</p></li>
<li><p><code>log_analytics</code> - One or more <code>log_analytics</code> blocks as defined below.</p></li>
<li><p><code>monitor_account</code> - One or more <code>monitor_account</code> blocks as defined below.</p></li>
<li><p><code>storage_blob</code> - One or more <code>storage_blob</code> blocks as defined below.</p></li>
<li><p><code>storage_blob_direct</code> - One or more <code>storage_blob_direct</code> blocks as defined below.</p></li>
<li><p><code>storage_table_direct</code> - One or more <code>storage_table_direct</code> blocks as defined below.</p></li>
</ul>

<hr/>

<p>An <code>event_hub_data_source</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>stream</code> - The stream to collect from Event Hub. Possible value should be a custom stream name.</p></li>
<li><p><code>consumer_group</code> - The Event Hub consumer group name.</p></li>
</ul>

<hr/>

<p>An <code>event_hub</code> block exports the following:</p>

<ul>
<li><p><code>event_hub_id</code> - The resource ID of the Event Hub.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
</ul>

<hr/>

<p>An <code>event_hub_direct</code> block exports the following:</p>

<ul>
<li><p><code>event_hub_id</code> - The resource ID of the Event Hub.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
</ul>

<hr/>

<p>A <code>extension</code> block exports the following:</p>

<ul>
<li><p><code>extension_name</code> - The name of the VM extension.</p></li>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible values include but not limited to <code>Microsoft-Event</code>, <code>Microsoft-InsightsMetrics</code>, <code>Microsoft-Perf</code>, <code>Microsoft-Syslog</code>,and <code>Microsoft-WindowsEvent</code>.</p></li>
<li><p><code>extension_json</code> - A JSON String which specifies the extension setting.</p></li>
<li><p><code>input_data_sources</code> - Specifies a list of data sources this extension needs data from. An item should be a name of a supported data source which produces only one stream. Supported data sources type: <code>performance_counter</code>, <code>windows_event_log</code>,and <code>syslog</code>.</p></li>
</ul>

<hr/>

<p>An <code>iis_log</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible value is <code>Microsoft-W3CIISLog</code>.</p></li>
<li><p><code>log_directories</code> - Specifies a list of absolute paths where the log files are located.</p></li>
</ul>

<hr/>

<p>An <code>identity</code> block exports the following:</p>

<ul>
<li><p><code>type</code> - cSpecifies the type of Managed Service Identity that should be configured on this Data Collection Rule. Possible values are <code>SystemAssigned</code> and <code>UserAssigned</code>.</p></li>
<li><p><code>identity_ids</code> - A list of User Assigned Managed Identity IDs to be assigned to this Data Collection Rule. Currently, up to 1 identity is supported.</p></li>
<li><p><code>principal_id</code> - The Principal ID associated with this Managed Service Identity.</p></li>
<li><p><code>tenant_id</code> - The Tenant ID associated with this Managed Service Identity.</p></li>
</ul>

<hr/>

<p>A <code>label_include_filter</code> block exports the following:</p>

<ul>
<li><p><code>label</code> - The label of the filter. This label should be unique across all <code>label_include_fileter</code> block. Possible value is <code>microsoft_metrics_include_label</code>.</p></li>
<li><p><code>value</code> - The value of the filter.</p></li>
</ul>

<hr/>

<p>An <code>log_file</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible value should be custom stream names.</p></li>
<li><p><code>file_patterns</code> - Specifies a list of file patterns where the log files are located. For example, <code>C:\\JavaLogs\\*.log</code>.</p></li>
<li><p><code>format</code> - The data format of the log files. possible value is <code>text</code>.</p></li>
<li><p><code>settings</code> - A <code>settings</code> block as defined below.</p></li>
</ul>

<hr/>

<p>A <code>monitor_account</code> block exports the following:</p>

<ul>
<li><p><code>monitor_account_id</code> - The resource ID of the Monitor Account.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
</ul>

<hr/>

<p>A <code>log_analytics</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
<li><p><code>workspace_resource_id</code> - The ID of a Log Analytic Workspace resource.</p></li>
</ul>

<hr/>

<p>A <code>performance_counter</code> block exports the following:</p>

<ul>
<li><p><code>counter_specifiers</code> - Specifies a list of specifier names of the performance counters you want to collect. Use a wildcard <code>*</code> to collect counters for all instances. To get a list of performance counters on Windows, run the command <code>typeperf</code>.</p></li>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>sampling_frequency_in_seconds</code> - The number of seconds between consecutive counter measurements (samples). The value should be integer between <code>1</code> and <code>1800</code> inclusive.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible values include but not limited to <code>Microsoft-InsightsMetrics</code>,and <code>Microsoft-Perf</code>.</p></li>
</ul>

<hr/>

<p>A <code>platform_telemetry</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible values include but not limited to <code>Microsoft.Cache/redis:Metrics-Group-All</code>.</p></li>
</ul>

<hr/>

<p>A <code>prometheus_forwarder</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible value is <code>Microsoft-PrometheusMetrics</code>.</p></li>
<li><p><code>label_include_filter</code> - One or more <code>label_include_filter</code> blocks as defined above.</p></li>
</ul>

<hr/>

<p>A <code>settings</code> block within the <code>log_file</code> block exports the following:</p>

<ul>
<li><code>text</code> - A <code>text</code> block as defined below.</li>
</ul>

<hr/>

<p>A <code>storage_blob</code> block exports the following:</p>

<ul>
<li><p><code>container_name</code> - The Storage Container name.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
<li><p><code>storage_account_id</code> - The resource ID of the Storage Account.</p></li>
</ul>

<hr/>

<p>A <code>storage_blob_direct</code> block exports the following:</p>

<ul>
<li><p><code>container_name</code> - The Storage Container name.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
<li><p><code>storage_account_id</code> - The resource ID of the Storage Account.</p></li>
</ul>

<hr/>

<p>A <code>storage_table_direct</code> block exports the following:</p>

<ul>
<li><p><code>table_name</code> - The Storage Table name.</p></li>
<li><p><code>name</code> - The name which should be used for this destination. This name should be unique across all destinations regardless of type within the Data Collection Rule.</p></li>
<li><p><code>storage_account_id</code> - The resource ID of the Storage Account.</p></li>
</ul>

<hr/>

<p>A <code>stream_declaration</code> block exports the following:</p>

<ul>
<li><p><code>stream_name</code> - The name of the custom stream. This name should be unique across all <code>stream_declaration</code> blocks.</p></li>
<li><p><code>column</code> - One or more <code>column</code> blocks as defined above.</p></li>
</ul>

<hr/>

<p>A <code>syslog</code> block exports the following:</p>

<ul>
<li><p><code>facility_names</code> - Specifies a list of facility names. Use a wildcard <code>*</code> to collect logs for all facility names. Possible values are <code>auth</code>, <code>authpriv</code>, <code>cron</code>, <code>daemon</code>, <code>kern</code>, <code>lpr</code>, <code>mail</code>, <code>mark</code>, <code>news</code>, <code>syslog</code>, <code>user</code>, <code>uucp</code>, <code>local0</code>, <code>local1</code>, <code>local2</code>, <code>local3</code>, <code>local4</code>, <code>local5</code>, <code>local6</code>, <code>local7</code>,and <code>*</code>.</p></li>
<li><p><code>log_levels</code> - Specifies a list of log levels. Use a wildcard <code>*</code> to collect logs for all log levels. Possible values are <code>Debug</code>,  <code>Info</code>, <code>Notice</code>, <code>Warning</code>, <code>Error</code>, <code>Critical</code>, <code>Alert</code>, <code>Emergency</code>,and <code>*</code>.</p></li>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible values include but not limited to <code>Microsoft-Syslog</code>,and <code>Microsoft-CiscoAsa</code>, and <code>Microsoft-CommonSecurityLog</code>.</p></li>
</ul>

<hr/>

<p>A <code>text</code> block within the <code>log_file.settings</code> block exports the following:</p>

<ul>
<li><code>record_start_timestamp_format</code> - The timestamp format of the text log files. Possible values are <code>ISO 8601</code>, <code>YYYY-MM-DD HH:MM:SS</code>, <code>M/D/YYYY HH:MM:SS AM/PM</code>, <code>Mon DD, YYYY HH:MM:SS</code>, <code>yyMMdd HH:mm:ss</code>, <code>ddMMyy HH:mm:ss</code>, <code>MMM d hh:mm:ss</code>, <code>dd/MMM/yyyy:HH:mm:ss zzz</code>,and <code>yyyy-MM-ddTHH:mm:ssK</code>.</li>
</ul>

<hr/>

<p>A <code>windows_event_log</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to. Possible values include but not limited to <code>Microsoft-Event</code>,and <code>Microsoft-WindowsEvent</code>, and <code>Microsoft-SecurityEvent</code>.</p></li>
<li><p><code>x_path_queries</code> - Specifies a list of Windows Event Log queries in XPath expression.</p></li>
</ul>

<hr/>

<p>A <code>windows_firewall_log</code> block exports the following:</p>

<ul>
<li><p><code>name</code> - The name which should be used for this data source. This name should be unique across all data sources regardless of type within the Data Collection Rule.</p></li>
<li><p><code>streams</code> - Specifies a list of streams that this data source will be sent to. A stream indicates what schema will be used for this data and usually what table in Log Analytics the data will be sent to.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://www.terraform.io/language/resources/syntax#operation-timeouts">timeouts</a> for certain actions:</p>

<ul>
<li><code>read</code> - (Defaults to 5 minutes) Used when retrieving the Data Collection Rule.</li>
</ul>

            
        
    </body></html>
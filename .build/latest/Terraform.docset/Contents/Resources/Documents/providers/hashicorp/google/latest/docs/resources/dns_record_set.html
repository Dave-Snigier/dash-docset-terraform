<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/dns_record_set --><head>
                <title>google_dns_record_set</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_dns_record_set">google_dns_record_set</h1>

<p>Manages a set of DNS records within Google Cloud DNS. For more information see <a href="https://cloud.google.com/dns/records/">the official documentation</a> and
<a href="https://cloud.google.com/dns/api/v1/resourceRecordSets">API</a>.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>The provider treats this resource as an authoritative record set. This means existing records (including the default records) for the given type will be overwritten when you create this resource in Terraform. In addition, the Google Cloud DNS API requires NS and SOA records to be present at all times, so Terraform will not actually remove NS or SOA records on the root of the zone during destroy but will report that it did.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Binding%20a%20DNS%20name%20to%20the%20ephemeral%20IP%20of%20a%20new%20instance%3A"></a><h3 id="binding-a-dns-name-to-the-ephemeral-ip-of-a-new-instance">Binding a DNS name to the ephemeral IP of a new instance:</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"frontend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"frontend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>

<span class="w">  </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">google_compute_instance.frontend.network_interface[0].access_config[0].nat_ip</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_instance"</span><span class="w"> </span><span class="nv">"frontend"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"frontend"</span><span class="w"></span>
<span class="w">  </span><span class="na">machine_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"g1-small"</span><span class="w"></span>
<span class="w">  </span><span class="na">zone</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1-b"</span><span class="w"></span>

<span class="w">  </span><span class="nb">boot_disk</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">initialize_params</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"debian-cloud/debian-11"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">network_interface</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">    </span><span class="nb">access_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Adding%20an%20A%20record"></a><h3 id="adding-an-a-record">Adding an A record</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"a"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"backend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"8.8.8.8"</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Adding%20an%20MX%20record"></a><h3 id="adding-an-mx-record">Adding an MX record</h3>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"mx"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.dns_name</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"MX"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">3600</span><span class="w"></span>

<span class="w">  </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">"1 aspmx.l.google.com."</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"5 alt1.aspmx.l.google.com."</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"5 alt2.aspmx.l.google.com."</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"10 alt3.aspmx.l.google.com."</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">"10 alt4.aspmx.l.google.com."</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Adding%20an%20SPF%20record"></a><h3 id="adding-an-spf-record">Adding an SPF record</h3>

<p>Quotes (<code>""</code>) must be added around your <code>rrdatas</code> for a SPF record. Otherwise <code>rrdatas</code> string gets split on spaces.</p>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"spf"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"frontend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"TXT"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"\"v=spf1 ip4:111.111.111.111 include:backoff.email-example.com -all\""</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Adding%20a%20CNAME%20record"></a><h3 id="adding-a-cname-record">Adding a CNAME record</h3>

<p>The list of <code>rrdatas</code> should only contain a single string corresponding to the Canonical Name intended.</p>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"cname"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"frontend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"CNAME"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>
<span class="w">  </span><span class="na">rrdatas</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"frontend.mydomain.com."</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Setting%20Routing%20Policy%20instead%20of%20using%20rrdatas"></a><h3 id="setting-routing-policy-instead-of-using-rrdatas">Setting Routing Policy instead of using rrdatas</h3>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Weighted%20Round%20Robin"></a><h4 id="weighted-round-robin">Weighted Round Robin</h4>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"wrr"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"backend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="nb">routing_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">wrr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">weight</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">0.8</span><span class="w"></span>
<span class="w">      </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">[</span><span class="s2">"10.128.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">wrr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">weight</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">0.2</span><span class="w"></span>
<span class="w">      </span><span class="na">rrdatas</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">[</span><span class="s2">"10.130.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Geolocation"></a><h4 id="geolocation">Geolocation</h4>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"geo"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"backend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="nb">routing_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">geo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"asia-east1"</span><span class="w"></span>
<span class="w">      </span><span class="na">rrdatas</span><span class="w">  </span><span class="o">=</span><span class="w">  </span><span class="p">[</span><span class="s2">"10.128.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">geo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">      </span><span class="na">rrdatas</span><span class="w">  </span><span class="o">=</span><span class="w">  </span><span class="p">[</span><span class="s2">"10.130.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Failover"></a><h4 id="failover">Failover</h4>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"a"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"backend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="nb">routing_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">primary_backup</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">trickle_ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">0.1</span><span class="w"></span>

<span class="w">      </span><span class="nb">primary</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">internal_load_balancers</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">load_balancer_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"regionalL4ilb"</span><span class="w"></span>
<span class="w">          </span><span class="na">ip_address</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_forwarding_rule.prod.ip_address</span><span class="w"></span>
<span class="w">          </span><span class="na">port</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"80"</span><span class="w"></span>
<span class="w">          </span><span class="na">ip_protocol</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"tcp"</span><span class="w"></span>
<span class="w">          </span><span class="na">network_url</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.prod.id</span><span class="w"></span>
<span class="w">          </span><span class="na">project</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_forwarding_rule.prod.project</span><span class="w"></span>
<span class="w">          </span><span class="na">region</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_forwarding_rule.prod.region</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="nb">backup_geo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"asia-east1"</span><span class="w"></span>
<span class="w">        </span><span class="na">rrdatas</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"10.128.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="nb">backup_geo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-west1"</span><span class="w"></span>
<span class="w">        </span><span class="na">rrdatas</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"10.130.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_forwarding_rule"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-ilb"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="na">load_balancing_scheme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"INTERNAL"</span><span class="w"></span>
<span class="w">  </span><span class="na">backend_service</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_region_backend_service.prod.id</span><span class="w"></span>
<span class="w">  </span><span class="na">all_ports</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">network</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_network.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">allow_global_access</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_region_backend_service"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-backend"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_network"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-network"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Public%20zone%20failover"></a><h4 id="public-zone-failover">Public zone failover</h4>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_record_set"</span><span class="w"> </span><span class="nv">"a"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"backend.${google_dns_managed_zone.prod.dns_name}"</span><span class="w"></span>
<span class="w">  </span><span class="na">managed_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_managed_zone.prod.name</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"></span>
<span class="w">  </span><span class="na">ttl</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="w"></span>

<span class="w">  </span><span class="nb">routing_policy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">health_check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_compute_health_check.http-health-check.id</span><span class="w"></span>
<span class="w">    </span><span class="nb">primary_backup</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">trickle_ratio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">0.1</span><span class="w"></span>

<span class="w">      </span><span class="nb">primary</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">external_endpoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"10.128.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>

<span class="w">      </span><span class="nb">backup_geo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-west1"</span><span class="w"></span>
<span class="w">        </span><span class="nb">health_checked_targets</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">external_endpoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"10.130.1.1"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_compute_health_check"</span><span class="w"> </span><span class="nv">"http-health-check"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"http-health-check"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Health check via http"</span><span class="w"></span>

<span class="w">  </span><span class="na">timeout_sec</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="w">  </span><span class="na">check_interval_sec</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">  </span><span class="na">healthy_threshold</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="w"></span>
<span class="w">  </span><span class="na">unhealthy_threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="w"></span>

<span class="w">  </span><span class="nb">http_health_check</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">port_specification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"USE_SERVING_PORT"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_dns_managed_zone"</span><span class="w"> </span><span class="nv">"prod"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod-zone"</span><span class="w"></span>
<span class="w">  </span><span class="na">dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod.mydomain.com."</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>managed_zone</code> - (Required) The name of the zone in which this record set will
reside.</p></li>
<li><p><code>name</code> - (Required) The DNS name this record set will apply to.</p></li>
<li><p><code>type</code> - (Required) The DNS record set type.</p></li>
</ul>

<hr/>

<ul>
<li><p><code>rrdatas</code> - (Optional) The string data for the records in this record set
whose meaning depends on the DNS type. For TXT record, if the string data contains spaces, add surrounding <code>\"</code> if you don't want your string to get split on spaces. To specify a single record value longer than 255 characters such as a TXT record for DKIM, add <code>\" \"</code> inside the Terraform configuration string (e.g. <code>"first255characters\" \"morecharacters"</code>).</p></li>
<li><p><code>routing_policy</code> - (Optional) The configuration for steering traffic based on query.
Now you can specify either Weighted Round Robin(WRR) type or Geolocation(GEO) type.
Structure is <a href="#nested_routing_policy">documented below</a>.</p></li>
<li><p><code>ttl</code> - (Optional) The time-to-live of this record set (seconds).</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs. If it
is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_routing_policy"></a>The <code>routing_policy</code> block supports:</p>

<ul>
<li><p><code>wrr</code> - (Optional) The configuration for Weighted Round Robin based routing policy.
Structure is <a href="#nested_wrr">documented below</a>.</p></li>
<li><p><code>geo</code> - (Optional) The configuration for Geolocation based routing policy.
Structure is <a href="#nested_geo">documented below</a>.</p></li>
<li><p><code>enable_geo_fencing</code> - (Optional) Specifies whether to enable fencing for geo queries.</p></li>
<li><p><code>primary_backup</code> - (Optional) The configuration for a failover policy with global to regional failover. Queries are responded to with the global primary targets, but if none of the primary targets are healthy, then we fallback to a regional failover policy.
Structure is <a href="#nested_primary_backup">documented below</a>.</p></li>
<li><p><code>health_check</code> - (Optional) Specifies the health check (used with external endpoints).</p></li>
</ul>

<p><a name="nested_wrr"></a>The <code>wrr</code> block supports:</p>

<ul>
<li><p><code>weight</code>  - (Required) The ratio of traffic routed to the target.</p></li>
<li><p><code>rrdatas</code> - (Optional) Same as <code>rrdatas</code> above.</p></li>
<li><p><code>health_checked_targets</code> - (Optional) The list of targets to be health checked. Note that if DNSSEC is enabled for this zone, only one of <code>rrdatas</code> or <code>health_checked_targets</code> can be set.
Structure is <a href="#nested_health_checked_targets">documented below</a>.</p></li>
</ul>

<p><a name="nested_geo"></a>The <code>geo</code> block supports:</p>

<ul>
<li><p><code>location</code> - (Required) The location name defined in Google Cloud.</p></li>
<li><p><code>rrdatas</code> - (Optional) Same as <code>rrdatas</code> above.</p></li>
<li><p><code>health_checked_targets</code> - (Optional) For A and AAAA types only. The list of targets to be health checked. These can be specified along with <code>rrdatas</code> within this item.
Structure is <a href="#nested_health_checked_targets">documented below</a>.</p></li>
</ul>

<p><a name="nested_primary_backup"></a>The <code>primary_backup</code> block supports:</p>

<ul>
<li><p><code>primary</code> - (Required) The list of global primary targets to be health checked.
Structure is <a href="#nested_health_checked_targets">documented below</a>.</p></li>
<li><p><code>backup_geo</code> - (Required) The backup geo targets, which provide a regional failover policy for the otherwise global primary targets.
Structure is <a href="#nested_geo">document above</a>.</p></li>
<li><p><code>enable_geo_fencing_for_backups</code> - (Optional) Specifies whether to enable fencing for backup geo queries.</p></li>
<li><p><code>trickle_ratio</code> - (Optional) Specifies the percentage of traffic to send to the backup targets even when the primary targets are healthy.</p></li>
</ul>

<p><a name="nested_health_checked_targets"></a>The <code>health_checked_targets</code> block supports:</p>

<ul>
<li><p><code>internal_load_balancers</code> - (Optional) The list of internal load balancers to health check.
Structure is <a href="#nested_internal_load_balancers">documented below</a>.</p></li>
<li><p><code>external_endpoints</code> - (Optional) The list of external endpoint addresses to health check.</p></li>
</ul>

<p><a name="nested_internal_load_balancers"></a>The <code>internal_load_balancers</code> block supports:</p>

<ul>
<li><p><code>load_balancer_type</code> - (Optional) The type of load balancer. This value is case-sensitive. Possible values: ["regionalL4ilb", "regionalL7ilb", "globalL7ilb"]</p></li>
<li><p><code>ip_address</code> - (Required) The frontend IP address of the load balancer.</p></li>
<li><p><code>port</code> - (Required) The configured port of the load balancer.</p></li>
<li><p><code>ip_protocol</code> - (Required) The configured IP protocol of the load balancer. This value is case-sensitive. Possible values: ["tcp", "udp"]</p></li>
<li><p><code>network_url</code> - (Required) The fully qualified url of the network in which the load balancer belongs. This should be formatted like <code>projects/{project}/global/networks/{network}</code> or <code>https://www.googleapis.com/compute/v1/projects/{project}/global/networks/{network}</code>.</p></li>
<li><p><code>project</code> - (Required) The ID of the project in which the load balancer belongs.</p></li>
<li><p><code>region</code> - (Optional) The region of the load balancer. Only needed for regional load balancers.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>-In addition to the arguments listed above, the following computed attributes are
-exported:</p>

<ul>
<li><code>id</code> - an identifier for the resource with format <code>projects/{{project}}/managedZones/{{zone}}/rrsets/{{name}}/{{type}}</code></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>DNS record sets can be imported using either of these accepted formats:</p>

<ul>
<li><code>projects/{{project}}/managedZones/{{zone}}/rrsets/{{name}}/{{type}}</code></li>
<li><code>{{project}}/{{zone}}/{{name}}/{{type}}</code></li>
<li><code>{{zone}}/{{name}}/{{type}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import DNS record sets using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"projects/{{project}}/managedZones/{{zone}}/rrsets/{{name}}/{{type}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_dns_record_set.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, DNS record sets can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_dns_record_set.default projects/{{project}}/managedZones/{{zone}}/rrsets/{{name}}/{{type}}
$ terraform import google_dns_record_set.default {{project}}/{{zone}}/{{name}}/{{type}}
$ terraform import google_dns_record_set.default {{zone}}/{{name}}/{{type}}
</code></pre>

<p>Note: The record name must include the trailing dot at the end.</p>

            
        
    </body></html>
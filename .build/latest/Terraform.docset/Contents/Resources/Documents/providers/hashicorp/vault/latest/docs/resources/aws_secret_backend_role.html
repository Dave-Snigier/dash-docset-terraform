<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/vault/latest/docs/resources/aws_secret_backend_role --><head>
                <title>vault_aws_secret_backend_role</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="vault_aws_secret_backend_role">vault_aws_secret_backend_role</h1>

<p>Creates a role on an AWS Secret Backend for Vault. Roles are
used to map credentials to the policies that generated them.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>Important</em>
    <p>All data provided in the resource configuration will be written in cleartext to state and plan files generated by Terraform, and will appear in the console output when Terraform runs. Protect these artifacts accordingly. See <a href="../index.html">the main provider documentation</a> for more details.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_aws_secret_backend"</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">access_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AKIA....."</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS secret key"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_aws_secret_backend_role"</span><span class="w"> </span><span class="nv">"role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_aws_secret_backend.aws.path</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"deploy"</span><span class="w"></span>
<span class="w">  </span><span class="na">credential_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"iam_user"</span><span class="w"></span>

<span class="w">  </span><span class="na">policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="dl">EOT</span><span class="sh"></span>
<span class="sh">{</span>
<span class="sh">  "Version": "2012-10-17",</span>
<span class="sh">  "Statement": [</span>
<span class="sh">    {</span>
<span class="sh">      "Effect": "Allow",</span>
<span class="sh">      "Action": "iam:*",</span>
<span class="sh">      "Resource": "*"</span>
<span class="sh">    }</span>
<span class="sh">  ]</span>
<span class="sh">}</span>
<span class="dl">EOT</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>namespace</code> - (Optional) The namespace to provision the resource in.
The value should not contain leading or trailing forward slashes.
The <code>namespace</code> is always relative to the provider's configured <a href="../index.html#namespace">namespace</a>.
<em>Available only for Vault Enterprise</em>.</p></li>
<li><p><code>backend</code> - (Required) The path the AWS secret backend is mounted at,
with no leading or trailing <code>/</code>s.</p></li>
<li><p><code>name</code> - (Required) The name to identify this role within the backend.
Must be unique within the backend.</p></li>
<li><p><code>credential_type</code> - (Required) Specifies the type of credential to be used when
retrieving credentials from the role. Must be one of <code>iam_user</code>, <code>assumed_role</code>, or
<code>federation_token</code>.</p></li>
<li><p><code>role_arns</code> - (Optional) Specifies the ARNs of the AWS roles this Vault role
is allowed to assume. Required when <code>credential_type</code> is <code>assumed_role</code> and
prohibited otherwise.</p></li>
<li><p><code>policy_arns</code> - (Optional) Specifies a list of AWS managed policy ARNs. The
behavior depends on the credential type. With <code>iam_user</code>, the policies will be
attached to IAM users when they are requested. With <code>assumed_role</code> and
<code>federation_token</code>, the policy ARNs will act as a filter on what the credentials
can do, similar to <code>policy_document</code>. When <code>credential_type</code> is <code>iam_user</code> or
<code>federation_token</code>, at least one of <code>policy_document</code> or <code>policy_arns</code> must
be specified.</p></li>
<li><p><code>policy_document</code> - (Optional) The IAM policy document for the role. The
behavior depends on the credential type. With <code>iam_user</code>, the policy document
will be attached to the IAM user generated and augment the permissions the IAM
user has. With <code>assumed_role</code> and <code>federation_token</code>, the policy document will
act as a filter on what the credentials can do, similar to <code>policy_arns</code>.</p></li>
<li><p><code>iam_groups</code> (Optional) - A list of IAM group names. IAM users generated
against this vault role will be added to these IAM Groups. For a credential
type of <code>assumed_role</code> or <code>federation_token</code>, the policies sent to the
corresponding AWS call (sts:AssumeRole or sts:GetFederation) will be the
policies from each group in <code>iam_groups</code> combined with the <code>policy_document</code>
and <code>policy_arns</code> parameters.</p></li>
<li><p><code>iam_tags</code> (Optional) - A map of strings representing key/value pairs
to be used as tags for any IAM user that is created by this role.</p></li>
<li><p><code>session_tags</code> (Optional) - A map of strings representing key/value pairs to be set
during assume role creds creation. Valid only when <code>credential_type</code> is set to 
<code>assumed_role</code>.</p></li>
<li><p><code>external_id</code> (Optional) - External ID to set for assume role creds. 
Valid only when <code>credential_type</code> is set to <code>assumed_role</code>.</p></li>
<li><p><code>default_sts_ttl</code> - (Optional) The default TTL in seconds for STS credentials.
When a TTL is not specified when STS credentials are requested,
and a default TTL is specified on the role,
then this default TTL will be used. Valid only when <code>credential_type</code> is one of
<code>assumed_role</code> or <code>federation_token</code>.</p></li>
<li><p><code>max_sts_ttl</code> - (Optional) The max allowed TTL in seconds for STS credentials
(credentials TTL are capped to <code>max_sts_ttl</code>). Valid only when <code>credential_type</code> is
one of <code>assumed_role</code> or <code>federation_token</code>.</p></li>
<li><p><code>user_path</code> - (Optional) The path for the user name. Valid only when 
<code>credential_type</code> is <code>iam_user</code>. Default is <code>/</code>.</p></li>
<li><p><code>permissions_boundary_arn</code> - (Optional) The ARN of the AWS Permissions 
Boundary to attach to IAM users created in the role. Valid only when 
<code>credential_type</code> is <code>iam_user</code>. If not specified, then no permissions boundary 
policy will be attached.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>No additional attributes are exported by this resource.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>AWS secret backend roles can be imported using the <code>path</code>, e.g.</p>

<pre><code>$ terraform import vault_aws_secret_backend_role.role aws/roles/deploy
</code></pre>

            
        
    </body></html>
<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/transcoder_job --><head>
                <title>google_transcoder_job</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="google_transcoder_job">google_transcoder_job</h1>

<p>Transcoding Job Resource</p>

<p>To get more information about Job, see:</p>

<ul>
<li><a href="https://cloud.google.com/transcoder/docs/reference/rest/v1/projects.locations.jobs">API documentation</a></li>
<li>How-to Guides
<ul>
<li><a href="https://cloud.google.com/transcoder/docs/">Transcoder</a></li>
</ul></li>
</ul>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=transcoder_job_basic&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Transcoder%20Job%20Basic"></a><h2 id="example-usage-transcoder-job-basic">Example Usage - Transcoder Job Basic</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-job"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"US"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">  </span><span class="na">uniform_bucket_level_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">public_access_prevention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enforced"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"example_mp4"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">template_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_transcoder_job_template.default.name</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job_template"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">job_template_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-job-template"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>
<span class="w">  </span><span class="nb">config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">inputs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input0"</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.example_mp4.name}"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/outputs/"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">edit_list</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"atom0"</span><span class="w"></span>
<span class="w">      </span><span class="na">inputs</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"input0"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">640</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">360</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">495000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream1"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">1280</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">720</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2500000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2250000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">audio_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">codec</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"aac"</span><span class="w"></span>
<span class="w">        </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">64000</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_count</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_layout</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fl", "fr"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">sample_rate_hertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">48000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=transcoder_job_pubsub&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Transcoder%20Job%20Pubsub"></a><h2 id="example-usage-transcoder-job-pubsub">Example Usage - Transcoder Job Pubsub</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-job"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"US"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">  </span><span class="na">uniform_bucket_level_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">public_access_prevention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enforced"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"example_mp4"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_pubsub_topic"</span><span class="w"> </span><span class="nv">"transcoder_notifications"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-notifications"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="nb">config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">inputs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input0"</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.example_mp4.name}"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">edit_list</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"atom0"</span><span class="w"></span>
<span class="w">      </span><span class="na">inputs</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"input0"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">ad_breaks</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3.500s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">640</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">360</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">495000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream1"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">1280</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">720</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2500000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2250000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">audio_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">codec</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"aac"</span><span class="w"></span>
<span class="w">        </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">64000</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_count</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_layout</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fl", "fr"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">sample_rate_hertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">48000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">pubsub_destination</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_pubsub_topic.transcoder_notifications.id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/outputs/"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=transcoder_job_encryptions&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Transcoder%20Job%20Encryptions"></a><h2 id="example-usage-transcoder-job-encryptions">Example Usage - Transcoder Job Encryptions</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-job"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"US"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">  </span><span class="na">uniform_bucket_level_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">public_access_prevention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enforced"</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"example_mp4"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_secret_manager_secret"</span><span class="w"> </span><span class="nv">"encryption_key"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-encryption-key"</span><span class="w"></span>
<span class="w">  </span><span class="nb">replication</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">auto</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_secret_manager_secret_version"</span><span class="w"> </span><span class="nv">"encryption_key"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">secret</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret.encryption_key.name</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"4A67F2C1B8E93A4F6D3E7890A1BC23DF"</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"google_project"</span><span class="w"> </span><span class="nv">"project"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># this is required to allow the transcoder service identity to access the secret</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_project_service_identity"</span><span class="w"> </span><span class="nv">"transcoder"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.google_project.project.project_id</span><span class="w"></span>
<span class="w">  </span><span class="na">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder.googleapis.com"</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_secret_manager_secret_iam_member"</span><span class="w"> </span><span class="nv">"transcoder_encryption_key_accessor"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret.encryption_key.secret_id</span><span class="w"></span>
<span class="w">  </span><span class="na">project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret.encryption_key.project</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"roles/secretmanager.secretAccessor"</span><span class="w"></span>
<span class="w">  </span><span class="na">member</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"serviceAccount:${google_project_service_identity.transcoder.email}"</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="nb">config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">inputs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input0"</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.example_mp4.name}"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"es_video"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"main"</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">600</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">800</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">1000000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"es_audio"</span><span class="w"></span>
<span class="w">      </span><span class="nb">audio_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">codec</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"aac"</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">        </span><span class="na">bitrate_bps</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">160000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">encryptions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"aes-128"</span><span class="w"></span>
<span class="w">      </span><span class="nb">secret_manager_key_source</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">secret_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret_version.encryption_key.name</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">drm_systems</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">clearkey</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">aes128</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">encryptions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cenc"</span><span class="w"></span>
<span class="w">      </span><span class="nb">secret_manager_key_source</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">secret_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret_version.encryption_key.name</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">drm_systems</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">widevine</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">mpeg_cenc</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">scheme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cenc"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">encryptions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cbcs"</span><span class="w"></span>
<span class="w">      </span><span class="nb">secret_manager_key_source</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">secret_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_secret_manager_secret_version.encryption_key.name</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">drm_systems</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">widevine</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">mpeg_cenc</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">scheme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cbcs"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"ts_aes128"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"ts"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"es_video", "es_audio"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nb">segment_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">segment_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"6s"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">encryption_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"aes-128"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4_cenc_video"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"es_video"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nb">segment_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">segment_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"6s"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">encryption_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cenc"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4_cenc_audio"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"es_audio"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nb">segment_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">segment_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"6s"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">encryption_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cenc"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4_cbcs_video"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"es_video"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nb">segment_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">segment_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"6s"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">encryption_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cbcs"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4_cbcs_audio"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"es_audio"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="nb">segment_settings</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">segment_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"6s"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="na">encryption_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cbcs"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">manifests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"manifest_aes128.m3u8"</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"HLS"</span><span class="w"></span>
<span class="w">      </span><span class="na">mux_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"ts_aes128"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">manifests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"manifest_cenc.mpd"</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"DASH"</span><span class="w"></span>
<span class="w">      </span><span class="na">mux_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fmp4_cenc_video", "fmp4_cenc_audio"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">manifests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"manifest_cbcs.mpd"</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"DASH"</span><span class="w"></span>
<span class="w">      </span><span class="na">mux_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fmp4_cbcs_video", "fmp4_cbcs_audio"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/outputs/"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">google-beta</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=transcoder_job_overlays&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Transcoder%20Job%20Overlays"></a><h2 id="example-usage-transcoder-job-overlays">Example Usage - Transcoder Job Overlays</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-job"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"US"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">  </span><span class="na">uniform_bucket_level_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">public_access_prevention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enforced"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"example_mp4"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"overlay_png"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"overlay.png"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/overlay.png"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="nb">config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">inputs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input0"</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.example_mp4.name}"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">edit_list</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"atom0"</span><span class="w"></span>
<span class="w">      </span><span class="na">inputs</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"input0"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">ad_breaks</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3.500s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">overlays</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">animations</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">animation_fade</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">fade_type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"FADE_IN"</span><span class="w"></span>
<span class="w">          </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1.500s"</span><span class="w"></span>
<span class="w">          </span><span class="na">end_time_offset</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"3.500s"</span><span class="w"></span>
<span class="w">          </span><span class="nb">xy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="na">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">            </span><span class="na">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">0.5</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">image</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.overlay_png.name}"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">640</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">360</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">495000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream1"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">1280</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">720</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2500000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2250000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">audio_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">codec</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"aac"</span><span class="w"></span>
<span class="w">        </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">64000</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_count</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_layout</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fl", "fr"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">sample_rate_hertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">48000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/outputs/"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<div class="oics-button" style="float: right; margin: 0 0 -15px">
  <a href="https://console.cloud.google.com/cloudshell/open?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fterraform-google-modules%2Fdocs-examples.git&amp;cloudshell_image=gcr.io%2Fcloudshell-images%2Fcloudshell%3Alatest&amp;cloudshell_print=.%2Fmotd&amp;cloudshell_tutorial=.%2Ftutorial.md&amp;cloudshell_working_dir=transcoder_job_manifests&amp;open_in_editor=main.tf" target="_blank">
    <img alt="Open in Cloud Shell" src="//gstatic.com/cloudssh/images/open-btn.svg" style="max-height: 44px; margin: 32px auto; max-width: 100%;"/>
  </a>
</div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage%20-%20Transcoder%20Job%20Manifests"></a><h2 id="example-usage-transcoder-job-manifests">Example Usage - Transcoder Job Manifests</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"transcoder-job"</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"US"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>

<span class="w">  </span><span class="na">uniform_bucket_level_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">public_access_prevention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"enforced"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_storage_bucket_object"</span><span class="w"> </span><span class="nv">"example_mp4"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./test-fixtures/example.mp4"</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_storage_bucket.default.name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"google_transcoder_job"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">location</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-central1"</span><span class="w"></span>

<span class="w">  </span><span class="nb">config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">inputs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"input0"</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/${google_storage_bucket_object.example_mp4.name}"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">edit_list</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"atom0"</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0s"</span><span class="w"></span>
<span class="w">      </span><span class="na">inputs</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"input0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">ad_breaks</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">start_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3.500s"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">640</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">360</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">495000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>

<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-stream1"</span><span class="w"></span>
<span class="w">      </span><span class="nb">video_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">h264</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">width_pixels</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">1280</span><span class="w"></span>
<span class="w">          </span><span class="na">height_pixels</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">720</span><span class="w"></span>
<span class="w">          </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">550000</span><span class="w"></span>
<span class="w">          </span><span class="na">frame_rate</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">          </span><span class="na">pixel_format</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"yuv420p"</span><span class="w"></span>
<span class="w">          </span><span class="na">rate_control_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vbr"</span><span class="w"></span>
<span class="w">          </span><span class="na">crf_level</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="w"></span>
<span class="w">          </span><span class="na">gop_duration</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"3s"</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_size_bits</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2500000</span><span class="w"></span>
<span class="w">          </span><span class="na">vbv_fullness_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2250000</span><span class="w"></span>
<span class="w">          </span><span class="na">entropy_coder</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cabac"</span><span class="w"></span>
<span class="w">          </span><span class="na">profile</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"high"</span><span class="w"></span>
<span class="w">          </span><span class="na">preset</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"veryfast"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">elementary_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-stream0"</span><span class="w"></span>
<span class="w">      </span><span class="nb">audio_stream</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">codec</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s2">"aac"</span><span class="w"></span>
<span class="w">        </span><span class="na">bitrate_bps</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">64000</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_count</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">        </span><span class="na">channel_layout</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"fl", "fr"</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="na">sample_rate_hertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">48000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"sd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"hd.mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"mp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"media-sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"media-sd.ts"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"ts"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"media-hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"media-hd.ts"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"ts"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1", "audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-only-sd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-only-sd.m4s"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-only-hd"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"video-only-hd.m4s"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-stream1"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">mux_streams</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-only"</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"audio-only.m4s"</span><span class="w"></span>
<span class="w">      </span><span class="na">container</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"fmp4"</span><span class="w"></span>
<span class="w">      </span><span class="na">elementary_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"audio-stream0"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">manifests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"manifest.m3u8"</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"HLS"</span><span class="w"></span>
<span class="w">      </span><span class="na">mux_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"media-sd", "media-hd"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">manifests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">file_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"manifest.mpd"</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"DASH"</span><span class="w"></span>
<span class="w">      </span><span class="na">mux_streams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"video-only-sd", "video-only-hd", "audio-only"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">uri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gs://${google_storage_bucket.default.name}/outputs/"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"label"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"key"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>location</code> -
(Required)
The location of the transcoding job resource.</li>
</ul>

<hr/>

<ul>
<li><p><code>labels</code> -
(Optional)
The labels associated with this job. You can use these to organize and group your jobs.</p>

<p><strong>Note</strong>: This field is non-authoritative, and will only manage the labels present in your configuration.
Please refer to the field <code>effective_labels</code> for all of the labels present on the resource.</p></li>
<li><p><code>template_id</code> -
(Optional)
Specify the templateId to use for populating Job.config.
The default is preset/web-hd, which is the only supported preset.</p></li>
<li><p><code>config</code> -
(Optional)
The configuration for this template.
Structure is <a href="#nested_config">documented below</a>.</p></li>
<li><p><code>project</code> - (Optional) The ID of the project in which the resource belongs.
If it is not provided, the provider project is used.</p></li>
</ul>

<p><a name="nested_config"></a>The <code>config</code> block supports:</p>

<ul>
<li><p><code>inputs</code> -
(Optional)
List of input assets stored in Cloud Storage.
Structure is <a href="#nested_config_inputs">documented below</a>.</p></li>
<li><p><code>edit_list</code> -
(Optional)
List of input assets stored in Cloud Storage.
Structure is <a href="#nested_config_edit_list">documented below</a>.</p></li>
<li><p><code>elementary_streams</code> -
(Optional)
List of input assets stored in Cloud Storage.
Structure is <a href="#nested_config_elementary_streams">documented below</a>.</p></li>
<li><p><code>mux_streams</code> -
(Optional)
Multiplexing settings for output stream.
Structure is <a href="#nested_config_mux_streams">documented below</a>.</p></li>
<li><p><code>manifests</code> -
(Optional)
Manifest configuration.
Structure is <a href="#nested_config_manifests">documented below</a>.</p></li>
<li><p><code>output</code> -
(Optional)
Location of output file(s) in a Cloud Storage bucket.
Structure is <a href="#nested_config_output">documented below</a>.</p></li>
<li><p><code>ad_breaks</code> -
(Optional)
Ad break.
Structure is <a href="#nested_config_ad_breaks">documented below</a>.</p></li>
<li><p><code>pubsub_destination</code> -
(Optional)
Pub/Sub destination.
Structure is <a href="#nested_config_pubsub_destination">documented below</a>.</p></li>
<li><p><code>overlays</code> -
(Optional)
List of overlays on the output video, in descending Z-order.
Structure is <a href="#nested_config_overlays">documented below</a>.</p></li>
<li><p><code>encryptions</code> -
(Optional)
List of encryption configurations for the content.
Structure is <a href="#nested_config_encryptions">documented below</a>.</p></li>
</ul>

<p><a name="nested_config_inputs"></a>The <code>inputs</code> block supports:</p>

<ul>
<li><p><code>key</code> -
(Optional)
A unique key for this input. Must be specified when using advanced mapping and edit lists.</p></li>
<li><p><code>uri</code> -
(Optional)
URI of the media. Input files must be at least 5 seconds in duration and stored in Cloud Storage (for example, gs://bucket/inputs/file.mp4).
If empty, the value is populated from Job.input_uri.</p></li>
</ul>

<p><a name="nested_config_edit_list"></a>The <code>edit_list</code> block supports:</p>

<ul>
<li><p><code>key</code> -
(Optional)
A unique key for this atom.</p></li>
<li><p><code>inputs</code> -
(Optional)
List of values identifying files that should be used in this atom.</p></li>
<li><p><code>start_time_offset</code> -
(Optional)
Start time in seconds for the atom, relative to the input file timeline. The default is <code>0s</code>.</p></li>
</ul>

<p><a name="nested_config_elementary_streams"></a>The <code>elementary_streams</code> block supports:</p>

<ul>
<li><p><code>key</code> -
(Optional)
A unique key for this atom.</p></li>
<li><p><code>video_stream</code> -
(Optional)
Encoding of a video stream.
Structure is <a href="#nested_config_elementary_streams_elementary_streams_video_stream">documented below</a>.</p></li>
<li><p><code>audio_stream</code> -
(Optional)
Encoding of an audio stream.
Structure is <a href="#nested_config_elementary_streams_elementary_streams_audio_stream">documented below</a>.</p></li>
</ul>

<p><a name="nested_config_elementary_streams_elementary_streams_video_stream"></a>The <code>video_stream</code> block supports:</p>

<ul>
<li><code>h264</code> -
(Optional)
H264 codec settings
Structure is <a href="#nested_config_elementary_streams_elementary_streams_video_stream_h264">documented below</a>.</li>
</ul>

<p><a name="nested_config_elementary_streams_elementary_streams_video_stream_h264"></a>The <code>h264</code> block supports:</p>

<ul>
<li><p><code>width_pixels</code> -
(Optional)
The width of the video in pixels.</p></li>
<li><p><code>height_pixels</code> -
(Optional)
The height of the video in pixels.</p></li>
<li><p><code>frame_rate</code> -
(Required)
The target video frame rate in frames per second (FPS).</p></li>
<li><p><code>bitrate_bps</code> -
(Required)
The video bitrate in bits per second.</p></li>
<li><p><code>pixel_format</code> -
(Optional)
Pixel format to use. The default is <code>yuv420p</code>.</p></li>
<li><p><code>rate_control_mode</code> -
(Optional)
Specify the mode. The default is <code>vbr</code>.</p></li>
<li><p><code>crf_level</code> -
(Optional)
Target CRF level. The default is <code>21</code>.</p></li>
<li><p><code>vbv_size_bits</code> -
(Optional)
Size of the Video Buffering Verifier (VBV) buffer in bits.</p></li>
<li><p><code>vbv_fullness_bits</code> -
(Optional)
Initial fullness of the Video Buffering Verifier (VBV) buffer in bits.</p></li>
<li><p><code>entropy_coder</code> -
(Optional)
The entropy coder to use. The default is <code>cabac</code>.</p></li>
<li><p><code>profile</code> -
(Optional)
Enforces the specified codec profile.</p></li>
<li><p><code>preset</code> -
(Optional)
Enforces the specified codec preset. The default is <code>veryfast</code>.</p></li>
<li><p><code>gop_duration</code> -
(Optional)
Select the GOP size based on the specified duration. The default is <code>3s</code>.</p></li>
<li><p><code>sdr</code> -
(Optional)
SDR color format setting for H264.</p></li>
<li><p><code>hlg</code> -
(Optional)
HLG color format setting for H264.</p></li>
</ul>

<p><a name="nested_config_elementary_streams_elementary_streams_audio_stream"></a>The <code>audio_stream</code> block supports:</p>

<ul>
<li><p><code>codec</code> -
(Optional)
The codec for this audio stream. The default is <code>aac</code>.</p></li>
<li><p><code>bitrate_bps</code> -
(Required)
Audio bitrate in bits per second.</p></li>
<li><p><code>channel_count</code> -
(Optional)
Number of audio channels. The default is <code>2</code>.</p></li>
<li><p><code>channel_layout</code> -
(Optional)
A list of channel names specifying layout of the audio channels. The default is ["fl", "fr"].</p></li>
<li><p><code>sample_rate_hertz</code> -
(Optional)
The audio sample rate in Hertz. The default is <code>48000</code>.</p></li>
</ul>

<p><a name="nested_config_mux_streams"></a>The <code>mux_streams</code> block supports:</p>

<ul>
<li><p><code>key</code> -
(Optional)
A unique key for this multiplexed stream.</p></li>
<li><p><code>file_name</code> -
(Optional)
The name of the generated file.</p></li>
<li><p><code>container</code> -
(Optional)
The container format. The default is <code>mp4</code>.</p></li>
<li><p><code>elementary_streams</code> -
(Optional)
List of ElementaryStream.key values multiplexed in this stream.</p></li>
<li><p><code>segment_settings</code> -
(Optional)
Segment settings for ts, fmp4 and vtt.
Structure is <a href="#nested_config_mux_streams_mux_streams_segment_settings">documented below</a>.</p></li>
<li><p><code>encryption_id</code> -
(Optional)
Identifier of the encryption configuration to use.</p></li>
</ul>

<p><a name="nested_config_mux_streams_mux_streams_segment_settings"></a>The <code>segment_settings</code> block supports:</p>

<ul>
<li><code>segment_duration</code> -
(Optional)
Duration of the segments in seconds. The default is <code>6.0s</code>.</li>
</ul>

<p><a name="nested_config_manifests"></a>The <code>manifests</code> block supports:</p>

<ul>
<li><p><code>file_name</code> -
(Optional)
The name of the generated file. The default is <code>manifest</code>.</p></li>
<li><p><code>type</code> -
(Required)
Type of the manifest.
Possible values are: <code>MANIFEST_TYPE_UNSPECIFIED</code>, <code>HLS</code>, <code>DASH</code>.</p></li>
<li><p><code>mux_streams</code> -
(Optional)
List of user supplied MuxStream.key values that should appear in this manifest.</p></li>
</ul>

<p><a name="nested_config_output"></a>The <code>output</code> block supports:</p>

<ul>
<li><code>uri</code> -
(Optional)
URI for the output file(s). For example, gs://my-bucket/outputs/.</li>
</ul>

<p><a name="nested_config_ad_breaks"></a>The <code>ad_breaks</code> block supports:</p>

<ul>
<li><code>start_time_offset</code> -
(Optional)
Start time in seconds for the ad break, relative to the output file timeline</li>
</ul>

<p><a name="nested_config_pubsub_destination"></a>The <code>pubsub_destination</code> block supports:</p>

<ul>
<li><code>topic</code> -
(Optional)
The name of the Pub/Sub topic to publish job completion notification to. For example: projects/{project}/topics/{topic}.</li>
</ul>

<p><a name="nested_config_overlays"></a>The <code>overlays</code> block supports:</p>

<ul>
<li><p><code>image</code> -
(Optional)
Image overlay.
Structure is <a href="#nested_config_overlays_overlays_image">documented below</a>.</p></li>
<li><p><code>animations</code> -
(Optional)
List of animations. The list should be chronological, without any time overlap.
Structure is <a href="#nested_config_overlays_overlays_animations">documented below</a>.</p></li>
</ul>

<p><a name="nested_config_overlays_overlays_image"></a>The <code>image</code> block supports:</p>

<ul>
<li><code>uri</code> -
(Required)
URI of the image in Cloud Storage. For example, gs://bucket/inputs/image.png.</li>
</ul>

<p><a name="nested_config_overlays_overlays_animations"></a>The <code>animations</code> block supports:</p>

<ul>
<li><code>animation_fade</code> -
(Optional)
Display overlay object with fade animation.
Structure is <a href="#nested_config_overlays_overlays_animations_animations_animation_fade">documented below</a>.</li>
</ul>

<p><a name="nested_config_overlays_overlays_animations_animations_animation_fade"></a>The <code>animation_fade</code> block supports:</p>

<ul>
<li><p><code>xy</code> -
(Optional)
Normalized coordinates based on output video resolution.
Structure is <a href="#nested_config_overlays_overlays_animations_animations_animation_fade_xy">documented below</a>.</p></li>
<li><p><code>start_time_offset</code> -
(Optional)
The time to start the fade animation, in seconds.</p></li>
<li><p><code>end_time_offset</code> -
(Optional)
The time to end the fade animation, in seconds.</p></li>
<li><p><code>fade_type</code> -
(Required)
Required. Type of fade animation: <code>FADE_IN</code> or <code>FADE_OUT</code>.
The possible values are:</p>

<ul>
<li><code>FADE_TYPE_UNSPECIFIED</code>: The fade type is not specified.</li>
<li><code>FADE_IN</code>: Fade the overlay object into view.</li>
<li><code>FADE_OUT</code>: Fade the overlay object out of view.
Possible values are: <code>FADE_TYPE_UNSPECIFIED</code>, <code>FADE_IN</code>, <code>FADE_OUT</code>.</li>
</ul></li>
</ul>

<p><a name="nested_config_overlays_overlays_animations_animations_animation_fade_xy"></a>The <code>xy</code> block supports:</p>

<ul>
<li><p><code>x</code> -
(Optional)
Normalized x coordinate.</p></li>
<li><p><code>y</code> -
(Optional)
Normalized y coordinate.</p></li>
</ul>

<p><a name="nested_config_encryptions"></a>The <code>encryptions</code> block supports:</p>

<ul>
<li><p><code>id</code> -
(Required)
Identifier for this set of encryption options.</p></li>
<li><p><code>drm_systems</code> -
(Optional)
DRM system(s) to use; at least one must be specified. If a DRM system is omitted, it is considered disabled.
Structure is <a href="#nested_config_encryptions_encryptions_drm_systems">documented below</a>.</p></li>
<li><p><code>aes128</code> -
(Optional)
Configuration for AES-128 encryption.</p></li>
<li><p><code>sample_aes</code> -
(Optional)
Configuration for SAMPLE-AES encryption.</p></li>
<li><p><code>mpeg_cenc</code> -
(Optional)
Configuration for MPEG Common Encryption (MPEG-CENC).
Structure is <a href="#nested_config_encryptions_encryptions_mpeg_cenc">documented below</a>.</p></li>
<li><p><code>secret_manager_key_source</code> -
(Optional)
Configuration for secrets stored in Google Secret Manager.
Structure is <a href="#nested_config_encryptions_encryptions_secret_manager_key_source">documented below</a>.</p></li>
</ul>

<p><a name="nested_config_encryptions_encryptions_drm_systems"></a>The <code>drm_systems</code> block supports:</p>

<ul>
<li><p><code>widevine</code> -
(Optional)
Widevine configuration.</p></li>
<li><p><code>fairplay</code> -
(Optional)
Fairplay configuration.</p></li>
<li><p><code>playready</code> -
(Optional)
Playready configuration.</p></li>
<li><p><code>clearkey</code> -
(Optional)
Clearkey configuration.</p></li>
</ul>

<p><a name="nested_config_encryptions_encryptions_mpeg_cenc"></a>The <code>mpeg_cenc</code> block supports:</p>

<ul>
<li><code>scheme</code> -
(Required)
Specify the encryption scheme.</li>
</ul>

<p><a name="nested_config_encryptions_encryptions_secret_manager_key_source"></a>The <code>secret_manager_key_source</code> block supports:</p>

<ul>
<li><code>secret_version</code> -
(Required)
The name of the Secret Version containing the encryption key in the following format: projects/{project}/secrets/{secret_id}/versions/{version_number}.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the arguments listed above, the following computed attributes are exported:</p>

<ul>
<li><p><code>id</code> - an identifier for the resource with format <code>{{name}}</code></p></li>
<li><p><code>name</code> -
The resource name of the job.</p></li>
<li><p><code>create_time</code> -
The time the job was created.</p></li>
<li><p><code>start_time</code> -
The time the transcoding started.</p></li>
<li><p><code>end_time</code> -
The time the transcoding finished.</p></li>
<li><p><code>state</code> -
The current state of the job.</p></li>
<li><p><code>terraform_labels</code> -
The combination of labels configured directly on the resource
and default labels configured on the provider.</p></li>
<li><p><code>effective_labels</code> -
All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>This resource provides the following
<a href="https://developer.hashicorp.com/terraform/plugin/sdkv2/resources/retries-and-customizable-timeouts">Timeouts</a> configuration options:</p>

<ul>
<li><code>create</code> - Default is 20 minutes.</li>
<li><code>update</code> - Default is 20 minutes.</li>
<li><code>delete</code> - Default is 20 minutes.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Job can be imported using any of these accepted formats:</p>

<ul>
<li><code>{{project}}/{{name}}</code></li>
<li><code>{{project}} {{name}}</code></li>
<li><code>{{name}}</code></li>
</ul>

<p>In Terraform v1.5.0 and later, use an <a href="https://developer.hashicorp.com/terraform/language/import"><code>import</code> block</a> to import Job using one of the formats above. For example:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">import</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"{{project}}/{{name}}"</span><span class="w"></span>
<span class="w">  </span><span class="na">to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">google_transcoder_job.default</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>When using the <a href="https://developer.hashicorp.com/terraform/cli/commands/import"><code>terraform import</code> command</a>, Job can be imported using one of the formats above. For example:</p>

<pre><code>$ terraform import google_transcoder_job.default {{project}}/{{name}}
$ terraform import google_transcoder_job.default "{{project}} {{name}}"
$ terraform import google_transcoder_job.default {{name}}
</code></pre>

<a class="dashAnchor" name="//apple_ref/cpp/Section/User%20Project%20Overrides"></a><h2 id="user-project-overrides">User Project Overrides</h2>

<p>This resource supports <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference#user_project_override">User Project Overrides</a>.</p>

            
        
    </body></html>
<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/vault_cluster --><head>
                <title>hcp_vault_cluster</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="hcp_vault_cluster-resource">hcp_vault_cluster (Resource)</h1>

<p>The Vault cluster resource allows you to manage an HCP Vault cluster.</p>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>It is recommended to set <code>lifecycle { prevent_destroy = true }</code> on production Vault instances to prevent accidental cluster deletion. This setting rejects plans that would destroy the cluster, such as attempting to change the <code>hvn_id</code>. Read more about it in the <a href="https://www.terraform.io/language/meta-arguments/lifecycle#prevent_destroy">Terraform docs</a>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"hcp_hvn"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">hvn_id</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"hvn"</span><span class="w"></span>
<span class="w">  </span><span class="na">cloud_provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"aws"</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"us-west-2"</span><span class="w"></span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"172.25.16.0/20"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"hcp_vault_cluster"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"vault-cluster"</span><span class="w"></span>
<span class="w">  </span><span class="na">hvn_id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">hcp_hvn.example.hvn_id</span><span class="w"></span>
<span class="w">  </span><span class="na">tier</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"standard_large"</span><span class="w"></span>
<span class="w">  </span><span class="nb">metrics_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">datadog_api_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test_datadog"</span><span class="w"></span>
<span class="w">    </span><span class="na">datadog_region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"us1"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">audit_log_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">datadog_api_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test_datadog"</span><span class="w"></span>
<span class="w">    </span><span class="na">datadog_region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"us1"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">lifecycle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">prevent_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>cluster_id</code> (String) The ID of the HCP Vault cluster.</li>
<li><code>hvn_id</code> (String) The ID of the HVN this HCP Vault cluster is associated to.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>audit_log_config</code> (Block List, Max: 1) The audit logs configuration for export. (https://developer.hashicorp.com/vault/tutorials/cloud-monitoring/vault-metrics-guide#metrics-streaming-configuration) (see <a href="#nestedblock--audit_log_config">below for nested schema</a>)</li>
<li><code>ip_allowlist</code> (Block List, Max: 50) Allowed IPV4 address ranges (CIDRs) for inbound traffic. Each entry must be a unique CIDR. Maximum 50 CIDRS supported at this time. (see <a href="#nestedblock--ip_allowlist">below for nested schema</a>)</li>
<li><code>major_version_upgrade_config</code> (Block List, Max: 1) The Major Version Upgrade configuration. (see <a href="#nestedblock--major_version_upgrade_config">below for nested schema</a>)</li>
<li><code>metrics_config</code> (Block List, Max: 1) The metrics configuration for export. (https://developer.hashicorp.com/vault/tutorials/cloud-monitoring/vault-metrics-guide#metrics-streaming-configuration) (see <a href="#nestedblock--metrics_config">below for nested schema</a>)</li>
<li><code>min_vault_version</code> (String) The minimum Vault version to use when creating the cluster. If not specified, it is defaulted to the version that is currently recommended by HCP.</li>
<li><code>paths_filter</code> (List of String) The performance replication <a href="https://developer.hashicorp.com/vault/tutorials/cloud-ops/vault-replication-terraform">paths filter</a>. Applies to performance replication secondaries only and operates in "deny" mode only.</li>
<li><code>primary_link</code> (String) The <code>self_link</code> of the HCP Vault Plus tier cluster which is the primary in the performance replication setup with this HCP Vault Plus tier cluster. If not specified, it is a standalone Plus tier HCP Vault cluster.</li>
<li><code>project_id</code> (String) The ID of the HCP project where the Vault cluster is located.
If not specified, the project specified in the HCP Provider config block will be used, if configured.
If a project is not configured in the HCP Provider config block, the oldest project in the organization will be used.</li>
<li><code>proxy_endpoint</code> (String) Denotes that the cluster has a proxy endpoint. Valid options are <code>ENABLED</code>, <code>DISABLED</code>. Defaults to <code>DISABLED</code>.</li>
<li><code>public_endpoint</code> (Boolean) Denotes that the cluster has a public endpoint. Defaults to false.</li>
<li><code>tier</code> (String) Tier of the HCP Vault cluster. Valid options for tiers - <code>dev</code>, <code>standard_small</code>, <code>standard_medium</code>, <code>standard_large</code>, <code>plus_small</code>, <code>plus_medium</code>, <code>plus_large</code>. See <a href="https://www.hashicorp.com/products/vault/pricing">pricing information</a>. Changing a cluster's size or tier is only available to admins. See <a href="https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/guides/vault-scaling">Scale a cluster</a>.</li>
<li><code>timeouts</code> (Block, Optional) (see <a href="#nestedblock--timeouts">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>cloud_provider</code> (String) The provider where the HCP Vault cluster is located.</li>
<li><code>created_at</code> (String) The time that the Vault cluster was created.</li>
<li><code>id</code> (String) The ID of this resource.</li>
<li><code>namespace</code> (String) The name of the customer namespace this HCP Vault cluster is located in.</li>
<li><code>organization_id</code> (String) The ID of the organization this HCP Vault cluster is located in.</li>
<li><code>region</code> (String) The region where the HCP Vault cluster is located.</li>
<li><code>self_link</code> (String) A unique URL identifying the Vault cluster.</li>
<li><code>state</code> (String) The state of the Vault cluster.</li>
<li><code>vault_private_endpoint_url</code> (String) The private URL for the Vault cluster.</li>
<li><code>vault_proxy_endpoint_url</code> (String) The proxy URL for the Vault cluster. This will be empty if <code>proxy_endpoint</code> is <code>DISABLED</code>.</li>
<li><code>vault_public_endpoint_url</code> (String) The public URL for the Vault cluster. This will be empty if <code>public_endpoint</code> is <code>false</code>.</li>
<li><code>vault_version</code> (String) The Vault version of the cluster.</li>
</ul>

<p><a id="nestedblock--audit_log_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20audit_log_config"></a><h3 id="nested-schema-for-audit_log_config">Nested Schema for <code>audit_log_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>cloudwatch_access_key_id</code> (String) CloudWatch access key ID for streaming audit logs</li>
<li><code>cloudwatch_region</code> (String) CloudWatch region for streaming audit logs</li>
<li><code>cloudwatch_secret_access_key</code> (String, Sensitive) CloudWatch secret access key for streaming audit logs</li>
<li><code>datadog_api_key</code> (String, Sensitive) Datadog api key for streaming audit logs</li>
<li><code>datadog_region</code> (String) Datadog region for streaming audit logs</li>
<li><code>elasticsearch_endpoint</code> (String) ElasticSearch endpoint for streaming audit logs</li>
<li><code>elasticsearch_password</code> (String, Sensitive) ElasticSearch password for streaming audit logs</li>
<li><code>elasticsearch_user</code> (String) ElasticSearch user for streaming audit logs</li>
<li><code>grafana_endpoint</code> (String) Grafana endpoint for streaming audit logs</li>
<li><code>grafana_password</code> (String, Sensitive) Grafana password for streaming audit logs</li>
<li><code>grafana_user</code> (String) Grafana user for streaming audit logs</li>
<li><code>http_basic_password</code> (String, Sensitive) HTTP basic authentication password for streaming audit logs, one of the two available authentication methods, can be specified only if http_basic_user is also provided</li>
<li><code>http_basic_user</code> (String) HTTP basic authentication username for streaming audit logs, one of the two available authentication methods, can be specified only if http_basic_password is also provided</li>
<li><code>http_bearer_token</code> (String, Sensitive) HTTP bearer authentication token for streaming audit logs, one of the two available authentication methods, can be specified only if http_basic_user and http_basic_password are not provided</li>
<li><code>http_codec</code> (String) HTTP codec for streaming audit logs, allowed values are JSON and NDJSON</li>
<li><code>http_compression</code> (Boolean) HTTP compression flag for streaming audit logs</li>
<li><code>http_headers</code> (Map of String) HTTP headers for streaming audit logs</li>
<li><code>http_method</code> (String) HTTP payload method for streaming audit logs, , allowed values are PATCH, POST, or PUT</li>
<li><code>http_payload_prefix</code> (String) HTTP payload prefix for streaming audit logs</li>
<li><code>http_payload_suffix</code> (String) HTTP payload suffix for streaming audit logs</li>
<li><code>http_uri</code> (String) HTTP URI for streaming audit logs</li>
<li><code>newrelic_account_id</code> (String) NewRelic Account ID for streaming audit logs</li>
<li><code>newrelic_license_key</code> (String, Sensitive) NewRelic license key for streaming audit logs</li>
<li><code>newrelic_region</code> (String) NewRelic region for streaming audit logs, allowed values are "US" and "EU"</li>
<li><code>splunk_hecendpoint</code> (String) Splunk endpoint for streaming audit logs</li>
<li><code>splunk_token</code> (String, Sensitive) Splunk token for streaming audit logs</li>
</ul>

<p>Read-Only:</p>

<ul>
<li><code>cloudwatch_group_name</code> (String) CloudWatch group name of the target log stream for audit logs</li>
<li><code>cloudwatch_stream_name</code> (String) CloudWatch stream name for the target log stream for audit logs</li>
<li><code>elasticsearch_dataset</code> (String) ElasticSearch dataset for streaming audit logs</li>
</ul>

<p><a id="nestedblock--ip_allowlist"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20ip_allowlist"></a><h3 id="nested-schema-for-ip_allowlist">Nested Schema for <code>ip_allowlist</code></h3>

<p>Required:</p>

<ul>
<li><code>address</code> (String) IP address range in CIDR notation.</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>description</code> (String) Description to help identify source (maximum 255 chars).</li>
</ul>

<p><a id="nestedblock--major_version_upgrade_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20major_version_upgrade_config"></a><h3 id="nested-schema-for-major_version_upgrade_config">Nested Schema for <code>major_version_upgrade_config</code></h3>

<p>Required:</p>

<ul>
<li><code>upgrade_type</code> (String) The major upgrade type for the cluster. Valid options for upgrade type - <code>AUTOMATIC</code>, <code>SCHEDULED</code>, <code>MANUAL</code></li>
</ul>

<p>Optional:</p>

<ul>
<li><code>maintenance_window_day</code> (String) The maintenance day of the week for scheduled upgrades. Valid options for maintenance window day - <code>MONDAY</code>, <code>TUESDAY</code>, <code>WEDNESDAY</code>, <code>THURSDAY</code>, <code>FRIDAY</code>, <code>SATURDAY</code>, <code>SUNDAY</code></li>
<li><code>maintenance_window_time</code> (String) The maintenance time frame for scheduled upgrades. Valid options for maintenance window time - <code>WINDOW_12AM_4AM</code>, <code>WINDOW_6AM_10AM</code>, <code>WINDOW_12PM_4PM</code>, <code>WINDOW_6PM_10PM</code></li>
</ul>

<p><a id="nestedblock--metrics_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20metrics_config"></a><h3 id="nested-schema-for-metrics_config">Nested Schema for <code>metrics_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>cloudwatch_access_key_id</code> (String) CloudWatch access key ID for streaming metrics</li>
<li><code>cloudwatch_region</code> (String) CloudWatch region for streaming metrics</li>
<li><code>cloudwatch_secret_access_key</code> (String, Sensitive) CloudWatch secret access key for streaming metrics</li>
<li><code>datadog_api_key</code> (String, Sensitive) Datadog api key for streaming metrics</li>
<li><code>datadog_region</code> (String) Datadog region for streaming metrics</li>
<li><code>elasticsearch_endpoint</code> (String) ElasticSearch endpoint for streaming metrics</li>
<li><code>elasticsearch_password</code> (String, Sensitive) ElasticSearch password for streaming metrics</li>
<li><code>elasticsearch_user</code> (String) ElasticSearch user for streaming metrics</li>
<li><code>grafana_endpoint</code> (String) Grafana endpoint for streaming metrics</li>
<li><code>grafana_password</code> (String, Sensitive) Grafana password for streaming metrics</li>
<li><code>grafana_user</code> (String) Grafana user for streaming metrics</li>
<li><code>http_basic_password</code> (String) HTTP basic authentication password for streaming metrics, one of the two available authentication methods, can be specified only if http_basic_user is also specified</li>
<li><code>http_basic_user</code> (String) HTTP basic authentication username for streaming metrics, one of the two available authentication methods, can be specified only if http_basic_password is also specified</li>
<li><code>http_bearer_token</code> (String, Sensitive) HTTP bearer authentication token for streaming metrics, one of the two available authentication methods, can be specified only if http_basic_user and http_basic_password are not provided</li>
<li><code>http_codec</code> (String) HTTP codec for streaming metrics, allowed values are JSON and NDJSON</li>
<li><code>http_compression</code> (Boolean) HTTP compression flag for streaming metrics</li>
<li><code>http_headers</code> (Map of String) HTTP headers for streaming metrics</li>
<li><code>http_method</code> (String) HTTP payload method for streaming metrics, allowed values are PATCH, POST, or PUT</li>
<li><code>http_payload_prefix</code> (String) HTTP payload prefix for streaming metrics</li>
<li><code>http_payload_suffix</code> (String) HTTP payload suffix for streaming metrics</li>
<li><code>http_uri</code> (String) HTTP URI for streaming metrics</li>
<li><code>newrelic_account_id</code> (String) NewRelic Account ID for streaming metrics</li>
<li><code>newrelic_license_key</code> (String, Sensitive) NewRelic license key for streaming metrics</li>
<li><code>newrelic_region</code> (String) NewRelic region for streaming metrics, allowed values are "US" and "EU"</li>
<li><code>splunk_hecendpoint</code> (String) Splunk endpoint for streaming metrics</li>
<li><code>splunk_token</code> (String, Sensitive) Splunk token for streaming metrics</li>
</ul>

<p>Read-Only:</p>

<ul>
<li><code>cloudwatch_namespace</code> (String) CloudWatch namespace for streaming metrics</li>
<li><code>elasticsearch_dataset</code> (String) ElasticSearch dataset for streaming metrics</li>
</ul>

<p><a id="nestedblock--timeouts"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20timeouts"></a><h3 id="nested-schema-for-timeouts">Nested Schema for <code>timeouts</code></h3>

<p>Optional:</p>

<ul>
<li><code>create</code> (String)</li>
<li><code>default</code> (String)</li>
<li><code>delete</code> (String)</li>
<li><code>update</code> (String)</li>
</ul>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>When establishing performance replication links between clusters in different HVNs, an HVN peering connection is required. This can be defined explicitly using an <a href="hvn_peering_connection.md"><code>hcp_hvn_peering_connection</code></a>, or HCP will create the connection automatically (peering connections can be imported after creation using <a href="https://www.terraform.io/cli/import">terraform import</a>). Note HVN peering <a href="https://cloud.hashicorp.com/docs/hcp/network/routes#cidr-block-requirements">CIDR block requirements</a>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code><span class="c1"># Using an explicit project ID, the import ID is:</span>
<span class="c1"># {project_id}:{cluster_id}</span>
terraform import hcp_vault_cluster.example f709ec73-55d4-46d8-897d-816ebba28778:vault-cluster
<span class="c1"># Using the provider-default project ID, the import ID is:</span>
<span class="c1"># {cluster_id}</span>
terraform import hcp_vault_cluster.example vault-cluster
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Tutorials"></a><h2 id="tutorials">Tutorials</h2>

<p>Refer to the following tutorials for additional usage examples:</p>

<ul>
<li><a href="https://developer.hashicorp.com/vault/tutorials/cloud-ops/terraform-hcp-provider-vault">Deploy HCP Vault with Terraform</a> </li>
<li><a href="https://developer.hashicorp.com/vault/tutorials/cloud-ops/vault-replication-terraform">Deploy HCP Vault Performance Replication with Terraform</a></li>
</ul>

            
        
    </body></html>
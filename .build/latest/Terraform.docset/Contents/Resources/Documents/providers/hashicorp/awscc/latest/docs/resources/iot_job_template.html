<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/iot_job_template --><head>
                <title>awscc_iot_job_template</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_iot_job_template-resource">awscc_iot_job_template (Resource)</h1>

<p>Job templates enable you to preconfigure jobs so that you can deploy them to multiple sets of target devices.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/IoT%20Job%20Template%20with%20S3%20Document%20Source"></a><h3 id="iot-job-template-with-s3-document-source">IoT Job Template with S3 Document Source</h3>

<p>Creates an IoT job template with exponential rollout configuration and pre-signed URL support, utilizing an S3 bucket to store the job document and IAM role for secure access.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Create an S3 bucket to store job document</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_s3_bucket"</span><span class="w"> </span><span class="nv">"job_document"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"iot-job-document-${data.aws_caller_identity.current.account_id}-${data.aws_region.current.name}"</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create job document content in S3</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_s3_object"</span><span class="w"> </span><span class="nv">"job_document"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_s3_bucket.job_document.id</span><span class="w"></span>
<span class="w">  </span><span class="na">key</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"job-document.json"</span><span class="w"></span>
<span class="w">  </span><span class="na">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="err">operation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"reboot"</span><span class="w"></span>
<span class="w">    </span><span class="err">timestamp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-12-31T12:00:00Z"</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># IAM role for pre-signed URL access</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"assume_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"sts:AssumeRole"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="nb">principals</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Service"</span><span class="w"></span>
<span class="w">      </span><span class="na">identifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"iot.amazonaws.com"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"s3_access"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"s3:GetObject"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"${awscc_s3_bucket.job_document.arn}/*"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"job_template"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.assume_role.json</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/service-role/"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"IoTJobTemplateRole"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"Role for IoT Job Template to access S3"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_iam_role_policy"</span><span class="w"> </span><span class="nv">"job_template"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"IoTJobTemplatePolicy"</span><span class="w"></span>
<span class="w">  </span><span class="na">role</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.job_template.id</span><span class="w"></span>
<span class="w">  </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.s3_access.json</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create IoT Job Template</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iot_job_template"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">job_template_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ExampleJobTemplate"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Example IoT job template using AWSCC provider"</span><span class="w"></span>
<span class="w">  </span><span class="na">document_source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"s3://${awscc_s3_bucket.job_document.id}/${aws_s3_object.job_document.key}"</span><span class="w"></span>

<span class="w">  </span><span class="nb">job_executions_rollout_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">maximum_per_minute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="w"></span>
<span class="w">    </span><span class="nb">exponential_rollout_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">base_rate_per_minute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="w"></span>
<span class="w">      </span><span class="na">increment_factor</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"></span>
<span class="w">      </span><span class="nb">rate_increase_criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">number_of_notified_things</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">timeout_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">in_progress_timeout_in_minutes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">presigned_url_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">role_arn</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.job_template.arn</span><span class="w"></span>
<span class="w">    </span><span class="na">expires_in_sec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3600</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>description</code> (String) A description of the Job Template.</li>
<li><code>job_template_id</code> (String)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>abort_config</code> (Attributes) The criteria that determine when and how a job abort takes place. (see <a href="#nestedatt--abort_config">below for nested schema</a>)</li>
<li><code>destination_package_versions</code> (List of String)</li>
<li><code>document</code> (String) The job document. Required if you don't specify a value for documentSource.</li>
<li><code>document_source</code> (String) An S3 link to the job document to use in the template. Required if you don't specify a value for document.</li>
<li><code>job_arn</code> (String) Optional for copying a JobTemplate from a pre-existing Job configuration.</li>
<li><code>job_executions_retry_config</code> (Attributes) (see <a href="#nestedatt--job_executions_retry_config">below for nested schema</a>)</li>
<li><code>job_executions_rollout_config</code> (Attributes) Allows you to create a staged rollout of a job. (see <a href="#nestedatt--job_executions_rollout_config">below for nested schema</a>)</li>
<li><code>maintenance_windows</code> (Attributes List) (see <a href="#nestedatt--maintenance_windows">below for nested schema</a>)</li>
<li><code>presigned_url_config</code> (Attributes) Configuration for pre-signed S3 URLs. (see <a href="#nestedatt--presigned_url_config">below for nested schema</a>)</li>
<li><code>tags</code> (Attributes Set) Metadata that can be used to manage the JobTemplate. (see <a href="#nestedatt--tags">below for nested schema</a>)</li>
<li><code>timeout_config</code> (Attributes) Specifies the amount of time each device has to finish its execution of the job. (see <a href="#nestedatt--timeout_config">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>arn</code> (String)</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
</ul>

<p><a id="nestedatt--abort_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20abort_config"></a><h3 id="nested-schema-for-abort_config">Nested Schema for <code>abort_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>criteria_list</code> (Attributes List) (see <a href="#nestedatt--abort_config--criteria_list">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--abort_config--criteria_list"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20abort_config.criteria_list"></a><h3 id="nested-schema-for-abort_configcriteria_list">Nested Schema for <code>abort_config.criteria_list</code></h3>

<p>Optional:</p>

<ul>
<li><code>action</code> (String) The type of job action to take to initiate the job abort.</li>
<li><code>failure_type</code> (String) The type of job execution failures that can initiate a job abort.</li>
<li><code>min_number_of_executed_things</code> (Number) The minimum number of things which must receive job execution notifications before the job can be aborted.</li>
<li><code>threshold_percentage</code> (Number) The minimum percentage of job execution failures that must occur to initiate the job abort.</li>
</ul>

<p><a id="nestedatt--job_executions_retry_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20job_executions_retry_config"></a><h3 id="nested-schema-for-job_executions_retry_config">Nested Schema for <code>job_executions_retry_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>retry_criteria_list</code> (Attributes List) (see <a href="#nestedatt--job_executions_retry_config--retry_criteria_list">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--job_executions_retry_config--retry_criteria_list"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20job_executions_retry_config.retry_criteria_list"></a><h3 id="nested-schema-for-job_executions_retry_configretry_criteria_list">Nested Schema for <code>job_executions_retry_config.retry_criteria_list</code></h3>

<p>Optional:</p>

<ul>
<li><code>failure_type</code> (String)</li>
<li><code>number_of_retries</code> (Number)</li>
</ul>

<p><a id="nestedatt--job_executions_rollout_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20job_executions_rollout_config"></a><h3 id="nested-schema-for-job_executions_rollout_config">Nested Schema for <code>job_executions_rollout_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>exponential_rollout_rate</code> (Attributes) The rate of increase for a job rollout. This parameter allows you to define an exponential rate for a job rollout. (see <a href="#nestedatt--job_executions_rollout_config--exponential_rollout_rate">below for nested schema</a>)</li>
<li><code>maximum_per_minute</code> (Number) The maximum number of things that will be notified of a pending job, per minute. This parameter allows you to create a staged rollout.</li>
</ul>

<p><a id="nestedatt--job_executions_rollout_config--exponential_rollout_rate"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20job_executions_rollout_config.exponential_rollout_rate"></a><h3 id="nested-schema-for-job_executions_rollout_configexponential_rollout_rate">Nested Schema for <code>job_executions_rollout_config.exponential_rollout_rate</code></h3>

<p>Optional:</p>

<ul>
<li><code>base_rate_per_minute</code> (Number) The minimum number of things that will be notified of a pending job, per minute at the start of job rollout. This parameter allows you to define the initial rate of rollout.</li>
<li><code>increment_factor</code> (Number) The exponential factor to increase the rate of rollout for a job.</li>
<li><code>rate_increase_criteria</code> (Attributes) The criteria to initiate the increase in rate of rollout for a job. (see <a href="#nestedatt--job_executions_rollout_config--exponential_rollout_rate--rate_increase_criteria">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--job_executions_rollout_config--exponential_rollout_rate--rate_increase_criteria"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20job_executions_rollout_config.exponential_rollout_rate.rate_increase_criteria"></a><h3 id="nested-schema-for-job_executions_rollout_configexponential_rollout_raterate_increase_criteria">Nested Schema for <code>job_executions_rollout_config.exponential_rollout_rate.rate_increase_criteria</code></h3>

<p>Optional:</p>

<ul>
<li><code>number_of_notified_things</code> (Number)</li>
<li><code>number_of_succeeded_things</code> (Number)</li>
</ul>

<p><a id="nestedatt--maintenance_windows"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20maintenance_windows"></a><h3 id="nested-schema-for-maintenance_windows">Nested Schema for <code>maintenance_windows</code></h3>

<p>Optional:</p>

<ul>
<li><code>duration_in_minutes</code> (Number)</li>
<li><code>start_time</code> (String)</li>
</ul>

<p><a id="nestedatt--presigned_url_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20presigned_url_config"></a><h3 id="nested-schema-for-presigned_url_config">Nested Schema for <code>presigned_url_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>expires_in_sec</code> (Number) How number (in seconds) pre-signed URLs are valid.</li>
<li><code>role_arn</code> (String) The ARN of an IAM role that grants grants permission to download files from the S3 bucket where the job data/updates are stored. The role must also grant permission for IoT to download the files.</li>
</ul>

<p><a id="nestedatt--tags"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20tags"></a><h3 id="nested-schema-for-tags">Nested Schema for <code>tags</code></h3>

<p>Optional:</p>

<ul>
<li><code>key</code> (String) The tag's key.</li>
<li><code>value</code> (String) The tag's value.</li>
</ul>

<p><a id="nestedatt--timeout_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20timeout_config"></a><h3 id="nested-schema-for-timeout_config">Nested Schema for <code>timeout_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>in_progress_timeout_in_minutes</code> (Number) Specifies the amount of time, in minutes, this device has to finish execution of this job.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_iot_job_template.example <span class="s2">"job_template_id"</span>
</code></pre></div>

            
        
    </body></html>
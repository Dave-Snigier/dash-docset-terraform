<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/imagebuilder_lifecycle_policy --><head>
                <title>awscc_imagebuilder_lifecycle_policy</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_imagebuilder_lifecycle_policy-resource">awscc_imagebuilder_lifecycle_policy (Resource)</h1>

<p>Resource schema for AWS::ImageBuilder::LifecyclePolicy</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Automated%20Image%20Cleanup%20Policy"></a><h3 id="automated-image-cleanup-policy">Automated Image Cleanup Policy</h3>

<p>Creates an Image Builder lifecycle policy that automatically deletes AMI images and snapshots older than 30 days in development environment while excluding production resources and specific regions.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS account ID and region</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># IAM role policy document for Image Builder Lifecycle Policy</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"assume_role"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"sts:AssumeRole"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">effect</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>

<span class="w">    </span><span class="nb">principals</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"Service"</span><span class="w"></span>
<span class="w">      </span><span class="na">identifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"imagebuilder.amazonaws.com"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_iam_policy_document"</span><span class="w"> </span><span class="nv">"lifecycle_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Allow"</span><span class="w"></span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"ec2:DeleteSnapshot"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"ec2:DeregisterImage"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"ec2:DescribeImages"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"ec2:DescribeSnapshots"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">"imagebuilder:GetImage"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"*"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create IAM role for Image Builder Lifecycle Policy</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role"</span><span class="w"> </span><span class="nv">"lifecycle_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">assume_role_policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.assume_role.json</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"Role for Image Builder Lifecycle Policy"</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s2">"ImageBuilderLifecyclePolicyRole"</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_iam_role_policy"</span><span class="w"> </span><span class="nv">"lifecycle_policy"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.lifecycle_policy.json</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"ImageBuilderLifecyclePolicyPermissions"</span><span class="w"></span>
<span class="w">  </span><span class="na">role_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.lifecycle_policy.role_name</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create Image Builder Lifecycle Policy</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_imagebuilder_lifecycle_policy"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-lifecycle-policy"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"Example Image Builder Lifecycle Policy"</span><span class="w"></span>
<span class="w">  </span><span class="na">execution_role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_iam_role.lifecycle_policy.arn</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"AMI_IMAGE"</span><span class="w"></span>
<span class="w">  </span><span class="na">status</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"ENABLED"</span><span class="w"></span>

<span class="w">  </span><span class="na">policy_details</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="w"></span>
<span class="w">        </span><span class="nb">include_resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">amis</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">          </span><span class="na">containers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"></span>
<span class="w">          </span><span class="na">snapshots</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"AGE"</span><span class="w"></span>
<span class="w">        </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="w">        </span><span class="na">unit</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="nb">exclusion_rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">amis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="na">regions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">data.aws_region.current.name</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">tag_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="s2">"Environment"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Production"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="nb">resource_selection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">tag_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="s2">"Environment"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Development"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>execution_role</code> (String) The execution role of the lifecycle policy.</li>
<li><code>name</code> (String) The name of the lifecycle policy.</li>
<li><code>policy_details</code> (Attributes List) The policy details of the lifecycle policy. (see <a href="#nestedatt--policy_details">below for nested schema</a>)</li>
<li><code>resource_selection</code> (Attributes) The resource selection of the lifecycle policy. (see <a href="#nestedatt--resource_selection">below for nested schema</a>)</li>
<li><code>resource_type</code> (String) The resource type of the lifecycle policy.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>description</code> (String) The description of the lifecycle policy.</li>
<li><code>status</code> (String) The status of the lifecycle policy.</li>
<li><code>tags</code> (Map of String) The tags associated with the lifecycle policy.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>arn</code> (String) The Amazon Resource Name (ARN) of the lifecycle policy.</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
</ul>

<p><a id="nestedatt--policy_details"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details"></a><h3 id="nested-schema-for-policy_details">Nested Schema for <code>policy_details</code></h3>

<p>Required:</p>

<ul>
<li><code>action</code> (Attributes) The action of the policy detail. (see <a href="#nestedatt--policy_details--action">below for nested schema</a>)</li>
<li><code>filter</code> (Attributes) The filters to apply of the policy detail. (see <a href="#nestedatt--policy_details--filter">below for nested schema</a>)</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>exclusion_rules</code> (Attributes) The exclusion rules to apply of the policy detail. (see <a href="#nestedatt--policy_details--exclusion_rules">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--policy_details--action"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.action"></a><h3 id="nested-schema-for-policy_detailsaction">Nested Schema for <code>policy_details.action</code></h3>

<p>Required:</p>

<ul>
<li><code>type</code> (String) The action type of the policy detail.</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>include_resources</code> (Attributes) The included resources of the policy detail. (see <a href="#nestedatt--policy_details--action--include_resources">below for nested schema</a>)</li>
</ul>

<p><a id="nestedatt--policy_details--action--include_resources"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.action.include_resources"></a><h3 id="nested-schema-for-policy_detailsactioninclude_resources">Nested Schema for <code>policy_details.action.include_resources</code></h3>

<p>Optional:</p>

<ul>
<li><code>amis</code> (Boolean) Use to configure lifecycle actions on AMIs.</li>
<li><code>containers</code> (Boolean) Use to configure lifecycle actions on containers.</li>
<li><code>snapshots</code> (Boolean) Use to configure lifecycle actions on snapshots.</li>
</ul>

<p><a id="nestedatt--policy_details--filter"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.filter"></a><h3 id="nested-schema-for-policy_detailsfilter">Nested Schema for <code>policy_details.filter</code></h3>

<p>Required:</p>

<ul>
<li><code>type</code> (String) The filter type.</li>
<li><code>value</code> (Number) The filter value.</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>retain_at_least</code> (Number) The minimum number of Image Builder resources to retain.</li>
<li><code>unit</code> (String) The value's time unit.</li>
</ul>

<p><a id="nestedatt--policy_details--exclusion_rules"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.exclusion_rules"></a><h3 id="nested-schema-for-policy_detailsexclusion_rules">Nested Schema for <code>policy_details.exclusion_rules</code></h3>

<p>Optional:</p>

<ul>
<li><code>amis</code> (Attributes) The AMI exclusion rules for the policy detail. (see <a href="#nestedatt--policy_details--exclusion_rules--amis">below for nested schema</a>)</li>
<li><code>tag_map</code> (Map of String) The Image Builder tags to filter on.</li>
</ul>

<p><a id="nestedatt--policy_details--exclusion_rules--amis"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.exclusion_rules.amis"></a><h3 id="nested-schema-for-policy_detailsexclusion_rulesamis">Nested Schema for <code>policy_details.exclusion_rules.amis</code></h3>

<p>Optional:</p>

<ul>
<li><code>is_public</code> (Boolean) Use to apply lifecycle policy actions on whether the AMI is public.</li>
<li><code>last_launched</code> (Attributes) Use to apply lifecycle policy actions on AMIs launched before a certain time. (see <a href="#nestedatt--policy_details--exclusion_rules--amis--last_launched">below for nested schema</a>)</li>
<li><code>regions</code> (List of String) Use to apply lifecycle policy actions on AMIs distributed to a set of regions.</li>
<li><code>shared_accounts</code> (List of String) Use to apply lifecycle policy actions on AMIs shared with a set of regions.</li>
<li><code>tag_map</code> (Map of String) The AMIs to select by tag.</li>
</ul>

<p><a id="nestedatt--policy_details--exclusion_rules--amis--last_launched"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20policy_details.exclusion_rules.amis.last_launched"></a><h3 id="nested-schema-for-policy_detailsexclusion_rulesamislast_launched">Nested Schema for <code>policy_details.exclusion_rules.amis.last_launched</code></h3>

<p>Optional:</p>

<ul>
<li><code>unit</code> (String) The value's time unit.</li>
<li><code>value</code> (Number) The last launched value.</li>
</ul>

<p><a id="nestedatt--resource_selection"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20resource_selection"></a><h3 id="nested-schema-for-resource_selection">Nested Schema for <code>resource_selection</code></h3>

<p>Optional:</p>

<ul>
<li><code>recipes</code> (Attributes List) The recipes to select. (see <a href="#nestedatt--resource_selection--recipes">below for nested schema</a>)</li>
<li><code>tag_map</code> (Map of String) The Image Builder resources to select by tag.</li>
</ul>

<p><a id="nestedatt--resource_selection--recipes"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20resource_selection.recipes"></a><h3 id="nested-schema-for-resource_selectionrecipes">Nested Schema for <code>resource_selection.recipes</code></h3>

<p>Optional:</p>

<ul>
<li><code>name</code> (String) The recipe name.</li>
<li><code>semantic_version</code> (String) The recipe version.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_imagebuilder_lifecycle_policy.example <span class="s2">"arn"</span>
</code></pre></div>

            
        
    </body></html>
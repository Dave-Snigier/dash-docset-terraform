<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/consul/latest/docs/resources/config_entry_service_router --><head>
                <title>consul_config_entry_service_router</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="consul_config_entry_service_router-resource">consul_config_entry_service_router (Resource)</h1>

<p>The <code>consul_config_entry_service_router</code> resource configures a <a href="https://developer.hashicorp.com/consul/docs/connect/config-entries/service-router">service router</a> to redirect a traffic request for a service to one or more specific service instances.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"consul_config_entry_service_defaults"</span><span class="w"> </span><span class="nv">"admin_service_defaults"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"web"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"consul_config_entry_service_defaults"</span><span class="w"> </span><span class="nv">"admin_service_defaults"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"dashboard"</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="kr">resource</span><span class="w"> </span><span class="nc">"consul_config_entry_service_router"</span><span class="w"> </span><span class="nv">"foo"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">consul_config_entry.web.name</span><span class="w"></span>

<span class="w">  </span><span class="nb">routes</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">match</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nb">http</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="na">path_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/admin"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nb">destination</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">consul_config_entry.admin_service.name</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>name</code> (String) Specifies a name for the configuration entry.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>meta</code> (Map of String) Specifies key-value pairs to add to the KV store.</li>
<li><code>namespace</code> (String) Specifies the namespace to apply the configuration entry.</li>
<li><code>partition</code> (String) Specifies the admin partition to apply the configuration entry.</li>
<li><code>routes</code> (Block List) Defines the possible routes for L7 requests. (see <a href="#nestedblock--routes">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>id</code> (String) The ID of this resource.</li>
</ul>

<p><a id="nestedblock--routes"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes"></a><h3 id="nested-schema-for-routes">Nested Schema for <code>routes</code></h3>

<p>Optional:</p>

<ul>
<li><code>destination</code> (Block List, Max: 1) Specifies the target service to route matching requests to, as well as behavior for the request to follow when routed. (see <a href="#nestedblock--routes--destination">below for nested schema</a>)</li>
<li><code>match</code> (Block List, Max: 1) Describes a set of criteria that Consul compares incoming L7 traffic with. (see <a href="#nestedblock--routes--match">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--routes--destination"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.destination"></a><h3 id="nested-schema-for-routesdestination">Nested Schema for <code>routes.destination</code></h3>

<p>Optional:</p>

<ul>
<li><code>idle_timeout</code> (String) Specifies the total amount of time permitted for the request stream to be idle.</li>
<li><code>namespace</code> (String) Specifies the Consul namespace to resolve the service from instead of the current namespace.</li>
<li><code>num_retries</code> (Number) Specifies the number of times to retry the request when a retry condition occurs.</li>
<li><code>partition</code> (String) Specifies the Consul admin partition to resolve the service from instead of the current partition.</li>
<li><code>prefix_rewrite</code> (String) Specifies rewrites to the HTTP request path before proxying it to its final destination.</li>
<li><code>request_headers</code> (Block List, Max: 1) Specifies a set of HTTP-specific header modification rules applied to requests routed with the service router. (see <a href="#nestedblock--routes--destination--request_headers">below for nested schema</a>)</li>
<li><code>request_timeout</code> (String) Specifies the total amount of time permitted for the entire downstream request to be processed, including retry attempts.</li>
<li><code>response_headers</code> (Block List, Max: 1) Specifies a set of HTTP-specific header modification rules applied to responses routed with the service router. (see <a href="#nestedblock--routes--destination--response_headers">below for nested schema</a>)</li>
<li><code>retry_on</code> (List of String) Specifies a list of conditions for Consul to retry requests based on the response from an upstream service.</li>
<li><code>retry_on_connect_failure</code> (Boolean) Specifies that connection failure errors that trigger a retry request.</li>
<li><code>retry_on_status_codes</code> (List of Number) Specifies a list of integers for HTTP response status codes that trigger a retry request.</li>
<li><code>service</code> (String) Specifies the name of the service to resolve.</li>
<li><code>service_subset</code> (String) Specifies a named subset of the given service to resolve instead of the one defined as that service's <code>default_subset</code> in the service resolver configuration entry.</li>
</ul>

<p><a id="nestedblock--routes--destination--request_headers"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.destination.request_headers"></a><h3 id="nested-schema-for-routesdestinationrequest_headers">Nested Schema for <code>routes.destination.request_headers</code></h3>

<p>Optional:</p>

<ul>
<li><code>add</code> (Map of String) Defines a set of key-value pairs to add to the header. Use header names as the keys.</li>
<li><code>remove</code> (List of String) Defines a list of headers to remove.</li>
<li><code>set</code> (Map of String) Defines a set of key-value pairs to add to the request header or to replace existing header values with.</li>
</ul>

<p><a id="nestedblock--routes--destination--response_headers"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.destination.response_headers"></a><h3 id="nested-schema-for-routesdestinationresponse_headers">Nested Schema for <code>routes.destination.response_headers</code></h3>

<p>Optional:</p>

<ul>
<li><code>add</code> (Map of String) Defines a set of key-value pairs to add to the header. Use header names as the keys</li>
<li><code>remove</code> (List of String) Defines a list of headers to remove.</li>
<li><code>set</code> (Map of String) Defines a set of key-value pairs to add to the response header or to replace existing header values with</li>
</ul>

<p><a id="nestedblock--routes--match"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.match"></a><h3 id="nested-schema-for-routesmatch">Nested Schema for <code>routes.match</code></h3>

<p>Optional:</p>

<ul>
<li><code>http</code> (Block List, Max: 1) Specifies a set of HTTP criteria used to evaluate incoming L7 traffic for matches. (see <a href="#nestedblock--routes--match--http">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--routes--match--http"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.match.http"></a><h3 id="nested-schema-for-routesmatchhttp">Nested Schema for <code>routes.match.http</code></h3>

<p>Optional:</p>

<ul>
<li><code>header</code> (Block List) Specifies information in the HTTP request header to match with. (see <a href="#nestedblock--routes--match--http--header">below for nested schema</a>)</li>
<li><code>methods</code> (List of String) Specifies HTTP methods that the match applies to.</li>
<li><code>path_exact</code> (String) Specifies the exact path to match on the HTTP request path.</li>
<li><code>path_prefix</code> (String) Specifies the path prefix to match on the HTTP request path.</li>
<li><code>path_regex</code> (String) Specifies a regular expression to match on the HTTP request path.</li>
<li><code>query_param</code> (Block List) Specifies information to match to on HTTP query parameters. (see <a href="#nestedblock--routes--match--http--query_param">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--routes--match--http--header"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.match.http.header"></a><h3 id="nested-schema-for-routesmatchhttpheader">Nested Schema for <code>routes.match.http.header</code></h3>

<p>Optional:</p>

<ul>
<li><code>exact</code> (String) Specifies that a request matches when the header with the given name is this exact value.</li>
<li><code>invert</code> (Boolean) Specifies that the logic for the HTTP header match should be inverted.</li>
<li><code>name</code> (String) Specifies the name of the HTTP header to match.</li>
<li><code>prefix</code> (String) Specifies that a request matches when the header with the given name has this prefix.</li>
<li><code>present</code> (Boolean) Specifies that a request matches when the value in the <code>name</code> argument is present anywhere in the HTTP header.</li>
<li><code>regex</code> (String) Specifies that a request matches when the header with the given name matches this regular expression.</li>
<li><code>suffix</code> (String) Specifies that a request matches when the header with the given name has this suffix.</li>
</ul>

<p><a id="nestedblock--routes--match--http--query_param"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20routes.match.http.query_param"></a><h3 id="nested-schema-for-routesmatchhttpquery_param">Nested Schema for <code>routes.match.http.query_param</code></h3>

<p>Optional:</p>

<ul>
<li><code>exact</code> (String) Specifies that a request matches when the query parameter with the given name is this exact value.</li>
<li><code>name</code> (String) Specifies the name of the HTTP query parameter to match.</li>
<li><code>present</code> (Boolean) Specifies that a request matches when the value in the <code>name</code> argument is present anywhere in the HTTP query parameter.</li>
<li><code>regex</code> (String) Specifies that a request matches when the query parameter with the given name matches this regular expression.</li>
</ul>

            
        
    </body></html>
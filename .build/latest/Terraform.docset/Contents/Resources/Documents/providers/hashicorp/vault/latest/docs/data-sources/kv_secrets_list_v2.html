<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/vault/latest/docs/data-sources/kv_secrets_list_v2 --><head>
                <title>vault_kv_secrets_list_v2</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="vault_kv_secrets_list_v2">vault_kv_secrets_list_v2</h1>

<p>Lists KV-V2 secrets at a given path in Vault.</p>

<p>For more information on Vault's KV-V2 secret backend 
<a href="https://www.vaultproject.io/docs/secrets/kv/kv-v2">see here</a>.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>Important</em>
    <p>All data retrieved from Vault will be written in cleartext to state file generated by Terraform, will appear in the console output when Terraform runs, and may be included in plan files if secrets are interpolated into any resource attributes. Protect these artifacts accordingly. See <a href="../index.html">the main provider documentation</a> for more details.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_mount"</span><span class="w"> </span><span class="nv">"kvv2"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">path</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"kvv2"</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"kv"</span><span class="w"></span>
<span class="w">  </span><span class="nb">options</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"KV Version 2 secret engine mount"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_kv_secret_v2"</span><span class="w"> </span><span class="nv">"aws_secret"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="na">mount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_mount.kvv2.path</span><span class="w"></span>
<span class="w"> </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"aws_secret"</span><span class="w"></span>
<span class="w"> </span><span class="na">data_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="w"></span>
<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">zip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"zap"</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_kv_secret_v2"</span><span class="w"> </span><span class="nv">"azure_secret"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="na">mount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_mount.kvv2.path</span><span class="w"></span>
<span class="w"> </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"azure_secret"</span><span class="w"></span>
<span class="w"> </span><span class="na">data_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="w"></span>
<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"vault_kv_secret_v2"</span><span class="w"> </span><span class="nv">"nested_secret"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="na">mount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_mount.kvv2.path</span><span class="w"></span>
<span class="w"> </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"${vault_kv_secret_v2.azure_secret.name}/dev"</span><span class="w"></span>
<span class="w"> </span><span class="na">data_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">(</span><span class="w"></span>
<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test"</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"vault_kv_secrets_list_v2"</span><span class="w"> </span><span class="nv">"secrets"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="na">mount</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_mount.kvv2.path</span><span class="w"></span>
<span class="w"> </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">vault_kv_secret_v2.aws_secret</span><span class="p">,</span><span class="w"> </span><span class="nv">vault_kv_secret_v2.azure_secret</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"vault_kv_secrets_list_v2"</span><span class="w"> </span><span class="nv">"nested_secrets"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="na">mount</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_mount.kvv2.path</span><span class="w"></span>
<span class="w"> </span><span class="na">name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">vault_kv_secret_v2.test_2.name</span><span class="w"></span>
<span class="w"> </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">vault_kv_secret_v2.nested_secret</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><p><code>namespace</code> - (Optional) The namespace of the target resource.
The value should not contain leading or trailing forward slashes.
The <code>namespace</code> is always relative to the provider's configured <a href="../index.html#namespace">namespace</a>.
<em>Available only for Vault Enterprise</em>.</p></li>
<li><p><code>mount</code> - (Required) Path where KV-V2 engine is mounted.</p></li>
<li><p><code>name</code> - (Optional) Full name of the secret. For a nested secret
the name is the nested path excluding the mount and data
prefix. For example, for a secret at <code>kvv2/data/foo/bar/baz</code>
the name is <code>foo/bar/baz</code>.</p></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required%20Vault%20Capabilities"></a><h2 id="required-vault-capabilities">Required Vault Capabilities</h2>

<p>Use of this resource requires the <code>read</code> capability on the given path.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><p><code>path</code> - Full path where the KV-V2 secrets are listed.</p></li>
<li><p><code>names</code> - List of all secret names listed under the given path.</p></li>
</ul>

            
        
    </body></html>
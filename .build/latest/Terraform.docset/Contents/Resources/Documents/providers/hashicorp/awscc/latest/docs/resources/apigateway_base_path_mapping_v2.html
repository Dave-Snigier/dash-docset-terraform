<html><!-- Online page at https://registry.terraform.io/providers/hashicorp/awscc/latest/docs/resources/apigateway_base_path_mapping_v2 --><head>
                <title>awscc_apigateway_base_path_mapping_v2</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="awscc_apigateway_base_path_mapping_v2-resource">awscc_apigateway_base_path_mapping_v2 (Resource)</h1>

<p>Resource Type definition for AWS::ApiGateway::BasePathMappingV2</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Map%20Custom%20Domain%20to%20API%20Gateway%20Stage"></a><h3 id="map-custom-domain-to-api-gateway-stage">Map Custom Domain to API Gateway Stage</h3>

<p>Creates a base path mapping to connect an API Gateway custom domain name to a specific stage of a REST API, allowing the API to be accessed through the custom domain using the specified base path 'v1'.</p>

<aside class="admonition warning">
    <strong>warning</strong>
    <em>warning</em>
    <p>This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.</p>
</aside>

<div class="codehilite"><pre><span></span><code><span class="c1"># Get current AWS region and account details</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_region"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"aws_caller_identity"</span><span class="w"> </span><span class="nv">"current"</span><span class="w"> </span><span class="p">{}</span><span class="c1"></span>

<span class="c1"># Create ACM certificate for the domain</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_acm_certificate"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">domain_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.com"</span><span class="w"></span>
<span class="w">  </span><span class="na">validation_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DNS"</span><span class="w"></span>

<span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">lifecycle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">create_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># API Gateway REST API</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_apigateway_rest_api"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-api"</span><span class="w"></span>
<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Sample API Gateway Method and Integration using AWS provider</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_api_gateway_method"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">rest_api_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.root_resource_id</span><span class="w"></span>
<span class="w">  </span><span class="na">http_method</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"GET"</span><span class="w"></span>
<span class="w">  </span><span class="na">authorization</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"NONE"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_api_gateway_integration"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">rest_api_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">resource_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.root_resource_id</span><span class="w"></span>
<span class="w">  </span><span class="na">http_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_api_gateway_method.example.http_method</span><span class="w"></span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"MOCK"</span><span class="w"></span>

<span class="w">  </span><span class="nb">request_templates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="s2">"application/json"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="na">statusCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># API Gateway Deployment using AWS provider</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_api_gateway_deployment"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">  </span><span class="na">rest_api_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.id</span><span class="c1"></span>

<span class="c1">  # Make sure we have method and integration before deploying</span>
<span class="w">  </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nv">aws_api_gateway_method.example</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nv">aws_api_gateway_integration.example</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="nb">lifecycle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">create_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># API Gateway Stage</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_apigateway_stage"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">rest_api_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">deployment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_api_gateway_deployment.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">stage_name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"prod"</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># API Gateway Domain Name</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_apigateway_domain_name_v2"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">domain_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example.com"</span><span class="w"></span>
<span class="w">  </span><span class="nb">endpoint_configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">types</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"REGIONAL"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="na">regional_certificate_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_acm_certificate.example.arn</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="na">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="na">key</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Modified By"</span><span class="w"></span>
<span class="w">    </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWSCC"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># API Gateway Base Path Mapping</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"awscc_apigateway_base_path_mapping_v2"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">domain_name_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_domain_name_v2.example.domain_name_arn</span><span class="w"></span>
<span class="w">  </span><span class="na">rest_api_id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_rest_api.example.id</span><span class="w"></span>
<span class="w">  </span><span class="na">base_path</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"v1"</span><span class="w"></span>
<span class="w">  </span><span class="na">stage</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">awscc_apigateway_stage.example.stage_name</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>domain_name_arn</code> (String) The Arn of an AWS::ApiGateway::DomainNameV2 resource.</li>
<li><code>rest_api_id</code> (String) The ID of the API.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>base_path</code> (String) The base path name that callers of the API must provide in the URL after the domain name.</li>
<li><code>stage</code> (String) The name of the API's stage.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>base_path_mapping_arn</code> (String) Amazon Resource Name (ARN) of the resource.</li>
<li><code>id</code> (String) Uniquely identifies the resource.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>$ terraform import awscc_apigateway_base_path_mapping_v2.example <span class="s2">"base_path_mapping_arn"</span>
</code></pre></div>

            
        
    </body></html>
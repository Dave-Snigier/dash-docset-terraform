<html><!-- Online page at https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/hbr_restore_job --><head>
                <title>alicloud_hbr_restore_job</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="alicloud_hbr_restore_job">alicloud_hbr_restore_job</h1>

<p>Provides a Hybrid Backup Recovery (HBR) Restore Job resource.</p>

<p>For information about Hybrid Backup Recovery (HBR) Restore Job and how to use it, see <a href="https://www.alibabacloud.com/help/doc-detail/186575.htm">What is Restore Job</a>.</p>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Available in v1.133.0+.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<p>Basic Usage</p>

<div style="display: block;margin-bottom: 40px;"><div class="oics-button" style="float: right;position: absolute;margin-bottom: 10px;">
  <a href="https://api.aliyun.com/terraform?resource=alicloud_hbr_restore_job&amp;exampleId=68841786-d5c7-0c64-5689-df09846ab9dfe76c6065&amp;activeTab=example&amp;spm=docs.r.hbr_restore_job.0.68841786d5&amp;intl_lang=EN_US" target="_blank">
    <img alt="Open in AliCloud" src="https://img.alicdn.com/imgextra/i1/O1CN01hjjqXv1uYUlY56FyX_!!6000000006049-55-tps-254-36.svg" style="max-height: 44px; max-width: 100%;"/>
  </a>
</div></div>

<div class="codehilite"><pre><span></span><code><span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_ecs_backup_plans"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name_regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plan-tf-used-dont-delete"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_oss_backup_plans"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name_regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plan-tf-used-dont-delete"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_nas_backup_plans"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name_regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plan-tf-used-dont-delete"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_snapshots"</span><span class="w"> </span><span class="nv">"ecs_snapshots"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECS_FILE"</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_ecs_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_ecs_backup_plans.default.plans.0.instance_id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_snapshots"</span><span class="w"> </span><span class="nv">"oss_snapshots"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OSS"</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_oss_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">bucket</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_oss_backup_plans.default.plans.0.bucket</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_hbr_snapshots"</span><span class="w"> </span><span class="nv">"nas_snapshots"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"NAS"</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">file_system_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.file_system_id</span><span class="w"></span>
<span class="w">  </span><span class="na">create_time</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.create_time</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_hbr_restore_job"</span><span class="w"> </span><span class="nv">"nasJob"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_hash</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.nas_snapshots.snapshots.0.snapshot_hash</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"NAS"</span><span class="w"></span>
<span class="w">  </span><span class="na">restore_type</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"NAS"</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.nas_snapshots.snapshots.0.snapshot_id</span><span class="w"></span>
<span class="w">  </span><span class="na">target_file_system_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.file_system_id</span><span class="w"></span>
<span class="w">  </span><span class="na">target_create_time</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_nas_backup_plans.default.plans.0.create_time</span><span class="w"></span>
<span class="w">  </span><span class="na">target_path</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="w">  </span><span class="na">options</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="dl">EOF</span><span class="sh"></span>
<span class="err">    {"includes":[], "excludes":[]}</span>
<span class="err">  EOF</span>
<span class="err">}</span>

<span class="err">resource "alicloud_hbr_restore_job" "ossJob" {</span>
<span class="err">  snapshot_hash = data.alicloud_hbr_snapshots.oss_snapshots.snapshots.0.snapshot_hash</span>
<span class="err">  vault_id      = data.alicloud_hbr_oss_backup_plans.default.plans.0.vault_id</span>
<span class="err">  source_type   = "OSS"</span>
<span class="err">  restore_type  = "OSS"</span>
<span class="err">  snapshot_id   = data.alicloud_hbr_snapshots.oss_snapshots.snapshots.0.snapshot_id</span>
<span class="err">  target_bucket = data.alicloud_hbr_oss_backup_plans.default.plans.0.bucket</span>
<span class="err">  target_prefix = ""</span>
<span class="err">  options       = &lt;&lt;EOF</span>
<span class="err">    {"includes":[], "excludes":[]}</span>
<span class="err">  EOF</span>
<span class="err">}</span>

<span class="err">resource "alicloud_hbr_restore_job" "ecsJob" {</span>
<span class="err">  snapshot_hash      = data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_hash</span>
<span class="err">  vault_id           = data.alicloud_hbr_ecs_backup_plans.default.plans.0.vault_id</span>
<span class="err">  source_type        = "ECS_FILE"</span>
<span class="err">  restore_type       = "ECS_FILE"</span>
<span class="err">  snapshot_id        = data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_id</span>
<span class="err">  target_instance_id = data.alicloud_hbr_ecs_backup_plans.default.plans.0.instance_id</span>
<span class="err">  target_path        = "/"</span>
<span class="err">}</span>
<span class="w">    </span><span class="p">{</span><span class="s2">"includes"</span><span class="o">:</span><span class="p">[],</span><span class="w"> </span><span class="s2">"excludes"</span><span class="o">:</span><span class="p">[]}</span><span class="w"></span>
<span class="w">  </span><span class="err">EOF</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_hbr_restore_job"</span><span class="w"> </span><span class="nv">"ossJob"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.oss_snapshots.snapshots.0.snapshot_hash</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_oss_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"OSS"</span><span class="w"></span>
<span class="w">  </span><span class="na">restore_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"OSS"</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_id</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.oss_snapshots.snapshots.0.snapshot_id</span><span class="w"></span>
<span class="w">  </span><span class="na">target_bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_oss_backup_plans.default.plans.0.bucket</span><span class="w"></span>
<span class="w">  </span><span class="na">target_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="w"></span>
<span class="w">  </span><span class="na">options</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="dl">EOF</span><span class="sh"></span>
<span class="err">    {"includes":[], "excludes":[]}</span>
<span class="err">  EOF</span>
<span class="err">}</span>

<span class="err">resource "alicloud_hbr_restore_job" "ecsJob" {</span>
<span class="err">  snapshot_hash      = data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_hash</span>
<span class="err">  vault_id           = data.alicloud_hbr_ecs_backup_plans.default.plans.0.vault_id</span>
<span class="err">  source_type        = "ECS_FILE"</span>
<span class="err">  restore_type       = "ECS_FILE"</span>
<span class="err">  snapshot_id        = data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_id</span>
<span class="err">  target_instance_id = data.alicloud_hbr_ecs_backup_plans.default.plans.0.instance_id</span>
<span class="err">  target_path        = "/"</span>
<span class="err">}</span>
<span class="w">    </span><span class="p">{</span><span class="s2">"includes"</span><span class="o">:</span><span class="p">[],</span><span class="w"> </span><span class="s2">"excludes"</span><span class="o">:</span><span class="p">[]}</span><span class="w"></span>
<span class="w">  </span><span class="err">EOF</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_hbr_restore_job"</span><span class="w"> </span><span class="nv">"ecsJob"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_hash</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_hash</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_id</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_ecs_backup_plans.default.plans.0.vault_id</span><span class="w"></span>
<span class="w">  </span><span class="na">source_type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECS_FILE"</span><span class="w"></span>
<span class="w">  </span><span class="na">restore_type</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"ECS_FILE"</span><span class="w"></span>
<span class="w">  </span><span class="na">snapshot_id</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_snapshots.ecs_snapshots.snapshots.0.snapshot_id</span><span class="w"></span>
<span class="w">  </span><span class="na">target_instance_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_hbr_ecs_backup_plans.default.plans.0.instance_id</span><span class="w"></span>
<span class="w">  </span><span class="na">target_path</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"/"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>This resource can only be created, cannot be modified or deleted. Therefore, any modification of the resource attribute will not affect exist resource.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>restore_job_id</code> - (Optional, Computed, ForceNew) Restore Job ID. It's the unique key of this resource, if you want to set this argument by yourself, you must specify a unique keyword that never appears.</li>
<li><code>vault_id</code> - (Required, ForceNew) The ID of backup vault.</li>
<li><code>source_type</code> - (Required, ForceNew) The type of data source. Valid values: <code>ECS_FILE</code>, <code>NAS</code>, <code>OSS</code>,<code>OTS_TABLE</code>,<code>UDM_ECS</code>.</li>
<li><code>restore_type</code> - (Required, ForceNew) The type of recovery destination. Valid values: <code>ECS_FILE</code>, <code>NAS</code>, <code>OSS</code>,<code>OTS_TABLE</code>,<code>UDM_ECS_ROLLBACK</code>. <strong>Note</strong>: Currently, there is a one-to-one correspondence between the data source type with the recovery destination type.</li>
<li><code>snapshot_id</code> - (Required, ForceNew) The ID of Snapshot.</li>
<li><code>snapshot_hash</code> - (Required, ForceNew) The hashcode of Snapshot.</li>
<li><code>options</code> - (Optional, ForceNew) Recovery options. <strong>NOTE:</strong> Required while source_type equals <code>OSS</code> or <code>NAS</code>, invalid while source_type equals <code>ECS_FILE</code>. It's a json string with format:<code>"{"includes":[],"excludes":[]}",</code>. Recovery options. When restores OTS_TABLE and real target time is the rangEnd time of the snapshot, it should be a string with format: <code>{"UI_TargetTime":1650032529018}</code>.</li>
<li><code>exclude</code> - (Optional) The exclude path. <strong>NOTE:</strong> Invalid while source_type equals <code>OSS</code> or <code>NAS</code>. It's a json string with format:<code>["/excludePath]</code>, up to 255 characters. <strong>WARNING:</strong> If this value filled in incorrectly, the task may not start correctly, so please check the parameters before executing the plan.</li>
<li><code>include</code> - (Optional) The include path. <strong>NOTE:</strong> Invalid while source_type equals <code>OSS</code> or <code>NAS</code>. It's a json string with format:<code>["/includePath"]</code>, Up to 255 characters. <strong>WARNING:</strong> The field is required while source_type equals <code>OTS_TABLE</code> which means source table name. If this value filled in incorrectly, the task may not start correctly, so please check the parameters before executing the plan. </li>
<li><code>target_bucket</code> - (Optional, ForceNew) The target name of OSS bucket. <strong>NOTE:</strong> Required while source_type equals <code>OSS</code>,</li>
<li><code>target_prefix</code> - (Optional, ForceNew) The target prefix of the OSS object. <strong>WARNING:</strong> Required while source_type equals <code>OSS</code>. If this value filled in incorrectly, the task may not start correctly, so please check the parameters before executing the plan.</li>
<li><code>target_file_system_id</code> - (Optional, ForceNew) The ID of destination File System. <strong>NOTE:</strong> Required while source_type equals <code>NAS</code></li>
<li><code>target_create_time</code> - (Optional, ForceNew) The creation time of destination File System. <strong>NOTE:</strong> While source_type equals <code>NAS</code>, this parameter must be set. <strong>Note:</strong> The time format of the API adopts the ISO 8601 format, such as <code>2021-07-09T15:45:30CST</code> or <code>2021-07-09T07:45:30Z</code>.</li>
<li><code>target_path</code> - (Optional, ForceNew) The target file path of (ECS) instance. <strong>WARNING:</strong> Required while source_type equals <code>NAS</code> or <code>ECS_FILE</code>, If this value filled in incorrectly, the task may not start correctly, so please check the parameters before executing the plan.</li>
<li><code>target_instance_id</code> - (Optional, ForceNew)  The target ID of ECS instance. <strong>NOTE:</strong> Required while source_type equals <code>ECS_FILE</code></li>
<li><code>target_client_id</code> - (Optional, ForceNew) The target client ID.</li>
<li><code>target_data_source_id</code> - (Optional, ForceNew) The target data source ID.</li>
<li><code>target_time</code> - (Optional, Available in v1.164.0) The time when data is restored to the Table store instance. This value is a UNIX timestamp. Unit: seconds. <strong>WARNING:</strong> Required while source_type equals <code>OTS_TABLE</code>. <strong>Note:</strong> The time when data is restored to the Tablestore instance. It should be 0 if restores data at the End time of the snapshot.</li>
<li><code>udm_detail</code> - (Optional, Available in v1.164.0) The full machine backup details.</li>
<li><code>target_instance_name</code> - (Optional, Available in v1.164.0) The name of the Table store instance to which you want to restore data.<strong>WARNING:</strong> Required while source_type equals <code>OTS_TABLE</code>.</li>
<li><code>target_table_name</code> - (Optional, Available in v1.164.0) The name of the table that stores the restored data. <strong>WARNING:</strong> Required while source_type equals <code>OTS_TABLE</code>.</li>
<li><code>ots_detail</code> - (Optional, Computed, Available in v1.186.0) The details about the Tablestore instance. See the following <code>Block ots_detail</code>.</li>
<li><code>cross_account_type</code> - (Optional, ForceNew, Computed, Available in v1.189.0+) The type of the cross account backup. Valid values: <code>SELF_ACCOUNT</code>, <code>CROSS_ACCOUNT</code>.</li>
<li><code>cross_account_user_id</code> - (Optional, ForceNew, Available in v1.189.0+) The original account ID of the cross account backup managed by the current account.</li>
<li><code>cross_account_role_name</code> - (Optional, ForceNew, Available in v1.189.0+) The role name created in the original account RAM backup by the cross account managed by the current account.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Block%20ots_detail"></a><h4 id="block-ots_detail">Block ots_detail</h4>

<p>The ots_detail supports the following:</p>

<ul>
<li><code>overwrite_existing</code> - (Optional, ForceNew, Computed) Whether to overwrite the existing table storage recovery task. Valid values: <code>true</code>, <code>false</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>id</code> - The resource ID of Restore Job. The value formats as <code>&lt;restore_job_id&gt;:&lt;restore_type&gt;</code>.</li>
<li><code>status</code> - The Restore Job Status.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h3 id="timeouts">Timeouts</h3>

<p>The <code>timeouts</code> block allows you to specify <a href="https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts">timeouts</a> for certain actions:</p>

<ul>
<li><code>create</code> - (Defaults to 3 mins) Used when create the Restore Job.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Hybrid Backup Recovery (HBR) Restore Job can be imported using the id. Format to <code>&lt;restore_job_id&gt;:&lt;restore_type&gt;</code>, e.g.</p>

<div class="codehilite"><pre><span></span><code>$ terraform import alicloud_hbr_restore_job.example your_restore_job_id:your_restore_type
</code></pre></div>

            
        
    </body></html>
<html><!-- Online page at https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/log_store --><head>
                <title>alicloud_log_store</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="alicloud_log_store">alicloud_log_store</h1>

<p>Provides a SLS Log Store resource.</p>

<p>For information about SLS Log Store and how to use it, see <a href="https://www.alibabacloud.com/help/doc-detail/48874.htm">What is Log Store</a>.</p>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Available since v1.0.0.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<p>Basic Usage</p>

<div style="display: block;margin-bottom: 40px;"><div class="oics-button" style="float: right;position: absolute;margin-bottom: 10px;">
  <a href="https://api.aliyun.com/terraform?resource=alicloud_log_store&amp;exampleId=8fcf56ea-25cf-1ce2-e494-a4b69272608acdc4d2b1&amp;activeTab=example&amp;spm=docs.r.log_store.0.8fcf56ea25&amp;intl_lang=EN_US" target="_blank">
    <img alt="Open in AliCloud" src="https://img.alicdn.com/imgextra/i1/O1CN01hjjqXv1uYUlY56FyX_!!6000000006049-55-tps-254-36.svg" style="max-height: 44px; max-width: 100%;"/>
  </a>
</div></div>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"random_integer"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">99999</span><span class="w"></span>
<span class="w">  </span><span class="na">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10000</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_log_project"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example-${random_integer.default.result}"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_log_store"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_log_project.example.name</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-store"</span><span class="w"></span>
<span class="w">  </span><span class="na">shard_count</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"></span>
<span class="w">  </span><span class="na">auto_split</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">max_split_shard_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">  </span><span class="na">append_meta</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Encrypt Usage</p>

<div style="display: block;margin-bottom: 40px;"><div class="oics-button" style="float: right;position: absolute;margin-bottom: 10px;">
  <a href="https://api.aliyun.com/terraform?resource=alicloud_log_store&amp;exampleId=1daa56ae-4ca5-3928-4d97-af94a3ad60a05638954f&amp;activeTab=example&amp;spm=docs.r.log_store.1.1daa56ae4c&amp;intl_lang=EN_US" target="_blank">
    <img alt="Open in AliCloud" src="https://img.alicdn.com/imgextra/i1/O1CN01hjjqXv1uYUlY56FyX_!!6000000006049-55-tps-254-36.svg" style="max-height: 44px; max-width: 100%;"/>
  </a>
</div></div>

<div class="codehilite"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">"region"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"The region of kms key."</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"cn-hangzhou"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">"alicloud"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.region</span><span class="w"></span>
<span class="w">  </span><span class="na">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_account"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"random_integer"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">99999</span><span class="w"></span>
<span class="w">  </span><span class="na">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10000</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_vpcs"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name_regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^default-NODELETING$"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">data</span><span class="w"> </span><span class="nc">"alicloud_vswitches"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_vpcs.default.ids.0</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_kms_instance"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">product_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3"</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">data.alicloud_vpcs.default.ids.0</span><span class="w"></span>
<span class="w">  </span><span class="na">zone_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nv">data.alicloud_vswitches.default.vswitches.0.zone_id</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nv">data.alicloud_vswitches.default.vswitches.1.zone_id</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">vswitch_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nv">data.alicloud_vswitches.default.ids.0</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">vpc_num</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"1"</span><span class="w"></span>
<span class="w">  </span><span class="na">key_num</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="s2">"1000"</span><span class="w"></span>
<span class="w">  </span><span class="na">secret_num</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"0"</span><span class="w"></span>
<span class="w">  </span><span class="na">spec</span><span class="w">                        </span><span class="o">=</span><span class="w"> </span><span class="s2">"1000"</span><span class="w"></span>
<span class="w">  </span><span class="na">force_delete_without_backup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">payment_type</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="s2">"PayAsYouGo"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_kms_key"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example"</span><span class="w"></span>
<span class="w">  </span><span class="na">pending_window_in_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"7"</span><span class="w"></span>
<span class="w">  </span><span class="na">status</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w"></span>
<span class="w">  </span><span class="na">dkms_instance_id</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_kms_instance.default.id</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_log_project"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example-${random_integer.default.result}"</span><span class="w"></span>
<span class="w">  </span><span class="na">description</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_log_store"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">project_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_log_project.example.project_name</span><span class="w"></span>
<span class="w">  </span><span class="na">logstore_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-store"</span><span class="w"></span>
<span class="w">  </span><span class="na">shard_count</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w"></span>
<span class="w">  </span><span class="na">auto_split</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="na">max_split_shard_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"></span>
<span class="w">  </span><span class="nb">encrypt_conf</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">enable</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">encrypt_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w"></span>
<span class="w">    </span><span class="nb">user_cmk_info</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">cmk_key_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_kms_key.example.id</span><span class="w"></span>
<span class="w">      </span><span class="na">arn</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"acs:ram::${data.alicloud_account.example.id}:role/aliyunlogdefaultrole"</span><span class="w"></span>
<span class="w">      </span><span class="na">region_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.region</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Module%20Support"></a><h2 id="module-support">Module Support</h2>

<p>You can use the existing <a href="https://registry.terraform.io/modules/terraform-alicloud-modules/sls/alicloud">sls module</a> 
to create SLS project, store and store index one-click, like ECS instances.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>append_meta</code> - (Optional, Computed) Determines whether to append log meta automatically. The meta includes log receive time and client IP address. Default to <code>true</code>.</li>
<li><code>auto_split</code> - (Optional) Determines whether to automatically split a shard. Default to <code>false</code>.</li>
<li><code>enable_web_tracking</code> - (Optional) Whether open webtracking. webtracking network tracing, support the collection of HTML log, H5, Ios and android platforms.</li>
<li><code>encrypt_conf</code> - (Optional, Computed, List, Available since 1.124.0) Encrypted storage of data, providing data static protection capability, encrypt_conf can be updated since 1.188.0 (only enable change is supported when updating logstore). See <a href="#encrypt_conf"><code>encrypt_conf</code></a> below.</li>
<li><code>hot_ttl</code> - (Optional, Int, Available since 1.202.0) The ttl of hot storage. Default to 30, at least 30, hot storage ttl must be less than ttl.</li>
<li><code>infrequent_access_ttl</code> - (Optional, Int, Available since v1.229.0) Low frequency storage time</li>
<li><code>logstore_name</code> - (Optional, ForceNew, Available since v1.215.0) The log store, which is unique in the same project. You need to specify one of the attributes: <code>logstore_name</code>, <code>name</code>.</li>
<li><code>max_split_shard_count</code> - (Optional, Int) The maximum number of shards for automatic split, which is in the range of 1 to 256. You must specify this parameter when autoSplit is true.</li>
<li><code>metering_mode</code> - (Optional, Computed, Available since v1.215.0) Metering mode. The default metering mode of ChargeByFunction, ChargeByDataIngest traffic mode.</li>
<li><code>mode</code> - (Optional, Computed, Available since 1.202.0) The mode of storage. Default to <code>standard</code>, must be <code>standard</code> or <code>query</code>, <code>lite</code>.</li>
<li><code>project_name</code> - (Optional, ForceNew, Available since v1.215.0) The project name to the log store belongs. You need to specify one of the attributes: <code>project_name</code>, <code>project</code>.</li>
<li><code>retention_period</code> - (Optional, Computed, Int) The data retention time (in days). Valid values: [1-3650]. Default to 30. Log store data will be stored permanently when the value is 3650.</li>
<li><code>shard_count</code> - (Optional, ForceNew, Computed, Int) The number of shards in this log store. Default to 2. You can modify it by "Split" or "Merge" operations. <a href="https://www.alibabacloud.com/help/zh/sls/product-overview/shard">Refer to details</a>.</li>
<li><code>telemetry_type</code> - (Optional, ForceNew, Available since 1.179.0) Determines whether store type is metric. <code>Metrics</code> means metric store, empty means log store.</li>
</ul>

<p>The following arguments will be discarded. Please use new fields as soon as possible:</p>

<ul>
<li><code>project</code> - (Deprecated since v1.215.0). Field 'project' has been deprecated from provider version 1.215.0. New field 'project_name' instead.</li>
<li><code>name</code> - (Deprecated since v1.215.0). Field 'name' has been deprecated from provider version 1.215.0. New field 'logstore_name' instead.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/encrypt_conf"></a><h3 id="encrypt_conf"><code>encrypt_conf</code></h3>

<p>The encrypt_conf supports the following:</p>

<ul>
<li><code>enable</code> - (Optional, Computed) Enable encryption. Default false.</li>
<li><code>encrypt_type</code> - (Optional, ForceNew, Computed) Supported encryption type, only supports <code>default</code>(AES), <code>m4</code>.</li>
<li><code>user_cmk_info</code> - (Optional, ForceNew, Computed, List) User bring your own key (BYOK) encryption Refer to details, the format is as follows. See user_cmk_info below. <code>{ "cmk_key_id": "your_cmk_key_id", "arn": "your_role_arn", "region_id": "you_cmk_region_id" }</code>. See <a href="#encrypt_conf-user_cmk_info"><code>user_cmk_info</code></a> below.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/encrypt_conf-user_cmk_info"></a><h3 id="encrypt_conf-user_cmk_info"><code>encrypt_conf-user_cmk_info</code></h3>

<p>The encrypt_conf-user_cmk_info supports the following:</p>

<ul>
<li><code>arn</code> - (Optional, ForceNew, Computed) Role arn.</li>
<li><code>cmk_key_id</code> - (Optional, ForceNew, Computed) User master key id.</li>
<li><code>region_id</code> - (Optional, ForceNew, Computed) Region id where the user master key id is located.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>id</code> - The ID of the resource supplied above.The value is formulated as <code>&lt;project_name&gt;:&lt;logstore_name&gt;</code>.</li>
<li><code>shards</code> - The shard attribute.
<ul>
<li><code>id</code> - The ID of the shard.</li>
<li><code>status</code> - Shard status, only two status of <code>readwrite</code> and <code>readonly</code>.</li>
<li><code>begin_key</code> - The begin value of the shard range(MD5), included in the shard range.</li>
<li><code>end_key</code> - The end value of the shard range(MD5), not included in shard range.</li>
</ul></li>
<li><code>create_time</code> - Log library creation time. Unix timestamp format that represents the number of seconds from 1970-1-1 00:00:00 UTC calculation.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts">timeouts</a> for certain actions:</p>

<ul>
<li><code>create</code> - (Defaults to 5 mins) Used when create the Log Store.</li>
<li><code>delete</code> - (Defaults to 5 mins) Used when delete the Log Store.</li>
<li><code>update</code> - (Defaults to 5 mins) Used when update the Log Store.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>SLS Log Store can be imported using the id, e.g.</p>

<div class="codehilite"><pre><span></span><code>$ terraform import alicloud_log_store.example &lt;project_name&gt;:&lt;logstore_name&gt;
</code></pre></div>

            
        
    </body></html>
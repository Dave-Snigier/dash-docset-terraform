<html><!-- Online page at https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/slb_listener --><head>
                <title>alicloud_slb_listener</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="alicloud_slb_listener">alicloud_slb_listener</h1>

<p>Provides a Classic Load Balancer (SLB) Load Balancer Listener resource.</p>

<p>For information about Classic Load Balancer (SLB) and how to use it, see <a href="https://www.alibabacloud.com/help/doc-detail/27539.htm">What is Classic Load Balancer</a>.</p>

<p>For information about listener and how to use it, please see the following:</p>

<ul>
<li><a href="https://www.alibabacloud.com/help/doc-detail/27592.htm">Configure a HTTP Classic Load Balancer (SLB) Listener</a>.</li>
<li><a href="https://www.alibabacloud.com/help/doc-detail/27593.htm">Configure a HTTPS Classic Load Balancer (SLB) Listener</a>.</li>
<li><a href="https://www.alibabacloud.com/help/doc-detail/27594.htm">Configure a TCP Classic Load Balancer (SLB) Listener</a>.</li>
<li><a href="https://www.alibabacloud.com/help/doc-detail/27595.htm">Configure a UDP Classic Load Balancer (SLB) Listener</a>.</li>
</ul>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Available since v1.0.0.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<p>Basic Usage</p>

<div style="display: block;margin-bottom: 40px;"><div class="oics-button" style="float: right;position: absolute;margin-bottom: 10px;">
  <a href="https://api.aliyun.com/terraform?resource=alicloud_slb_listener&amp;exampleId=d81ccb9a-e8c9-58fc-3b3c-9413b8fc14c23294f58f&amp;activeTab=example&amp;spm=docs.r.slb_listener.0.d81ccb9ae8&amp;intl_lang=EN_US" target="_blank">
    <img alt="Open in AliCloud" src="https://img.alicdn.com/imgextra/i1/O1CN01hjjqXv1uYUlY56FyX_!!6000000006049-55-tps-254-36.svg" style="max-height: 44px; max-width: 100%;"/>
  </a>
</div></div>

<div class="codehilite"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">"name"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tf-example"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"random_integer"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10000</span><span class="w"></span>
<span class="w">  </span><span class="na">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">99999</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_slb_load_balancer"</span><span class="w"> </span><span class="nv">"listener"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.name}-${random_integer.default.result}"</span><span class="w"></span>
<span class="w">  </span><span class="na">internet_charge_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PayByTraffic"</span><span class="w"></span>
<span class="w">  </span><span class="na">address_type</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">"internet"</span><span class="w"></span>
<span class="w">  </span><span class="na">instance_charge_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PayByCLCU"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_slb_listener"</span><span class="w"> </span><span class="nv">"listener"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">load_balancer_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_slb_load_balancer.listener.id</span><span class="w"></span>
<span class="w">  </span><span class="na">backend_port</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="w">  </span><span class="na">frontend_port</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="w">  </span><span class="na">protocol</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="s2">"http"</span><span class="w"></span>
<span class="w">  </span><span class="na">bandwidth</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="w"></span>
<span class="w">  </span><span class="na">sticky_session</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">"on"</span><span class="w"></span>
<span class="w">  </span><span class="na">sticky_session_type</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"insert"</span><span class="w"></span>
<span class="w">  </span><span class="na">cookie_timeout</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="m">86400</span><span class="w"></span>
<span class="w">  </span><span class="na">cookie</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">"tfslblistenercookie"</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="s2">"on"</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_domain</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"ali.com"</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_uri</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="s2">"/cons"</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_connect_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="w"></span>
<span class="w">  </span><span class="na">healthy_threshold</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">  </span><span class="na">unhealthy_threshold</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_timeout</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_interval</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="w"></span>
<span class="w">  </span><span class="na">health_check_http_code</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"http_2xx,http_3xx"</span><span class="w"></span>
<span class="w">  </span><span class="nb">x_forwarded_for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">retrive_slb_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">retrive_slb_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">acl_status</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"on"</span><span class="w"></span>
<span class="w">  </span><span class="na">acl_type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="w"></span>
<span class="w">  </span><span class="na">acl_id</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_slb_acl.listener.id</span><span class="w"></span>
<span class="w">  </span><span class="na">request_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="w"></span>
<span class="w">  </span><span class="na">idle_timeout</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_slb_acl"</span><span class="w"> </span><span class="nv">"listener"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.name}-${random_integer.default.result}"</span><span class="w"></span>
<span class="w">  </span><span class="na">ip_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ipv4"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_slb_acl_entry_attachment"</span><span class="w"> </span><span class="nv">"first"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">acl_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_slb_acl.listener.id</span><span class="w"></span>
<span class="w">  </span><span class="na">entry</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"10.10.10.0/24"</span><span class="w"></span>
<span class="w">  </span><span class="na">comment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"first"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_slb_acl_entry_attachment"</span><span class="w"> </span><span class="nv">"second"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">acl_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_slb_acl.listener.id</span><span class="w"></span>
<span class="w">  </span><span class="na">entry</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"168.10.10.0/24"</span><span class="w"></span>
<span class="w">  </span><span class="na">comment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"second"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>HTTP Listener</code> - See <a href="#HTTP Listener"><code>HTTP Listener</code></a> below.</li>
<li><code>HTTPS Listener</code> -  See <a href="#HTTPS Listener"><code>HTTPS Listener</code></a> below.</li>
<li><code>TCP Listener</code> -  See <a href="#TCP Listener"><code>TCP Listener</code></a> below.</li>
<li><code>UDP Listener</code> -  See <a href="#UDP Listener"><code>UDP Listener</code></a> below.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/HTTP%20Listener"></a><h3 id="http-listener">HTTP Listener</h3>

<p>The HTTP Listener supports the following:</p>

<ul>
<li><code>load_balancer_id</code> - (Required, ForceNew) The Load Balancer ID which is used to launch a new listener.</li>
<li><code>protocol</code> - (Required, ForceNew) The protocol to listen on. Valid values: <code>http</code>.</li>
<li><code>frontend_port</code> - (Required, Int, ForceNew) The frontend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>.</li>
<li><code>backend_port</code> - (Optional, Int, ForceNew) The backend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>server_group_id</code> is not set, <code>backend_port</code> is required.</li>
<li><code>bandwidth</code> - (Optional, Int) The maximum bandwidth of the listener. Unit: Mbit/s. Valid values:
<ul>
<li><code>-1</code>: If you set <code>bandwidth</code> to <code>-1</code>, the bandwidth of the listener is unlimited.</li>
<li><code>1</code> to <code>1000</code>: The sum of the maximum bandwidth that you specify for all listeners of the CLB instance cannot exceed the maximum bandwidth of the CLB instance.
<aside class="admonition note">
<strong>note</strong>
<em>note</em>
<p>Currently, this <code>bandwidth</code> is available on <code>Domestic Site Account</code>. * <code>scheduler</code> - (Optional) The scheduling algorithm. Default value: <code>wrr</code>. Valid values: - <code>wrr</code>: Backend servers with higher weights receive more requests than those with lower weights. - <code>rr</code>: Requests are distributed to backend servers in sequence. * <code>server_group_id</code> - (Optional) The ID of the vServer group. It's the ID of resource <code>alicloud_slb_server_group</code>. * <code>acl_status</code> - (Optional) Specifies whether to enable access control. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>acl_type</code> - (Optional) The type of the network ACL. Valid values: <code>black</code>, <code>white</code>. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_type</code> is required. Otherwise, it will be ignored. * <code>acl_id</code> - (Optional) The ID of the network ACL that is associated with the listener. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_id</code> is required. Otherwise, it will be ignored. * <code>sticky_session</code> - (Optional) Specifies whether to enable session persistence. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>sticky_session_type</code> - (Optional) The method that is used to handle a cookie. Valid values: <code>insert</code>, <code>server</code>. <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, <code>sticky_session_type</code> is required. Otherwise, it will be ignored. * <code>cookie_timeout</code> - (Optional, Int) The timeout period of a cookie. Unit: seconds. Valid values: <code>1</code> to <code>86400</code>. <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, and <code>sticky_session_type</code> is set to <code>insert</code>, <code>cookie_timeout</code> is required. Otherwise, it will be ignored. * <code>cookie</code> - (Optional) The cookie that is configured on the server. The <code>cookie</code> must be <code>1</code> to <code>200</code> characters in length and can contain only ASCII characters and digits. It cannot contain commas (,), semicolons (;), or space characters. It cannot start with a dollar sign ($). <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, and <code>sticky_session_type</code> is set to <code>server</code>, <code>cookie</code> is required. Otherwise, it will be ignored. * <code>health_check</code> - (Optional) Specifies whether to enable the health check feature. Default value: <code>on</code>. Valid values: <code>on</code>, <code>off</code>. <strong>NOTE:</strong> <code>TCP</code> and <code>UDP</code> listener's HealthCheck is always on, so it will be ignored when launching <code>TCP</code> or <code>UDP</code> listener. * <code>health_check_method</code> - (Optional, Available since v1.70.0) The health check method used in HTTP health checks. Valid values: <code>head</code>, <code>get</code>. <strong>NOTE:</strong> <code>health_check_method</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_domain</code> - (Optional) The domain name that is used for health checks. <strong>NOTE:</strong> <code>health_check_domain</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_uri</code> - (Optional) The URI that is used for health checks. The <code>health_check_uri</code> must be <code>1</code> to <code>80</code> characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), percent signs (%), question marks (?), number signs (#), and ampersands (&amp;). The URI must start with a forward slash (/) but cannot be a single forward slash (/). <strong>NOTE:</strong> <code>health_check_uri</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_connect_port</code> - (Optional, Int) The backend port that is used for health checks. Valid values: <code>0</code> to <code>65535</code>. <strong>NOTE:</strong> <code>health_check_connect_port</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>healthy_threshold</code> - (Optional, Int) The number of times that an unhealthy backend server must consecutively pass health checks before it is declared healthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. <strong>NOTE:</strong> <code>healthy_threshold</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>unhealthy_threshold</code> - (Optional, Int) The number of times that a healthy backend server must consecutively fail health checks before it is declared unhealthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. <strong>NOTE:</strong> <code>unhealthy_threshold</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_timeout</code> - (Optional, Int) The timeout period of a health check response. Unit: seconds. Default value: <code>5</code>. Valid values: <code>1</code> to <code>300</code>. <strong>NOTE:</strong> If <code>health_check_timeout</code> &lt; <code>health_check_interval</code>, <code>health_check_timeout</code> will be replaced by <code>health_check_interval</code>. <code>health_check_timeout</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_interval</code> - (Optional, Int) The interval between two consecutive health checks. Unit: seconds. Default value: <code>2</code>. Valid values: <code>1</code> to <code>50</code>. <strong>NOTE:</strong> <code>health_check_interval</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_http_code</code> - (Optional) The HTTP status code for a successful health check. Separate multiple HTTP status codes with commas (<code>,</code>). Default value: <code>http_2xx</code>. Valid values: <code>http_2xx</code>, <code>http_3xx</code>, <code>http_4xx</code> and <code>http_5xx</code>. <strong>NOTE:</strong> <code>health_check_http_code</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>gzip</code> - (Optional, Bool, Available since v1.13.0) Specifies whether to enable GZIP compression to compress specific types of files. Default value: <code>true</code>. Valid values: <code>true</code>, <code>false</code>. * <code>idle_timeout</code> - (Optional, Int) The timeout period of an idle connection. Unit: seconds. Default value: <code>15</code>. Valid values: <code>1</code> to <code>60</code>. * <code>request_timeout</code> - (Optional, Int) The timeout period of a request. Unit: seconds. Default value: <code>60</code>. Valid values: <code>1</code> to <code>180</code>. * <code>forward_port</code> - (Optional, ForceNew, Int, Available since v1.40.0) The listening port that is used to redirect HTTP requests to HTTPS. * <code>listener_forward</code> - (Optional, ForceNew, Available since v1.40.0) Specifies whether to enable HTTP-to-HTTPS redirection. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>x_forwarded_for</code> - (Optional, Set, Available since v1.13.0) Whether to set additional HTTP Header field "X-Forwarded-For". See <a href="#x_forwarded_for"><code>x_forwarded_for</code></a> below. * <code>description</code> - (Optional, Available since v1.69.0) The name of the listener. The name must be 1 to 256 characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), and underscores (_). * <code>delete_protection_validation</code> - (Optional, Bool, Available since v1.63.0) Checking DeleteProtection of SLB instance before deleting. If true, this resource will not be deleted when its SLB instance enabled DeleteProtection. Default value: <code>false</code>.</p>
</aside></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/HTTPS%20Listener"></a><h3 id="https-listener">HTTPS Listener</h3>

<p>The HTTPS Listener supports the following:</p>

<ul>
<li><code>load_balancer_id</code> - (Required, ForceNew) The Load Balancer ID which is used to launch a new listener.</li>
<li><code>protocol</code> - (Required, ForceNew) The protocol to listen on. Valid values: <code>https</code>.</li>
<li><code>frontend_port</code> - (Required, Int, ForceNew) The frontend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>.</li>
<li><code>bandwidth</code> - (Required, Int) The maximum bandwidth of the listener. Unit: Mbit/s. Valid values:
<ul>
<li><code>-1</code>: For a pay-by-data-transfer Internet-facing CLB instance, if you set <code>bandwidth</code> to <code>-1</code>, the bandwidth of the listener is unlimited.</li>
<li><code>1</code> to <code>1000</code>: The sum of the maximum bandwidth that you specify for all listeners of the CLB instance cannot exceed the maximum bandwidth of the CLB instance.
<aside class="admonition note">
<strong>note</strong>
<em>note</em>
<p>Currently, this <code>bandwidth</code> is available on <code>Domestic Site Account</code>. * <code>backend_port</code> - (Optional, Int, ForceNew) The backend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>server_group_id</code> is not set, <code>backend_port</code> is required. * <code>scheduler</code> - (Optional) The scheduling algorithm. Default value: <code>wrr</code>. Valid values: - <code>wrr</code>: Backend servers with higher weights receive more requests than those with lower weights. - <code>rr</code>: Requests are distributed to backend servers in sequence. * <code>server_group_id</code> - (Optional) The ID of the vServer group. It's the ID of resource <code>alicloud_slb_server_group</code>. * <code>acl_status</code> - (Optional) Specifies whether to enable access control. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>acl_type</code> - (Optional) The type of the network ACL. Valid values: <code>black</code>, <code>white</code>. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_type</code> is required. Otherwise, it will be ignored. * <code>acl_id</code> - (Optional) The ID of the network ACL that is associated with the listener. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_id</code> is required. Otherwise, it will be ignored. * <code>sticky_session</code> - (Optional) Specifies whether to enable session persistence. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>sticky_session_type</code> - (Optional) The method that is used to handle a cookie. Valid values: <code>insert</code>, <code>server</code>. <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, <code>sticky_session_type</code> is required. Otherwise, it will be ignored. * <code>cookie_timeout</code> - (Optional, Int) The timeout period of a cookie. Unit: seconds. Valid values: <code>1</code> to <code>86400</code>. <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, and <code>sticky_session_type</code> is set to <code>insert</code>, <code>cookie_timeout</code> is required. Otherwise, it will be ignored. * <code>cookie</code> - (Optional) The cookie that is configured on the server. The <code>cookie</code> must be <code>1</code> to <code>200</code> characters in length and can contain only ASCII characters and digits. It cannot contain commas (,), semicolons (;), or space characters. It cannot start with a dollar sign ($). <strong>NOTE:</strong> If <code>sticky_session</code> is set to <code>on</code>, and <code>sticky_session_type</code> is set to <code>server</code>, <code>cookie</code> is required. Otherwise, it will be ignored. * <code>health_check</code> - (Optional) Specifies whether to enable the health check feature. Default value: <code>on</code>. Valid values: <code>on</code>, <code>off</code>. <strong>NOTE:</strong> <code>TCP</code> and <code>UDP</code> listener's HealthCheck is always on, so it will be ignored when launching <code>TCP</code> or <code>UDP</code> listener. * <code>health_check_method</code> - (Optional, Available since v1.70.0) The health check method used in HTTP health checks. Valid values: <code>head</code>, <code>get</code>. <strong>NOTE:</strong> <code>health_check_method</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_domain</code> - (Optional) The domain name that is used for health checks. <strong>NOTE:</strong> <code>health_check_domain</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_uri</code> - (Optional) The URI that is used for health checks. The <code>health_check_uri</code> must be <code>1</code> to <code>80</code> characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), percent signs (%), question marks (?), number signs (#), and ampersands (&amp;). The URI must start with a forward slash (/) but cannot be a single forward slash (/). <strong>NOTE:</strong> <code>health_check_uri</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_connect_port</code> - (Optional, Int) The backend port that is used for health checks. Valid values: <code>0</code> to <code>65535</code>. <strong>NOTE:</strong> <code>health_check_connect_port</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>healthy_threshold</code> - (Optional, Int) The number of times that an unhealthy backend server must consecutively pass health checks before it is declared healthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. <strong>NOTE:</strong> <code>healthy_threshold</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>unhealthy_threshold</code> - (Optional, Int) The number of times that a healthy backend server must consecutively fail health checks before it is declared unhealthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. <strong>NOTE:</strong> <code>unhealthy_threshold</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_timeout</code> - (Optional, Int) The timeout period of a health check response. Unit: seconds. Default value: <code>5</code>. Valid values: <code>1</code> to <code>300</code>. <strong>NOTE:</strong> If <code>health_check_timeout</code> &lt; <code>health_check_interval</code>, <code>health_check_timeout</code> will be replaced by <code>health_check_interval</code>. <code>health_check_timeout</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_interval</code> - (Optional, Int) The interval between two consecutive health checks. Unit: seconds. Default value: <code>2</code>. Valid values: <code>1</code> to <code>50</code>. <strong>NOTE:</strong> <code>health_check_interval</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>health_check_http_code</code> - (Optional) The HTTP status code for a successful health check. Separate multiple HTTP status codes with commas (<code>,</code>). Default value: <code>http_2xx</code>. Valid values: <code>http_2xx</code>, <code>http_3xx</code>, <code>http_4xx</code> and <code>http_5xx</code>. <strong>NOTE:</strong> <code>health_check_http_code</code> takes effect only if <code>health_check</code> is set to <code>on</code>. * <code>server_certificate_id</code> - (Optional, Available since v1.59.0) The ID of the server certificate. <strong>NOTE:</strong> <code>server_certificate_id</code> is also required when the value of the <code>ssl_certificate_id</code> is Empty. * <code>ca_certificate_id</code> - (Optional, Available since v1.104) The ID of the certification authority (CA) certificate. * <code>gzip</code> - (Optional, Bool, Available since v1.13.0) Specifies whether to enable GZIP compression to compress specific types of files. Default value: <code>true</code>. Valid values: <code>true</code>, <code>false</code>. * <code>idle_timeout</code> - (Optional, Int) The timeout period of an idle connection. Unit: seconds. Default value: <code>15</code>. Valid values: <code>1</code> to <code>60</code>. * <code>request_timeout</code> - (Optional, Int) The timeout period of a request. Unit: seconds. Default value: <code>60</code>. Valid values: <code>1</code> to <code>180</code>. * <code>enable_http2</code> - (Optional) Specifies whether to enable HTTP/2. Default value: <code>on</code>. Valid values: <code>on</code>, <code>off</code>. * <code>tls_cipher_policy</code> - (Optional) The Transport Layer Security (TLS) security policy. Default value: <code>tls_cipher_policy_1_0</code>. Valid values: <code>tls_cipher_policy_1_0</code>, <code>tls_cipher_policy_1_1</code>, <code>tls_cipher_policy_1_2</code>, <code>tls_cipher_policy_1_2_strict</code>, <code>tls_cipher_policy_1_2_strict_with_1_3</code>. <strong>NOTE:</strong> From version 1.229.1, <code>tls_cipher_policy</code> can be set to <code>tls_cipher_policy_1_2_strict_with_1_3</code>. * <code>x_forwarded_for</code> - (Optional, Set, Available since v1.13.0) Whether to set additional HTTP Header field "X-Forwarded-For". See <a href="#x_forwarded_for"><code>x_forwarded_for</code></a> below. * <code>description</code> - (Optional, Available since v1.69.0) The name of the listener. The name must be 1 to 256 characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), and underscores (_). * <code>delete_protection_validation</code> - (Optional, Bool, Available since v1.63.0) Checking DeleteProtection of SLB instance before deleting. If true, this resource will not be deleted when its SLB instance enabled DeleteProtection. Default value: <code>false</code>. * <code>ssl_certificate_id</code> - (Deprecated since v1.59.0) The ID of the server certificate. <strong>NOTE:</strong> Field <code>ssl_certificate_id</code> has been deprecated from provider version 1.59.0. New field <code>server_certificate_id</code> instead.</p>
</aside></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/TCP%20Listener"></a><h3 id="tcp-listener">TCP Listener</h3>

<p>The TCP Listener supports the following:</p>

<ul>
<li><code>load_balancer_id</code> - (Required, ForceNew) The Load Balancer ID which is used to launch a new listener.</li>
<li><code>protocol</code> - (Required, ForceNew) The protocol to listen on. Valid values: <code>tcp</code>.</li>
<li><code>frontend_port</code> - (Required, Int, ForceNew) The frontend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>.</li>
<li><code>bandwidth</code> - (Required, Int) The maximum bandwidth of the listener. Unit: Mbit/s. Valid values:
<ul>
<li><code>-1</code>: For a pay-by-data-transfer Internet-facing CLB instance, if you set <code>bandwidth</code> to <code>-1</code>, the bandwidth of the listener is unlimited.</li>
<li><code>1</code> to <code>1000</code>: The sum of the maximum bandwidth that you specify for all listeners of the CLB instance cannot exceed the maximum bandwidth of the CLB instance.
<aside class="admonition note">
<strong>note</strong>
<em>note</em>
<p>Currently, this <code>bandwidth</code> is available on <code>Domestic Site Account</code>. * <code>backend_port</code> - (Optional, Int, ForceNew) The backend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>server_group_id</code> is not set, <code>backend_port</code> is required. * <code>scheduler</code> - (Optional) The scheduling algorithm. Default value: <code>wrr</code>. Valid values: - <code>wrr</code>: Backend servers with higher weights receive more requests than those with lower weights. - <code>rr</code>: Requests are distributed to backend servers in sequence. - <code>sch</code>: Specifies consistent hashing that is based on source IP addresses. Requests from the same source IP address are distributed to the same backend server. - <code>tch</code>: Specifies consistent hashing that is based on four factors: source IP address, destination IP address, source port, and destination port. Requests that contain the same information based on the four factors are distributed to the same backend server. <strong>NOTE:</strong> Only high-performance CLB instances support the <code>sch</code> and <code>tch</code> consistent hashing algorithms. * <code>server_group_id</code> - (Optional) The ID of the vServer group. It's the ID of resource <code>alicloud_slb_server_group</code>. * <code>master_slave_server_group_id</code> - (Optional) The ID of the primary/secondary server group. <strong>NOTE:</strong> You cannot set both <code>server_group_id</code> and <code>master_slave_server_group_id</code>. * <code>acl_status</code> - (Optional) Specifies whether to enable access control. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>acl_type</code> - (Optional) The type of the network ACL. Valid values: <code>black</code>, <code>white</code>. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_type</code> is required. Otherwise, it will be ignored. * <code>acl_id</code> - (Optional) The ID of the network ACL that is associated with the listener. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_id</code> is required. Otherwise, it will be ignored. * <code>persistence_timeout</code> - (Optional, Int) The timeout period of session persistence. Unit: seconds. Default value: <code>0</code>. Valid values: <code>0</code> to <code>3600</code>. * <code>health_check_type</code> - (Optional) The type of health checks. Default value: <code>tcp</code>. Valid values: <code>tcp</code>, <code>http</code>. * <code>health_check_domain</code> - (Optional) The domain name that is used for health checks. * <code>health_check_uri</code> - (Optional) The URI that is used for health checks. The <code>health_check_uri</code> must be <code>1</code> to <code>80</code> characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), percent signs (%), question marks (?), number signs (#), and ampersands (&amp;). The URI must start with a forward slash (/) but cannot be a single forward slash (/). <strong>NOTE:</strong> You can set <code>health_check_uri</code> when the <code>TCP</code> listener requires <code>HTTP</code> health checks. If you do not set <code>health_check_uri</code>, <code>TCP</code> health checks will be performed. * <code>health_check_connect_port</code> - (Optional, Int) The backend port that is used for health checks. Valid values: <code>0</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>health_check_connect_port</code> is not set, the backend port specified by <code>backend_port</code> is used for health checks. * <code>healthy_threshold</code> - (Optional, Int) The number of times that an unhealthy backend server must consecutively pass health checks before it is declared healthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. * <code>unhealthy_threshold</code> - (Optional, Int) The number of times that a healthy backend server must consecutively fail health checks before it is declared unhealthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. * <code>health_check_timeout</code> - (Optional, Int) The maximum timeout period of a health check response. Unit: seconds. Default value: <code>5</code>. Valid values: <code>1</code> to <code>300</code>. * <code>health_check_interval</code> - (Optional, Int) The interval between two consecutive health checks. Unit: seconds. Default value: <code>2</code>. Valid values: <code>1</code> to <code>50</code>. * <code>health_check_http_code</code> - (Optional) The HTTP status code for a successful health check. Separate multiple HTTP status codes with commas (<code>,</code>). Default value: <code>http_2xx</code>. Valid values: <code>http_2xx</code>, <code>http_3xx</code>, <code>http_4xx</code> and <code>http_5xx</code>. * <code>established_timeout</code> - (Optional, Int) The timeout period of a connection. Unit: seconds. Default value: <code>900</code>. Valid values: <code>10</code> to <code>900</code>. * <code>proxy_protocol_v2_enabled</code> - (Optional, Bool, Available since v1.187.0) Specifies whether to use the Proxy protocol to pass client IP addresses to backend servers. Default value: <code>false</code>. Valid values: <code>true</code>, <code>false</code>. * <code>description</code> - (Optional, Available since v1.69.0) The name of the listener. The name must be 1 to 256 characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), and underscores (_). * <code>delete_protection_validation</code> - (Optional, Bool, Available since v1.63.0) Checking DeleteProtection of SLB instance before deleting. If true, this resource will not be deleted when its SLB instance enabled DeleteProtection. Default value: <code>false</code>.</p>
</aside></li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/UDP%20Listener"></a><h3 id="udp-listener">UDP Listener</h3>

<p>The UDP Listener supports the following:</p>

<ul>
<li><code>load_balancer_id</code> - (Required, ForceNew) The Load Balancer ID which is used to launch a new listener.</li>
<li><code>protocol</code> - (Required, ForceNew) The protocol to listen on. Valid values: <code>udp</code>.</li>
<li><code>frontend_port</code> - (Required, Int, ForceNew) The frontend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>.</li>
<li><code>bandwidth</code> - (Required, Int) The maximum bandwidth of the listener. Unit: Mbit/s. Valid values:
<ul>
<li><code>-1</code>: For a pay-by-data-transfer Internet-facing CLB instance, if you set <code>bandwidth</code> to <code>-1</code>, the bandwidth of the listener is unlimited.</li>
<li><code>1</code> to <code>1000</code>: The sum of the maximum bandwidth that you specify for all listeners of the CLB instance cannot exceed the maximum bandwidth of the CLB instance.
<aside class="admonition note">
<strong>note</strong>
<em>note</em>
<p>Currently, this <code>bandwidth</code> is available on <code>Domestic Site Account</code>. * <code>backend_port</code> - (Optional, Int, ForceNew) The backend port that is used by the CLB instance. Valid values: <code>1</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>server_group_id</code> is not set, <code>backend_port</code> is required. * <code>scheduler</code> - (Optional) The scheduling algorithm. Default value: <code>wrr</code>. Valid values: - <code>wrr</code>: Backend servers with higher weights receive more requests than those with lower weights. - <code>rr</code>: Requests are distributed to backend servers in sequence. - <code>sch</code>: Specifies consistent hashing that is based on source IP addresses. Requests from the same source IP address are distributed to the same backend server. - <code>tch</code>: Specifies consistent hashing that is based on four factors: source IP address, destination IP address, source port, and destination port. Requests that contain the same information based on the four factors are distributed to the same backend server. - <code>qch</code>: Specifies consistent hashing that is based on QUIC connection IDs. Requests that contain the same QUIC connection ID are distributed to the same backend server. <strong>NOTE:</strong> Only high-performance CLB instances support the <code>sch</code>, <code>tch</code>, and <code>qch</code> consistent hashing algorithms. * <code>server_group_id</code> - (Optional) The ID of the vServer group. It's the ID of resource <code>alicloud_slb_server_group</code>. * <code>master_slave_server_group_id</code> - (Optional) The ID of the primary/secondary server group. <strong>NOTE:</strong> You cannot set both <code>server_group_id</code> and <code>master_slave_server_group_id</code>. * <code>acl_status</code> - (Optional) Specifies whether to enable access control. Default value: <code>off</code>. Valid values: <code>on</code>, <code>off</code>. * <code>acl_type</code> - (Optional) The type of the network ACL. Valid values: <code>black</code>, <code>white</code>. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_type</code> is required. Otherwise, it will be ignored. * <code>acl_id</code> - (Optional) The ID of the network ACL that is associated with the listener. <strong>NOTE:</strong> If <code>acl_status</code> is set to <code>on</code>, <code>acl_id</code> is required. Otherwise, it will be ignored. * <code>health_check_connect_port</code> - (Optional, Int) The backend port that is used for health checks. Valid values: <code>0</code> to <code>65535</code>. <strong>NOTE:</strong> If <code>health_check_connect_port</code> is not set, the backend port specified by <code>backend_port</code> is used for health checks. * <code>healthy_threshold</code> - (Optional, Int) The number of times that an unhealthy backend server must consecutively pass health checks before it is declared healthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. * <code>unhealthy_threshold</code> - (Optional, Int) The number of times that a healthy backend server must consecutively fail health checks before it is declared unhealthy. Default value: <code>3</code>. Valid values: <code>2</code> to <code>10</code>. * <code>health_check_timeout</code> - (Optional, Int) The maximum timeout period of a health check response. Unit: seconds. Default value: <code>5</code>. Valid values: <code>1</code> to <code>300</code>. * <code>health_check_interval</code> - (Optional, Int) The interval between two consecutive health checks. Unit: seconds. Default value: <code>2</code>. Valid values: <code>1</code> to <code>50</code>. * <code>proxy_protocol_v2_enabled</code> - (Optional, Bool, Available since v1.187.0) Specifies whether to use the Proxy protocol to pass client IP addresses to backend servers. Default value: <code>false</code>. Valid values: <code>true</code>, <code>false</code>. * <code>description</code> - (Optional, Available since v1.69.0) The name of the listener. The name must be 1 to 256 characters in length, and can contain letters, digits, hyphens (-), forward slashes (/), periods (.), and underscores (_). * <code>delete_protection_validation</code> - (Optional, Bool, Available since v1.63.0) Checking DeleteProtection of SLB instance before deleting. If true, this resource will not be deleted when its SLB instance enabled DeleteProtection. Default value: <code>false</code>.</p>
</aside></li>
</ul></li>
</ul>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Once enable the http redirect to https function, any parameters excepted forward_port, listener_forward, load_balancer_id, frontend_port, protocol will be ignored. More info, please refer to <a href="https://www.alibabacloud.com/help/doc-detail/89151.htm?spm=a2c63.p38356.b99.186.42f66384mpjUTB">Redirect http to https</a>.</p>
</aside>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Advantanced feature such as <code>tls_cipher_policy</code>, can not be updated when load balancer instance is "Shared-Performance". More info, please refer to <a href="https://www.alibabacloud.com/help/doc-detail/27593.htm">Configure a HTTPS Listener</a>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/x_forwarded_for"></a><h3 id="x_forwarded_for"><code>x_forwarded_for</code></h3>

<p>The x_forwarded_for mapping supports the following:</p>

<ul>
<li><code>retrive_slb_ip</code> - (Optional, Bool) Indicates whether the SLB-IP header is used to retrieve the virtual IP address (VIP) requested by the client. Default value: <code>false</code>. Valid values: <code>true</code>, <code>false</code>.</li>
<li><code>retrive_slb_id</code> - (Optional, Bool) Indicates whether the SLB-ID header is used to retrieve the ID of the CLB instance. Default value: <code>false</code>. Valid values: <code>true</code>, <code>false</code>.</li>
<li><code>retrive_slb_proto</code> - (Optional, Bool) Specifies whether to use the X-Forwarded-Proto header to retrieve the listener protocol. Default value: <code>false</code>. Valid values: <code>true</code>, <code>false</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>id</code> - The resource ID in terraform of Listener. It formats as <code>&lt;load_balancer_id&gt;:&lt;protocol&gt;:&lt;frontend_port&gt;</code>.
<aside class="admonition note">
<strong>note</strong>
<em>note</em>
<p>Before provider version 1.57.1, it formats as <code>&lt;load_balancer_id&gt;:&lt;frontend_port&gt;</code>. * <code>x_forwarded_for</code> - Whether to set additional HTTP Header field "X-Forwarded-For". * <code>retrive_client_ip</code> - Whether to retrieve the client ip.</p>
</aside></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Classic Load Balancer (SLB) Load Balancer Listener can be imported using the id, e.g.</p>

<div class="codehilite"><pre><span></span><code>$ terraform import alicloud_slb_listener.example &lt;load_balancer_id&gt;:&lt;protocol&gt;:&lt;frontend_port&gt;
</code></pre></div>

<p><strong>NOTE:</strong> Before provider version 1.57.1, Classic Load Balancer (SLB) Load Balancer Listener can be imported using the id, e.g.</p>

<div class="codehilite"><pre><span></span><code>$ terraform import alicloud_slb_listener.example &lt;load_balancer_id&gt;:&lt;frontend_port&gt;
</code></pre></div>

            
        
    </body></html>
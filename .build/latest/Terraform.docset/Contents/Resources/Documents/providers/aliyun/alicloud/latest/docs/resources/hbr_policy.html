<html><!-- Online page at https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/hbr_policy --><head>
                <title>alicloud_hbr_policy</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="alicloud_hbr_policy">alicloud_hbr_policy</h1>

<p>Provides a Hybrid Backup Recovery (HBR) Policy resource.</p>

<p>For information about Hybrid Backup Recovery (HBR) Policy and how to use it, see <a href="https://www.alibabacloud.com/help/en/cloud-backup/developer-reference/api-hbr-2017-09-08-createpolicyv2">What is Policy</a>.</p>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Available since v1.221.0.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<p>Basic Usage</p>

<div style="display: block;margin-bottom: 40px;"><div class="oics-button" style="float: right;position: absolute;margin-bottom: 10px;">
  <a href="https://api.aliyun.com/terraform?resource=alicloud_hbr_policy&amp;exampleId=1815e3cf-c5d0-cd30-ebab-0d1865f44adaa392e053&amp;activeTab=example&amp;spm=docs.r.hbr_policy.0.1815e3cfc5&amp;intl_lang=EN_US" target="_blank">
    <img alt="Open in AliCloud" src="https://img.alicdn.com/imgextra/i1/O1CN01hjjqXv1uYUlY56FyX_!!6000000006049-55-tps-254-36.svg" style="max-height: 44px; max-width: 100%;"/>
  </a>
</div></div>

<div class="codehilite"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">"name"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-example"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">"alicloud"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"cn-hangzhou"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"random_integer"</span><span class="w"> </span><span class="nv">"default"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">99999</span><span class="w"></span>
<span class="w">  </span><span class="na">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10000</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_hbr_vault"</span><span class="w"> </span><span class="nv">"defaultyk84Hc"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"STANDARD"</span><span class="w"></span>
<span class="w">  </span><span class="na">vault_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-value-${random_integer.default.result}"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"alicloud_hbr_policy"</span><span class="w"> </span><span class="nv">"defaultoqWvHQ"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"example-value-${random_integer.default.result}"</span><span class="w"></span>
<span class="w">  </span><span class="nb">rules</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">rule_type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"BACKUP"</span><span class="w"></span>
<span class="w">    </span><span class="na">backup_type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="w"></span>
<span class="w">    </span><span class="na">schedule</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"I|1631685600|P1D"</span><span class="w"></span>
<span class="w">    </span><span class="na">retention</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"7"</span><span class="w"></span>
<span class="w">    </span><span class="na">archive_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0"</span><span class="w"></span>
<span class="w">    </span><span class="na">vault_id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">alicloud_hbr_vault.defaultyk84Hc.id</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="na">policy_description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"policy example"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>policy_description</code> - (Optional) The policy description.</li>
<li><code>policy_name</code> - (Optional) Policy Name</li>
<li><code>policy_type</code> - (Optional, ForceNew, Available since v1.243.0) The policy type. Valid values:
<ul>
<li><code>STANDARD</code>: The general backup policy. This type of policy applies to backups other than Elastic Compute Service (ECS) instance backup.</li>
<li><code>UDM_ECS_ONLY</code>: The ECS instance backup policy. This type of policy applies only to ECS instance backup.</li>
</ul></li>
<li><code>rules</code> - (Optional, Set) A list of policy rules See <a href="#rules"><code>rules</code></a> below.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/rules"></a><h3 id="rules"><code>rules</code></h3>

<p>The rules supports the following:</p>

<ul>
<li><code>archive_days</code> - (Optional, Computed, Int) This parameter is required only when the value of <code>RuleType</code> is **TRANSITION. The minimum value is 30, and the Retention-ArchiveDays needs to be greater than or equal to 60.</li>
<li><code>backup_type</code> - (Optional) This parameter is required only when the <code>RuleType</code> value is **BACKUP. Backup Type.</li>
<li><code>keep_latest_snapshots</code> - (Optional, Int) This parameter is required only when <code>RuleType</code> is set to <code>BACKUP</code>.</li>
<li><code>replication_region_id</code> - (Optional) Only when the <code>RuleType</code> value is.</li>
<li><code>retention</code> - (Optional, Int) This parameter is required only when the value of <code>RuleType</code> is <code>TRANSITION</code> or **REPLICATION.
<ul>
<li><code>RuleType</code>: <code>TRANSITION</code>: the backup retention time. The minimum value is 1 and the maximum value is 364635, in days.</li>
<li><code>RuleType</code>: <code>REPLICATION</code>: The minimum value is 1 and the maximum value is 364635. The unit is days.</li>
</ul></li>
<li><code>retention_rules</code> - (Optional, List) This parameter is required only when the value of <code>RuleType</code> is <code>TRANSITION</code>. See <a href="#rules-retention_rules"><code>retention_rules</code></a> below.</li>
<li><code>rule_type</code> - (Required) Rule Type.</li>
<li><code>schedule</code> - (Optional) This parameter is required only if you set the <code>RuleType</code> parameter to <code>BACKUP</code>. This parameter specifies the backup schedule settings. Format: <code>I|{startTime}|{interval}</code>. The system runs the first backup job at a point in time that is specified in the {startTime} parameter and the subsequent backup jobs at an interval that is specified in the {interval} parameter. The system does not run a backup job before the specified point in time. Each backup job, except the first one, starts only after the previous backup job is complete. For example, <code>I|1631685600|P1D</code> specifies that the system runs the first backup job at 14:00:00 on September 15, 2021 and the subsequent backup jobs once a day.  *   startTime: the time at which the system starts to run a backup job. The time must follow the UNIX time format. Unit: seconds. *   interval: the interval at which the system runs a backup job. The interval must follow the ISO 8601 standard. For example, PT1H specifies an interval of one hour. P1D specifies an interval of one day.</li>
<li><code>vault_id</code> - (Optional) Vault ID.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/rules-retention_rules"></a><h3 id="rules-retention_rules"><code>rules-retention_rules</code></h3>

<p>The rules-retention_rules supports the following:</p>

<ul>
<li><code>advanced_retention_type</code> - (Optional) Valid values: <code>annually</code>, <code>MONTHLY</code>, and <code>WEEKLY</code>:- <code>annually</code>: the first backup of each year. - <code>MONTHLY</code>: The first backup of the month. - <code>WEEKLY</code>: The first backup of the week. - <code>DAILY</code>: The first backup of the day.</li>
<li><code>retention</code> - (Optional, Int) Retention time, in days.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>id</code> - The ID of the resource supplied above.</li>
<li><code>create_time</code> - Policy creation time</li>
<li><code>rules</code> - A list of policy rules
<ul>
<li><code>rule_id</code> - Rule ID.</li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts">timeouts</a> for certain actions:</p>

<ul>
<li><code>create</code> - (Defaults to 5 mins) Used when create the Policy.</li>
<li><code>delete</code> - (Defaults to 5 mins) Used when delete the Policy.</li>
<li><code>update</code> - (Defaults to 5 mins) Used when update the Policy.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Hybrid Backup Recovery (HBR) Policy can be imported using the id, e.g.</p>

<div class="codehilite"><pre><span></span><code>$ terraform import alicloud_hbr_policy.example &lt;id&gt;
</code></pre></div>

            
        
    </body></html>
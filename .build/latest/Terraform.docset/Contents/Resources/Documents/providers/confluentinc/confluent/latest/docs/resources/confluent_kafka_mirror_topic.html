<html><!-- Online page at https://registry.terraform.io/providers/confluentinc/confluent/latest/docs/resources/confluent_kafka_mirror_topic --><head>
                <title>confluent_kafka_mirror_topic</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="confluent_kafka_mirror_topic-resource">confluent_kafka_mirror_topic Resource</h1>

<p><a href="https://docs.confluent.io/cloud/current/api.html#section/Versioning/API-Lifecycle-Policy"><img alt="General Availability" src="https://img.shields.io/badge/Lifecycle%20Stage-General%20Availability-%2345c6e8"/></a></p>

<p><code>confluent_kafka_mirror_topic</code> provides a Kafka Mirror Topic resource that enables creating and deleting Kafka Mirror Topics on a Kafka cluster on Confluent Cloud.</p>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>It is recommended to set <code>lifecycle { prevent_destroy = true }</code> on production instances to prevent accidental mirror topic deletion. This setting rejects plans that would destroy or recreate the mirror topic. Read more about it in the <a href="https://www.terraform.io/language/meta-arguments/lifecycle#prevent_destroy">Terraform docs</a>.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"confluent_kafka_mirror_topic"</span><span class="w"> </span><span class="nv">"example"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nb">source_kafka_topic</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">topic_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"orders"</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">cluster_link</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">link_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">confluent_cluster_link.source-outbound.link_name</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">kafka_cluster</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">id</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nv">data.confluent_kafka_cluster.destination.id</span><span class="w"></span>
<span class="w">    </span><span class="na">rest_endpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.confluent_kafka_cluster.destination.rest_endpoint</span><span class="w"></span>
<span class="w">    </span><span class="nb">credentials</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">key</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">confluent_api_key.app-manager-destination-cluster-api-key.id</span><span class="w"></span>
<span class="w">      </span><span class="na">secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">confluent_api_key.app-manager-destination-cluster-api-key.secret</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">lifecycle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">prevent_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>kafka_cluster</code> - (Required Configuration Block) supports the following:
<ul>
<li><code>id</code> - (Required String) The ID of the destination Kafka cluster, for example, <code>lkc-abc123</code>.</li>
<li><code>rest_endpoint</code> - (Required String) The REST endpoint of the destination Kafka cluster, for example, <code>https://pkc-00000.us-central1.gcp.confluent.cloud:443</code>).</li>
<li><code>credentials</code> (Required Configuration Block) supports the following:
<ul>
<li><code>key</code> - (Required String) The Kafka API Key.</li>
<li><code>secret</code> - (Required String, Sensitive) The Kafka API Secret.</li>
</ul></li>
</ul></li>
<li><code>cluster_link</code> - (Required Configuration Block) supports the following:
<ul>
<li><code>link_name</code> - (Required String) The name of the cluster link to attach to the mirror topic, for example, <code>my-cluster-link</code>.</li>
</ul></li>
<li><code>source_kafka_topic</code> - (Required Configuration Block) supports the following:
<ul>
<li><code>topic_name</code> - (Required String) The name of the topic on the source cluster to be mirrored over the cluster link, for example, <code>orders</code>. A topic with the exact same name must exist on the source cluster, and no topic with this name should exist on the destination cluster.</li>
</ul></li>
<li><code>mirror_topic_name</code> - (Optional String) The name of the mirror topic. Only required when there is a prefix configured on the cluster link. For example, when <code>&lt;prefix&gt;</code> is configured for the cluster link, the mirror topic name has to be of the format <code>&lt;prefix&gt;&lt;source_topic_name&gt;</code>.</li>
<li><code>status</code> (Optional String) The status of the mirror topic. The supported values are <code>"ACTIVE"</code>, <code>"PAUSED"</code>, <code>"PROMOTED"</code>, <code>"FAILED_OVER"</code>. Pausing (<code>"ACTIVE" -&gt; "PAUSED"</code>), resuming (<code>"PAUSED" -&gt; "ACTIVE"</code>), promoting, and failing over a mirror topic is supported via an update operation. Defaults to <code>"ACTIVE"</code>.</li>
</ul>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>A Kafka API key consists of a key and a secret. Kafka API keys are required to interact with Kafka clusters in Confluent Cloud. Each Kafka API key is valid for one specific Kafka cluster.</p>
</aside>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>To rotate a Kafka API key, create a new Kafka API key, update the <code>credentials</code> block in all configuration files to use the new Kafka API key, run <code>terraform apply -target="confluent_kafka_mirror_topic.example"</code>, and remove the old Kafka API key. Alternatively, in case the old Kafka API Key was deleted already, you might need to run <code>terraform plan -refresh=false -target="confluent_kafka_mirror_topic.example" -out=rotate-kafka-api-key</code> and <code>terraform apply rotate-kafka-api-key</code> instead.</p>
</aside>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>Setting or updating mirror topic settings is currently not supported.</p>
</aside>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p>For more information on the topic settings, see <a href="https://docs.confluent.io/cloud/current/multi-cloud/cluster-linking/mirror-topics-cc.html#configurations">Cluster Linking configurations</a>.</p>
</aside>

<aside class="admonition danger">
    <strong>danger</strong>
    <em>Warning</em>
    <p>Terraform doesn't encrypt the sensitive <code>credentials</code> value of the <code>confluent_kafka_mirror_topic</code> resource, so you must keep your state file secure to avoid exposing it. Refer to the <a href="https://www.terraform.io/docs/language/state/sensitive-data.html">Terraform documentation</a> to learn more about securing your state file.</p>
</aside>

<aside class="admonition danger">
    <strong>danger</strong>
    <em>Warning</em>
    <p>When promoting or failing over a mirror topic, don't destroy a mirror topic. Instead, <a href="https://registry.terraform.io/providers/confluentinc/confluent/latest/docs/resources/confluent_kafka_topic#import">import</a> a Kafka topic, and then save have both resource definitions in Terraform configuration or run <code>terraform state rm confluent_kafka_mirror_topic.example</code> command to delete a mirror topic from Terraform state.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>In addition to the preceding arguments, the following attributes are exported:</p>

<ul>
<li><code>id</code> - (Required String) The ID of the Kafka mirror topic, in the format <code>&lt;Kafka cluster ID&gt;/&lt;Cluster link name&gt;/&lt;Kafka Mirror Topic name&gt;</code>, for example, <code>lkc-abc123/my-cluster-link/orders-123</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<aside class="admonition note">
    <strong>note</strong>
    <em>note</em>
    <p><code>IMPORT_KAFKA_API_KEY</code> (<code>kafka_cluster.credentials.key</code>), <code>IMPORT_KAFKA_API_SECRET</code> (<code>kafka_cluster.credentials.secret</code>), and <code>IMPORT_KAFKA_REST_ENDPOINT</code> (<code>kafka_cluster.rest_endpoint</code>) environment variables must be set before importing a Kafka mirror topic.</p>
</aside>

<p>You can import a Kafka mirror topic by using the Kafka cluster ID, cluster link name, and Kafka topic name in the format <code>&lt;Kafka cluster ID&gt;/&lt;Cluster link name&gt;/&lt;Kafka topic name&gt;</code>, for example:</p>

<div class="codehilite"><pre><span></span><code>$ <span class="nb">export</span> <span class="nv">IMPORT_KAFKA_API_KEY</span><span class="o">=</span><span class="s2">"&lt;kafka_api_key&gt;"</span>
$ <span class="nb">export</span> <span class="nv">IMPORT_KAFKA_API_SECRET</span><span class="o">=</span><span class="s2">"&lt;kafka_api_secret&gt;"</span>
$ <span class="nb">export</span> <span class="nv">IMPORT_KAFKA_REST_ENDPOINT</span><span class="o">=</span><span class="s2">"&lt;kafka_rest_endpoint&gt;"</span>
$ terraform import confluent_kafka_mirror_topic.my_mirror_topic lkc-abc123/my-cluster-link/orders-123
</code></pre></div>

<aside class="admonition danger">
    <strong>danger</strong>
    <em>Warning</em>
    <p>Do not forget to delete terminal command history afterwards for security purposes.</p>
</aside>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Getting%20Started"></a><h2 id="getting-started">Getting Started</h2>

<p>The following end-to-end examples might help to get started with <code>confluent_kafka_mirror_topic</code> resource:</p>

<ul>
<li><a href="https://github.com/confluentinc/terraform-provider-confluent/tree/master/examples/configurations/destination-initiated-cluster-link-rbac"><code>destination-initiated-cluster-link-rbac</code></a>: An example of setting up a _destination_ initiated cluster link with a mirror topic</li>
<li><a href="https://github.com/confluentinc/terraform-provider-confluent/tree/master/examples/configurations/source-initiated-cluster-link-rbac"><code>source-initiated-cluster-link-rbac</code></a>: An example of setting up a _source_ initiated cluster link with a mirror topic</li>
</ul>

<p>See <a href="https://docs.confluent.io/cloud/current/multi-cloud/cluster-linking/mirror-topics-cc.html">Mirror Topics on Confluent Cloud</a> to learn more about Mirror Topics on Confluent Cloud.</p>

            
        
    </body></html>
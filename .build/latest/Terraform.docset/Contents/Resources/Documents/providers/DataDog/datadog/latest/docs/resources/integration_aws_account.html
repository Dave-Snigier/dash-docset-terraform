<html><!-- Online page at https://registry.terraform.io/providers/DataDog/datadog/latest/docs/resources/integration_aws_account --><head>
                <title>datadog_integration_aws_account</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="datadog_integration_aws_account-resource">datadog_integration_aws_account (Resource)</h1>

<p>Provides a Datadog—Amazon Web Services integration resource. This can be used to create and manage Datadog—Amazon Web Services integration.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="c1"># Create new integration_aws_account resource</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">"datadog_integration_aws_account"</span><span class="w"> </span><span class="nv">"foo"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">account_tags</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"env:prod"</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="na">aws_account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123456789012"</span><span class="w"></span>
<span class="w">  </span><span class="na">aws_partition</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"aws"</span><span class="w"></span>
<span class="w">  </span><span class="nb">aws_regions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">include_all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="nb">auth_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">aws_auth_config_role</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">role_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DatadogIntegrationRole"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">logs_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">lambda_forwarder</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">lambdas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"arn:aws:lambda:us-east-1:123456789012:function:my-lambda"</span><span class="p">]</span><span class="w"></span>
<span class="w">      </span><span class="na">sources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"s3"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">metrics_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">automute_enabled</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">collect_cloudwatch_alarms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">collect_custom_metrics</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">enabled</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="nb">namespace_filters</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">exclude_only</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"AWS/SQS", "AWS/ElasticMapReduce"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">tag_filters</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AWS/EC2"</span><span class="w"></span>
<span class="w">      </span><span class="na">tags</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"datadog:true"</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">resources_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="na">cloud_security_posture_management_collection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="na">extended_collection</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">traces_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">xray_services</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">include_all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Create new integration_aws_account resource with all Datadog-provided defaults configured</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">"datadog_integration_aws_account"</span><span class="w"> </span><span class="nv">"foo-defaults"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="na">aws_account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"234567890123"</span><span class="w"></span>
<span class="w">  </span><span class="na">aws_partition</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"aws"</span><span class="w"></span>
<span class="w">  </span><span class="nb">aws_regions</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="w">  </span><span class="nb">auth_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">aws_auth_config_role</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="na">role_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DatadogIntegrationRole"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">logs_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">lambda_forwarder</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">metrics_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">namespace_filters</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="nb">resources_config</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="nb">traces_config</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">xray_services</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<!-- schema generated by tfplugindocs -->

<a class="dashAnchor" name="//apple_ref/cpp/Section/Schema"></a><h2 id="schema">Schema</h2>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Required"></a><h3 id="required">Required</h3>

<ul>
<li><code>aws_account_id</code> (String) Your AWS Account ID without dashes.</li>
<li><code>aws_partition</code> (String) AWS Account partition.</li>
<li><code>auth_config</code> (Block) Configure how Datadog authenticates to your AWS account. Either <code>aws_auth_config_keys</code> or <code>aws_auth_config_role</code> block is required within. (see <a href="#nestedblock--auth_config">below for nested schema</a>)</li>
<li><code>aws_regions</code> (Block) AWS regions to collect data from. Defaults to <code>include_all</code> if block is empty. (see <a href="#nestedblock--aws_regions">below for nested schema</a>)</li>
<li><code>logs_config</code> (Block) Configure log autosubscription for your Datadog Forwarder Lambda functions. The <code>lambda_fowarder</code> block is required within, but may be empty to use defaults. (see <a href="#nestedblock--logs_config">below for nested schema</a>)</li>
<li><code>metrics_config</code> (Block) Configure metrics collection from AWS CloudWatch. The <code>namespace_filters</code> block is required within, but may be empty to use defaults. (see <a href="#nestedblock--metrics_config">below for nested schema</a>)</li>
<li><code>resources_config</code> (Block) AWS resources collection config. May be empty to use defaults. (see <a href="#nestedblock--resources_config">below for nested schema</a>)</li>
<li><code>traces_config</code> (Block) AWS traces collection config. The <code>xray_services</code> block is required within, but may be empty to use defaults. (see <a href="#nestedblock--traces_config">below for nested schema</a>)</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Optional"></a><h3 id="optional">Optional</h3>

<ul>
<li><code>account_tags</code> (List of String) Tags to apply to all metrics in the account. Defaults to <code>[]</code>.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Read-Only"></a><h3 id="read-only">Read-Only</h3>

<ul>
<li><code>id</code> (String) The ID of this resource.</li>
</ul>

<p><a id="nestedblock--auth_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20auth_config"></a><h3 id="nested-schema-for-auth_config">Nested Schema for <code>auth_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>aws_auth_config_keys</code> (Block, Optional) (see <a href="#nestedblock--auth_config--aws_auth_config_keys">below for nested schema</a>)</li>
<li><code>aws_auth_config_role</code> (Block, Optional) (see <a href="#nestedblock--auth_config--aws_auth_config_role">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--auth_config--aws_auth_config_keys"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20auth_config.aws_auth_config_keys"></a><h3 id="nested-schema-for-auth_configaws_auth_config_keys">Nested Schema for <code>auth_config.aws_auth_config_keys</code></h3>

<p>Required:</p>

<ul>
<li><code>access_key_id</code> (String) AWS Access Key ID</li>
<li><code>secret_access_key</code> (String, Sensitive) AWS Secret Access Key. This value is write-only; changes made outside of Terraform will not be drift-detected.</li>
</ul>

<p><a id="nestedblock--auth_config--aws_auth_config_role"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20auth_config.aws_auth_config_role"></a><h3 id="nested-schema-for-auth_configaws_auth_config_role">Nested Schema for <code>auth_config.aws_auth_config_role</code></h3>

<p>Required:</p>

<ul>
<li><code>role_name</code> (String) AWS IAM role name.</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>external_id</code> (String) AWS IAM external ID for associated role. If omitted, one is generated.</li>
</ul>

<p><a id="nestedblock--aws_regions"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20aws_regions"></a><h3 id="nested-schema-for-aws_regions">Nested Schema for <code>aws_regions</code></h3>

<p>Optional:</p>

<ul>
<li><code>include_all</code> (Boolean) Include all regions. Defaults to <code>true</code>.</li>
<li><code>include_only</code> (List of String) Include only these regions.</li>
</ul>

<p><a id="nestedblock--logs_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20logs_config"></a><h3 id="nested-schema-for-logs_config">Nested Schema for <code>logs_config</code></h3>

<p>Required:</p>

<ul>
<li><code>lambda_forwarder</code> (Block) Leave empty to omit logs config. (see <a href="#nestedblock--logs_config--lambda_forwarder">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--logs_config--lambda_forwarder"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20logs_config.lambda_forwarder"></a><h3 id="nested-schema-for-logs_configlambda_forwarder">Nested Schema for <code>logs_config.lambda_forwarder</code></h3>

<p>Optional:</p>

<ul>
<li><code>lambdas</code> (List of String) List of Datadog Lambda Log Forwarder ARNs in your AWS account. Defaults to <code>[]</code>.</li>
<li><code>sources</code> (List of String) List of service IDs set to enable automatic log collection. Use <a href="https://registry.terraform.io/providers/DataDog/datadog/latest/docs/data-sources/integration_aws_available_logs_services"><code>datadog_integration_aws_available_logs_services</code> data source</a> to get allowed values. Defaults to <code>[]</code>.</li>
</ul>

<p><a id="nestedblock--metrics_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20metrics_config"></a><h3 id="nested-schema-for-metrics_config">Nested Schema for <code>metrics_config</code></h3>

<p>Required:</p>

<ul>
<li><code>namespace_filters</code> (Block) AWS metrics namespace filters. Defaults to a pre-set <code>exclude_only</code> list if block is empty. (see <a href="#nestedblock--metrics_config--namespace_filters">below for nested schema</a>)</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>automute_enabled</code> (Boolean) Enable EC2 automute for AWS metrics Defaults to <code>true</code>.</li>
<li><code>collect_cloudwatch_alarms</code> (Boolean) Enable CloudWatch alarms collection Defaults to <code>false</code>.</li>
<li><code>collect_custom_metrics</code> (Boolean) Enable custom metrics collection Defaults to <code>false</code>.</li>
<li><code>enabled</code> (Boolean) Enable AWS metrics collection Defaults to <code>true</code>.</li>
<li><code>tag_filters</code> (Block List) AWS Metrics Collection tag filters list. The array of custom AWS resource tags (in the form <code>key:value</code>) defines a filter that Datadog uses when collecting metrics from a specified service. Wildcards, such as <code>?</code> (match a single character) and <code>*</code> (match multiple characters), and exclusion using <code>!</code> before the tag are supported. For EC2, only hosts that match one of the defined tags will be imported into Datadog. The rest will be ignored. For example, <code>env:production,instance-type:c?.*,!region:us-east-1</code>. (see <a href="#nestedblock--metrics_config--tag_filters">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--metrics_config--namespace_filters"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20metrics_config.namespace_filters"></a><h3 id="nested-schema-for-metrics_confignamespace_filters">Nested Schema for <code>metrics_config.namespace_filters</code></h3>

<p>Optional:</p>

<ul>
<li><code>exclude_only</code> (List of String) Exclude only these namespaces from metrics collection. Use <a href="https://registry.terraform.io/providers/DataDog/datadog/latest/docs/data-sources/integration_aws_available_namespaces"><code>datadog_integration_aws_available_namespaces</code> data source</a> to get allowed values. Defaults to <code>["AWS/SQS", "AWS/ElasticMapReduce"]</code>. <code>AWS/SQS</code> and <code>AWS/ElasticMapReduce</code> are excluded by default to reduce your AWS CloudWatch costs from <code>GetMetricData</code> API calls.</li>
<li><code>include_only</code> (List of String) Include only these namespaces for metrics collection. Use <a href="https://registry.terraform.io/providers/DataDog/datadog/latest/docs/data-sources/integration_aws_available_namespaces"><code>datadog_integration_aws_available_namespaces</code> data source</a> to get allowed values.</li>
</ul>

<p><a id="nestedblock--metrics_config--tag_filters"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20metrics_config.tag_filters"></a><h3 id="nested-schema-for-metrics_configtag_filters">Nested Schema for <code>metrics_config.tag_filters</code></h3>

<p>Required:</p>

<ul>
<li><code>namespace</code> (String) The AWS service for which the tag filters defined in <code>tags</code> will be applied.</li>
</ul>

<p>Optional:</p>

<ul>
<li><code>tags</code> (List of String) The AWS resource tags to filter on for the service specified by <code>namespace</code>. Defaults to <code>[]</code>.</li>
</ul>

<p><a id="nestedblock--resources_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20resources_config"></a><h3 id="nested-schema-for-resources_config">Nested Schema for <code>resources_config</code></h3>

<p>Optional:</p>

<ul>
<li><code>cloud_security_posture_management_collection</code> (Boolean) Enable Cloud Security Management to scan AWS resources for vulnerabilities, misconfigurations, identity risks, and compliance violations. Requires <code>extended_collection</code> to be set to <code>true</code>. Defaults to <code>false</code>.</li>
<li><code>extended_collection</code> (Boolean) Whether Datadog collects additional attributes and configuration information about the resources in your AWS account. Required for <code>cloud_security_posture_management_collection</code>. Defaults to <code>true</code>.</li>
</ul>

<p><a id="nestedblock--traces_config"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20traces_config"></a><h3 id="nested-schema-for-traces_config">Nested Schema for <code>traces_config</code></h3>

<p>Required:</p>

<ul>
<li><code>xray_services</code> (Block) AWS X-Ray services to collect traces from. Defaults to <code>include_only</code>. (see <a href="#nestedblock--traces_config--xray_services">below for nested schema</a>)</li>
</ul>

<p><a id="nestedblock--traces_config--xray_services"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Nested%20Schema%20for%20traces_config.xray_services"></a><h3 id="nested-schema-for-traces_configxray_services">Nested Schema for <code>traces_config.xray_services</code></h3>

<p>Optional:</p>

<ul>
<li><code>include_all</code> (Boolean) Include all services.</li>
<li><code>include_only</code> (List of String) Include only these services. Defaults to <code>[]</code>.</li>
</ul>

<p><a id="upgrading"></a></p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Upgrading%20from%20datadog_integration_aws%20resources"></a><h2 id="upgrading-from-datadog_integration_aws-resources">Upgrading from <code>datadog_integration_aws</code> resources</h2>

<p>To migrate your account configuration from <code>datadog_integration_aws*</code> resources to <code>datadog_integration_aws_account</code>:</p>

<ol>
<li>Import your integrated accounts into <code>datadog_integration_aws_account</code> resources using the import command below.</li>
<li>Once successfully imported, you can run <code>terraform state rm</code> to delete all resources of the deprecated types from state:
<ul>
<li><code>datadog_integration_aws</code></li>
<li><code>datadog_integration_aws_lambda_arn</code></li>
<li><code>datadog_integration_aws_log_collection</code></li>
<li><code>datadog_integration_aws_tag_filter</code></li>
</ul></li>
</ol>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Import is supported using the following syntax:</p>

<div class="codehilite"><pre><span></span><code>terraform import datadog_integration_aws_account.example <span class="s2">"&lt;datadog-aws-account-config-id&gt;"</span>
</code></pre></div>

<p>AWS Account Config ID can be retrieved by using the <a href="https://docs.datadoghq.com/api/latest/aws-integration/#list-all-aws-integrations">List all AWS integrations</a> endpoint and querying by AWS Account ID.</p>

            
        
    </body></html>
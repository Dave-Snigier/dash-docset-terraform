<html><!-- Online page at https://registry.terraform.io/providers/oracle/oci/latest/docs/resources/devops_deploy_stage --><head>
                <title>oci_devops_deploy_stage</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="oci_devops_deploy_stage">oci_devops_deploy_stage</h1>

<p>This resource provides the Deploy Stage resource in Oracle Cloud Infrastructure Devops service.</p>

<p>Creates a new deployment stage.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"oci_devops_deploy_stage"</span><span class="w"> </span><span class="nv">"test_deploy_stage"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">    #Required</span>
<span class="w">    </span><span class="na">deploy_pipeline_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_pipeline.test_deploy_pipeline.id</span><span class="w"></span>
<span class="w">    </span><span class="nb">deploy_stage_predecessor_collection</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="nb">items</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">            #Required</span>
<span class="w">            </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_deploy_stage_predecessor_collection_items_id</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">deploy_stage_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_deploy_stage_type</span><span class="c1"></span>

<span class="c1">    #Optional</span>
<span class="w">    </span><span class="nb">approval_policy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">approval_policy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_approval_policy_approval_policy_type</span><span class="w"></span>
<span class="w">        </span><span class="na">number_of_approvals_required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_approval_policy_number_of_approvals_required</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">are_hooks_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_are_hooks_enabled</span><span class="w"></span>
<span class="w">    </span><span class="nb">blue_backend_ips</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_blue_backend_ips_items</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">blue_green_strategy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">ingress_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_blue_green_strategy_ingress_name</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_blue_green_strategy_namespace_a</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_blue_green_strategy_namespace_b</span><span class="w"></span>
<span class="w">        </span><span class="na">strategy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_blue_green_strategy_strategy_type</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">canary_strategy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">ingress_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_canary_strategy_ingress_name</span><span class="w"></span>
<span class="w">        </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_canary_strategy_namespace</span><span class="w"></span>
<span class="w">        </span><span class="na">strategy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_canary_strategy_strategy_type</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">command_spec_deploy_artifact_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_artifact.test_deploy_artifact.id</span><span class="w"></span>
<span class="w">    </span><span class="na">compute_instance_group_blue_green_deployment_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">compute_instance_group_canary_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">compute_instance_group_canary_traffic_shift_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">compute_instance_group_deploy_environment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_environment.test_deploy_environment.id</span><span class="w"></span>
<span class="w">    </span><span class="na">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_config</span><span class="w"></span>
<span class="w">    </span><span class="nb">container_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">container_config_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_container_config_type</span><span class="w"></span>
<span class="w">        </span><span class="nb">network_channel</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">            #Required</span>
<span class="w">            </span><span class="na">network_channel_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_network_channel_network_channel_type</span><span class="w"></span>
<span class="w">            </span><span class="na">subnet_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_core_subnet.test_subnet.id</span><span class="c1"></span>

<span class="c1">            #Optional</span>
<span class="w">            </span><span class="na">nsg_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_network_channel_nsg_ids</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nb">shape_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">            #Required</span>
<span class="w">            </span><span class="na">ocpus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_shape_config_ocpus</span><span class="c1"></span>

<span class="c1">            #Optional</span>
<span class="w">            </span><span class="na">memory_in_gbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_shape_config_memory_in_gbs</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="na">shape_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_core_shape.test_shape.name</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">availability_domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_container_config_availability_domain</span><span class="w"></span>
<span class="w">        </span><span class="na">compartment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.compartment_id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">defined_tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"foo-namespace.bar-key"</span><span class="o">=</span><span class="w"> </span><span class="s2">"value"</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">deploy_artifact_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_artifact.test_deploy_artifact.id</span><span class="w"></span>
<span class="w">    </span><span class="na">deploy_artifact_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_deploy_artifact_ids</span><span class="w"></span>
<span class="w">    </span><span class="na">deploy_environment_id_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_deploy_environment_id_a</span><span class="w"></span>
<span class="w">    </span><span class="na">deploy_environment_id_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_deploy_environment_id_b</span><span class="w"></span>
<span class="w">    </span><span class="na">deployment_spec_deploy_artifact_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_artifact.test_deploy_artifact.id</span><span class="w"></span>
<span class="w">    </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_description</span><span class="w"></span>
<span class="w">    </span><span class="na">display_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_display_name</span><span class="w"></span>
<span class="w">    </span><span class="na">docker_image_deploy_artifact_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_artifact.test_deploy_artifact.id</span><span class="w"></span>
<span class="w">    </span><span class="nb">failure_policy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">policy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_failure_policy_policy_type</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">failure_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_failure_policy_failure_count</span><span class="w"></span>
<span class="w">        </span><span class="na">failure_percentage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_failure_policy_failure_percentage</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">freeform_tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"bar-key"</span><span class="o">=</span><span class="w"> </span><span class="s2">"value"</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">function_deploy_environment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_environment.test_deploy_environment.id</span><span class="w"></span>
<span class="w">    </span><span class="na">function_timeout_in_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_function_timeout_in_seconds</span><span class="w"></span>
<span class="w">    </span><span class="nb">green_backend_ips</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_green_backend_ips_items</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">helm_chart_deploy_artifact_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_artifact.test_deploy_artifact.id</span><span class="w"></span>
<span class="w">    </span><span class="na">helm_command_artifact_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_helm_command_artifact_ids</span><span class="w"></span>
<span class="w">    </span><span class="na">is_async</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_is_async</span><span class="w"></span>
<span class="w">    </span><span class="na">is_debug_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_is_debug_enabled</span><span class="w"></span>
<span class="w">    </span><span class="na">is_force_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_is_force_enabled</span><span class="w"></span>
<span class="w">    </span><span class="na">is_uninstall_on_stage_delete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_is_uninstall_on_stage_delete</span><span class="w"></span>
<span class="w">    </span><span class="na">is_validation_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_is_validation_enabled</span><span class="w"></span>
<span class="w">    </span><span class="na">kubernetes_manifest_deploy_artifact_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_kubernetes_manifest_deploy_artifact_ids</span><span class="w"></span>
<span class="w">    </span><span class="nb">load_balancer_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">backend_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_load_balancer_config_backend_port</span><span class="w"></span>
<span class="w">        </span><span class="na">listener_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_listener.test_listener.name</span><span class="w"></span>
<span class="w">        </span><span class="na">load_balancer_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_load_balancer.test_load_balancer.id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">max_history</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_max_history</span><span class="w"></span>
<span class="w">    </span><span class="na">max_memory_in_mbs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_max_memory_in_mbs</span><span class="w"></span>
<span class="w">    </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_namespace</span><span class="w"></span>
<span class="w">    </span><span class="na">oke_blue_green_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">oke_canary_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">oke_canary_traffic_shift_deploy_stage_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_stage.test_deploy_stage.id</span><span class="w"></span>
<span class="w">    </span><span class="na">oke_cluster_deploy_environment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_devops_deploy_environment.test_deploy_environment.id</span><span class="w"></span>
<span class="w">    </span><span class="nb">production_load_balancer_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">backend_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_production_load_balancer_config_backend_port</span><span class="w"></span>
<span class="w">        </span><span class="na">listener_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_listener.test_listener.name</span><span class="w"></span>
<span class="w">        </span><span class="na">load_balancer_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_load_balancer.test_load_balancer.id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">purpose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_purpose</span><span class="w"></span>
<span class="w">    </span><span class="na">release_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_release_name</span><span class="w"></span>
<span class="w">    </span><span class="nb">rollback_policy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">policy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollback_policy_policy_type</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">rollout_policy</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">policy_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollout_policy_policy_type</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">batch_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollout_policy_batch_count</span><span class="w"></span>
<span class="w">        </span><span class="na">batch_delay_in_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollout_policy_batch_delay_in_seconds</span><span class="w"></span>
<span class="w">        </span><span class="na">batch_percentage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollout_policy_batch_percentage</span><span class="w"></span>
<span class="w">        </span><span class="na">ramp_limit_percent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_rollout_policy_ramp_limit_percent</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">set_string</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="nb">items</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">            #Optional</span>
<span class="w">            </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_set_string_items_name</span><span class="w"></span>
<span class="w">            </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_set_string_items_value</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="nb">set_values</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="nb">items</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">            #Optional</span>
<span class="w">            </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_set_values_items_name</span><span class="w"></span>
<span class="w">            </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_set_values_items_value</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">should_cleanup_on_fail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_cleanup_on_fail</span><span class="w"></span>
<span class="w">    </span><span class="na">should_not_wait</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_not_wait</span><span class="w"></span>
<span class="w">    </span><span class="na">should_reset_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_reset_values</span><span class="w"></span>
<span class="w">    </span><span class="na">should_reuse_values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_reuse_values</span><span class="w"></span>
<span class="w">    </span><span class="na">should_skip_crds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_skip_crds</span><span class="w"></span>
<span class="w">    </span><span class="na">should_skip_render_subchart_notes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_should_skip_render_subchart_notes</span><span class="w"></span>
<span class="w">    </span><span class="nb">test_load_balancer_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="na">backend_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_test_load_balancer_config_backend_port</span><span class="w"></span>
<span class="w">        </span><span class="na">listener_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_listener.test_listener.name</span><span class="w"></span>
<span class="w">        </span><span class="na">load_balancer_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_load_balancer_load_balancer.test_load_balancer.id</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">timeout_in_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_timeout_in_seconds</span><span class="w"></span>
<span class="w">    </span><span class="na">traffic_shift_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_traffic_shift_target</span><span class="w"></span>
<span class="w">    </span><span class="na">values_artifact_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_values_artifact_ids</span><span class="w"></span>
<span class="w">    </span><span class="nb">wait_criteria</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">wait_duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_wait_criteria_wait_duration</span><span class="w"></span>
<span class="w">        </span><span class="na">wait_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.deploy_stage_wait_criteria_wait_type</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>approval_policy</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_APPROVAL | MANUAL_APPROVAL | OKE_CANARY_APPROVAL) (Updatable) Specifies the approval policy.
<ul>
<li><code>approval_policy_type</code> - (Required) (Updatable) Approval policy type.</li>
<li><code>number_of_approvals_required</code> - (Required) (Updatable) A minimum number of approvals required for stage to proceed.</li>
</ul></li>
<li><code>are_hooks_enabled</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Disable pre/post upgrade hooks. Set to false by default.</li>
<li><code>blue_backend_ips</code> - (Required when deploy_stage_type=LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Collection of backend environment IP addresses.
<ul>
<li><code>items</code> - (Applicable when deploy_stage_type=LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) The IP address of the backend server. A server could be a compute instance or a load balancer.</li>
</ul></li>
<li><code>blue_green_strategy</code> - (Required when deploy_stage_type=OKE_BLUE_GREEN_DEPLOYMENT) Specifies the required blue green release strategy for OKE deployment.
<ul>
<li><code>ingress_name</code> - (Required) Name of the Ingress resource.</li>
<li><code>namespace_a</code> - (Required) First Namespace for deployment.</li>
<li><code>namespace_b</code> - (Required) Second Namespace for deployment.</li>
<li><code>strategy_type</code> - (Required) Blue Green strategy type</li>
</ul></li>
<li><code>canary_strategy</code> - (Required when deploy_stage_type=OKE_CANARY_DEPLOYMENT) Specifies the required canary release strategy for OKE deployment.
<ul>
<li><code>ingress_name</code> - (Required) Name of the Ingress resource.</li>
<li><code>namespace</code> - (Required) Canary namespace to be used for Kubernetes canary deployment.</li>
<li><code>strategy_type</code> - (Required) Canary strategy type.</li>
</ul></li>
<li><code>command_spec_deploy_artifact_id</code> - (Required when deploy_stage_type=SHELL) (Updatable) The OCID of the artifact that contains the command specification.</li>
<li><code>compute_instance_group_blue_green_deployment_deploy_stage_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_TRAFFIC_SHIFT) The OCID of the upstream compute instance group blue-green deployment stage in this pipeline.</li>
<li><code>compute_instance_group_canary_deploy_stage_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_TRAFFIC_SHIFT) A compute instance group canary stage OCID for load balancer.</li>
<li><code>compute_instance_group_canary_traffic_shift_deploy_stage_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_APPROVAL) (Updatable) A compute instance group canary traffic shift stage OCID for load balancer.</li>
<li><code>compute_instance_group_deploy_environment_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT) (Updatable) A compute instance group environment OCID for rolling deployment.</li>
<li><code>config</code> - (Applicable when deploy_stage_type=DEPLOY_FUNCTION) (Updatable) User provided key and value pair configuration, which is assigned through constants or parameter.</li>
<li><code>container_config</code> - (Required when deploy_stage_type=SHELL) (Updatable) Specifies the container configuration.
<ul>
<li><code>availability_domain</code> - (Optional) (Updatable) Availability domain where the ContainerInstance will be created.</li>
<li><code>compartment_id</code> - (Optional) (Updatable) The OCID of the compartment where the ContainerInstance will be created.</li>
<li><code>container_config_type</code> - (Required) (Updatable) Container configuration type.</li>
<li><code>network_channel</code> - (Required) (Updatable) Specifies the configuration needed when the target Oracle Cloud Infrastructure resource, i.e., OKE cluster, resides in customer's private network. 
<ul>
<li><code>network_channel_type</code> - (Required) (Updatable) Network channel type.</li>
<li><code>nsg_ids</code> - (Optional) (Updatable) An array of network security group OCIDs.</li>
<li><code>subnet_id</code> - (Required) (Updatable) The OCID of the subnet where VNIC resources will be created for private endpoint.</li>
</ul></li>
<li><code>shape_config</code> - (Required) (Updatable) Determines the size and amount of resources available to the instance.
<ul>
<li><code>memory_in_gbs</code> - (Optional) (Updatable) The total amount of memory available to the instance, in gigabytes.</li>
<li><code>ocpus</code> - (Required) (Updatable) The total number of OCPUs available to the instance.</li>
</ul></li>
<li><code>shape_name</code> - (Required) (Updatable) The shape of the ContainerInstance. The shape determines the resources available to the ContainerInstance.</li>
</ul></li>
<li><code>defined_tags</code> - (Optional) (Updatable) Defined tags for this resource. Each key is predefined and scoped to a namespace. See <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{"foo-namespace.bar-key": "value"}</code></li>
<li><code>deploy_artifact_id</code> - (Applicable when deploy_stage_type=INVOKE_FUNCTION) (Updatable) Optional artifact OCID. The artifact will be included in the body for the function invocation during the stage's execution. If the DeployArtifact.argumentSubstituitionMode is set to SUBSTITUTE_PLACEHOLDERS, then the pipeline parameter values will be used to replace the placeholders in the artifact content. </li>
<li><code>deploy_artifact_ids</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT) (Updatable) The list of file artifact OCIDs to deploy.</li>
<li><code>deploy_environment_id_a</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT) First compute instance group environment OCID for deployment.</li>
<li><code>deploy_environment_id_b</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT) Second compute instance group environment OCID for deployment.</li>
<li><code>deploy_pipeline_id</code> - (Required) The OCID of a pipeline.</li>
<li><code>deploy_stage_predecessor_collection</code> - (Required) (Updatable) Collection containing the predecessors of a stage.
<ul>
<li><code>items</code> - (Required) (Updatable) A list of stage predecessors for a stage.
<ul>
<li><code>id</code> - (Required) (Updatable) The OCID of the predecessor stage. If a stage is the first stage in the pipeline, then the ID is the pipeline's OCID.</li>
</ul></li>
</ul></li>
<li><code>deploy_stage_type</code> - (Required) (Updatable) Deployment stage type.</li>
<li><code>deployment_spec_deploy_artifact_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT) (Updatable) The OCID of the artifact that contains the deployment specification.</li>
<li><code>description</code> - (Optional) (Updatable) Optional description about the deployment stage.</li>
<li><code>display_name</code> - (Optional) (Updatable) Deployment stage display name, which can be renamed and is not necessarily unique. Avoid entering confidential information.</li>
<li><code>docker_image_deploy_artifact_id</code> - (Required when deploy_stage_type=DEPLOY_FUNCTION) (Updatable) A Docker image artifact OCID.</li>
<li><code>failure_policy</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT) (Updatable) Specifies a failure policy for a compute instance group rolling deployment stage.
<ul>
<li><code>failure_count</code> - (Required when policy_type=COMPUTE_INSTANCE_GROUP_FAILURE_POLICY_BY_COUNT) (Updatable) The threshold count of failed instances in the group, which when reached or exceeded sets the stage as FAILED.</li>
<li><code>failure_percentage</code> - (Required when policy_type=COMPUTE_INSTANCE_GROUP_FAILURE_POLICY_BY_PERCENTAGE) (Updatable) The failure percentage threshold, which when reached or exceeded sets the stage as FAILED. Percentage is computed as the ceiling value of the number of failed instances over the total count of the instances in the group.</li>
<li><code>policy_type</code> - (Required) (Updatable) Specifies if the failure instance size is given by absolute number or by percentage.</li>
</ul></li>
<li><code>freeform_tags</code> - (Optional) (Updatable) Simple key-value pair that is applied without any predefined name, type or scope. Exists for cross-compatibility only.  See <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{"bar-key": "value"}</code></li>
<li><code>function_deploy_environment_id</code> - (Required when deploy_stage_type=DEPLOY_FUNCTION | INVOKE_FUNCTION) (Updatable) Function environment OCID.</li>
<li><code>function_timeout_in_seconds</code> - (Applicable when deploy_stage_type=DEPLOY_FUNCTION) (Updatable) Timeout for execution of the Function. Value in seconds.</li>
<li><code>green_backend_ips</code> - (Required when deploy_stage_type=LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Collection of backend environment IP addresses.
<ul>
<li><code>items</code> - (Applicable when deploy_stage_type=LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) The IP address of the backend server. A server could be a compute instance or a load balancer.</li>
</ul></li>
<li><code>helm_chart_deploy_artifact_id</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Helm chart artifact OCID.</li>
<li><code>helm_command_artifact_ids</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) List of Helm command artifact OCIDs.</li>
<li><code>is_async</code> - (Required when deploy_stage_type=INVOKE_FUNCTION) (Updatable) A boolean flag specifies whether this stage executes asynchronously.</li>
<li><code>is_debug_enabled</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Enables helm --debug option to stream output to tf stdout. Set to false by default.</li>
<li><code>is_force_enabled</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Force resource update through delete; or if required, recreate. Set to false by default.</li>
<li><code>is_uninstall_on_stage_delete</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Uninstall the Helm chart release on deleting the stage.</li>
<li><code>is_validation_enabled</code> - (Required when deploy_stage_type=INVOKE_FUNCTION) (Updatable) A boolean flag specifies whether the invoked function should be validated.</li>
<li><code>kubernetes_manifest_deploy_artifact_ids</code> - (Required when deploy_stage_type=OKE_BLUE_GREEN_DEPLOYMENT | OKE_CANARY_DEPLOYMENT | OKE_DEPLOYMENT) (Updatable) List of Kubernetes manifest artifact OCIDs.</li>
<li><code>load_balancer_config</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Specifies config for load balancer traffic shift stages. The Load Balancer specified here should be an Application Load Balancer type. Network Load Balancers are not supported. 
<ul>
<li><code>backend_port</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Listen port for the backend server.</li>
<li><code>listener_name</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) The OCID of the load balancer.</li>
</ul></li>
<li><code>max_history</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Limit the maximum number of revisions saved per release. Use 0 for no limit. Set to 10 by default</li>
<li><code>max_memory_in_mbs</code> - (Applicable when deploy_stage_type=DEPLOY_FUNCTION) (Updatable) Maximum usable memory for the Function (in MB).</li>
<li><code>namespace</code> - (Applicable when deploy_stage_type=OKE_DEPLOYMENT | OKE_HELM_CHART_DEPLOYMENT) (Updatable) Default namespace to be used for Kubernetes deployment when not specified in the manifest.</li>
<li><code>oke_blue_green_deploy_stage_id</code> - (Required when deploy_stage_type=OKE_BLUE_GREEN_TRAFFIC_SHIFT) The OCID of the upstream OKE blue-green deployment stage in this pipeline.</li>
<li><code>oke_canary_deploy_stage_id</code> - (Required when deploy_stage_type=OKE_CANARY_TRAFFIC_SHIFT) The OCID of an upstream OKE canary deployment stage in this pipeline.</li>
<li><code>oke_canary_traffic_shift_deploy_stage_id</code> - (Required when deploy_stage_type=OKE_CANARY_APPROVAL) The OCID of an upstream OKE canary deployment traffic shift stage in this pipeline.</li>
<li><code>oke_cluster_deploy_environment_id</code> - (Required when deploy_stage_type=OKE_BLUE_GREEN_DEPLOYMENT | OKE_CANARY_DEPLOYMENT | OKE_DEPLOYMENT | OKE_HELM_CHART_DEPLOYMENT) (Updatable) Kubernetes cluster environment OCID for deployment.</li>
<li><code>production_load_balancer_config</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) Specifies configuration for load balancer traffic shift stages. The load balancer specified here should be an Application load balancer type. Network load balancers are not supported.
<ul>
<li><code>backend_port</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) Listen port for the backend server.</li>
<li><code>listener_name</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) The OCID of the load balancer.</li>
</ul></li>
<li><code>purpose</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) The purpose of running this Helm stage</li>
<li><code>release_name</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Default name of the chart instance. Must be unique within a Kubernetes namespace.</li>
<li><code>rollback_policy</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_DEPLOYMENT | OKE_HELM_CHART_DEPLOYMENT) (Updatable) Specifies the rollback policy. This is initiated on the failure of certain stage types.
<ul>
<li><code>policy_type</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_DEPLOYMENT | OKE_HELM_CHART_DEPLOYMENT) (Updatable) Specifies type of the deployment stage rollback policy.</li>
</ul></li>
<li><code>rollout_policy</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_TRAFFIC_SHIFT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_CANARY_TRAFFIC_SHIFT) (Updatable) Description of rollout policy for load balancer traffic shift stage.
<ul>
<li><code>batch_count</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_TRAFFIC_SHIFT | COMPUTE_INSTANCE_GROUP_LINEAR_ROLLOUT_POLICY_BY_COUNT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_CANARY_TRAFFIC_SHIFT) (Updatable) The number that will be used to determine how many instances will be deployed concurrently.</li>
<li><code>batch_delay_in_seconds</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_TRAFFIC_SHIFT | COMPUTE_INSTANCE_GROUP_ROLLING_DEPLOYMENT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_CANARY_TRAFFIC_SHIFT) (Updatable) The duration of delay between batch rollout. The default delay is 1 minute.</li>
<li><code>batch_percentage</code> - (Required when policy_type=COMPUTE_INSTANCE_GROUP_LINEAR_ROLLOUT_POLICY_BY_PERCENTAGE) (Updatable) The percentage that will be used to determine how many instances will be deployed concurrently.</li>
<li><code>policy_type</code> - (Required) (Updatable) The type of policy used for rolling out a deployment stage.</li>
<li><code>ramp_limit_percent</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_CANARY_TRAFFIC_SHIFT | LOAD_BALANCER_TRAFFIC_SHIFT | OKE_CANARY_TRAFFIC_SHIFT) (Updatable) Indicates the criteria to stop.</li>
</ul></li>
<li><code>set_string</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Specifies the name and value pairs to set helm values.
<ul>
<li><code>items</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) List of parameters defined to set helm value.
<ul>
<li><code>name</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Name of the parameter (case-sensitive).</li>
<li><code>value</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Value of the parameter.</li>
</ul></li>
</ul></li>
<li><code>set_values</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Specifies the name and value pairs to set helm values.
<ul>
<li><code>items</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) List of parameters defined to set helm value.
<ul>
<li><code>name</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Name of the parameter (case-sensitive).</li>
<li><code>value</code> - (Required when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Value of the parameter.</li>
</ul></li>
</ul></li>
<li><code>should_cleanup_on_fail</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Allow deletion of new resources created during when an upgrade fails. Set to false by default.</li>
<li><code>should_not_wait</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) Does not wait until all the resources are in a ready state to mark the release as successful if set to true. Set to false by default.</li>
<li><code>should_reset_values</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) During upgrade, reset the values to the ones built into the chart. It overrides shouldReuseValues. Set to false by default.</li>
<li><code>should_reuse_values</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) During upgrade, reuse the values of the last release and merge overrides from the command line. Set to false by default.</li>
<li><code>should_skip_crds</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) If set, no CRDs are installed. By default, CRDs are installed only if they are not present already. Set to false by default.</li>
<li><code>should_skip_render_subchart_notes</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) If set, renders subchart notes along with the parent. Set to false by default.</li>
<li><code>test_load_balancer_config</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) (Updatable) Specifies configuration for load balancer traffic shift stages. The load balancer specified here should be an Application load balancer type. Network load balancers are not supported. 
<ul>
<li><code>backend_port</code> - (Applicable when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) (Updatable) Listen port for the backend server.</li>
<li><code>listener_name</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) (Updatable) Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - (Required when deploy_stage_type=COMPUTE_INSTANCE_GROUP_BLUE_GREEN_DEPLOYMENT | COMPUTE_INSTANCE_GROUP_CANARY_DEPLOYMENT) (Updatable) The OCID of the load balancer.</li>
</ul></li>
<li><code>timeout_in_seconds</code> - (Applicable when deploy_stage_type=SHELL | OKE_HELM_CHART_DEPLOYMENT) (Updatable) Time to wait for execution of a Shell/Helm stage. Defaults to 36000 seconds for Shell and 300 seconds for Helm Stage</li>
<li><code>traffic_shift_target</code> - (Required when deploy_stage_type=LOAD_BALANCER_TRAFFIC_SHIFT) (Updatable) Specifies the target or destination backend set.</li>
<li><code>values_artifact_ids</code> - (Applicable when deploy_stage_type=OKE_HELM_CHART_DEPLOYMENT) (Updatable) List of values.yaml file artifact OCIDs.</li>
<li><code>wait_criteria</code> - (Required when deploy_stage_type=WAIT) (Updatable) Specifies wait criteria for the Wait stage.
<ul>
<li><code>wait_duration</code> - (Required) (Updatable) The absolute wait duration. An ISO 8601 formatted duration string. Minimum waitDuration should be 5 seconds. Maximum waitDuration can be up to 2 days.</li>
<li><code>wait_type</code> - (Required) (Updatable) Wait criteria type.</li>
</ul></li>
</ul>

<p><em>* IMPORTANT *</em>
Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>approval_policy</code> - Specifies the approval policy.
<ul>
<li><code>approval_policy_type</code> - Approval policy type.</li>
<li><code>number_of_approvals_required</code> - A minimum number of approvals required for stage to proceed.</li>
</ul></li>
<li><code>are_hooks_enabled</code> - Disable pre/post upgrade hooks. Set to false by default.</li>
<li><code>blue_backend_ips</code> - Collection of backend environment IP addresses.
<ul>
<li><code>items</code> - The IP address of the backend server. A server could be a compute instance or a load balancer.</li>
</ul></li>
<li><code>blue_green_strategy</code> - Specifies the required blue green release strategy for OKE deployment.
<ul>
<li><code>ingress_name</code> - Name of the Ingress resource.</li>
<li><code>namespace_a</code> - First Namespace for deployment.</li>
<li><code>namespace_b</code> - Second Namespace for deployment.</li>
<li><code>strategy_type</code> - Blue Green strategy type</li>
</ul></li>
<li><code>canary_strategy</code> - Specifies the required canary release strategy for OKE deployment.
<ul>
<li><code>ingress_name</code> - Name of the Ingress resource.</li>
<li><code>namespace</code> - Canary namespace to be used for Kubernetes canary deployment.</li>
<li><code>strategy_type</code> - Canary strategy type.</li>
</ul></li>
<li><code>command_spec_deploy_artifact_id</code> - The OCID of the artifact that contains the command specification.</li>
<li><code>compartment_id</code> - The OCID of a compartment.</li>
<li><code>compute_instance_group_blue_green_deployment_deploy_stage_id</code> - The OCID of the upstream compute instance group blue-green deployment stage in this pipeline.</li>
<li><code>compute_instance_group_canary_deploy_stage_id</code> - The OCID of an upstream compute instance group canary deployment stage ID in this pipeline.</li>
<li><code>compute_instance_group_canary_traffic_shift_deploy_stage_id</code> - A compute instance group canary traffic shift stage OCID for load balancer.</li>
<li><code>compute_instance_group_deploy_environment_id</code> - A compute instance group environment OCID for rolling deployment.</li>
<li><code>config</code> - User provided key and value pair configuration, which is assigned through constants or parameter.</li>
<li><code>container_config</code> - Specifies the container configuration.
<ul>
<li><code>availability_domain</code> - Availability domain where the ContainerInstance will be created.</li>
<li><code>compartment_id</code> - The OCID of the compartment where the ContainerInstance will be created.</li>
<li><code>container_config_type</code> - Container configuration type.</li>
<li><code>network_channel</code> - Specifies the configuration needed when the target Oracle Cloud Infrastructure resource, i.e., OKE cluster, resides in customer's private network. 
<ul>
<li><code>network_channel_type</code> - Network channel type.</li>
<li><code>nsg_ids</code> - An array of network security group OCIDs.</li>
<li><code>subnet_id</code> - The OCID of the subnet where VNIC resources will be created for private endpoint.</li>
</ul></li>
<li><code>shape_config</code> - Determines the size and amount of resources available to the instance.
<ul>
<li><code>memory_in_gbs</code> - The total amount of memory available to the instance, in gigabytes.</li>
<li><code>ocpus</code> - The total number of OCPUs available to the instance.</li>
</ul></li>
<li><code>shape_name</code> - The shape of the ContainerInstance. The shape determines the resources available to the ContainerInstance.</li>
</ul></li>
<li><code>defined_tags</code> - Defined tags for this resource. Each key is predefined and scoped to a namespace. See <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{"foo-namespace.bar-key": "value"}</code></li>
<li><code>deploy_artifact_id</code> - Optional artifact OCID. The artifact will be included in the body for the function invocation during the stage's execution. If the DeployArtifact.argumentSubstituitionMode is set to SUBSTITUTE_PLACEHOLDERS, then the pipeline parameter values will be used to replace the placeholders in the artifact content. </li>
<li><code>deploy_artifact_ids</code> - The list of file artifact OCIDs to deploy.</li>
<li><code>deploy_environment_id_a</code> - First compute instance group environment OCID for deployment.</li>
<li><code>deploy_environment_id_b</code> - Second compute instance group environment OCID for deployment.</li>
<li><code>deploy_pipeline_id</code> - The OCID of a pipeline.</li>
<li><code>deploy_stage_predecessor_collection</code> - Collection containing the predecessors of a stage.
<ul>
<li><code>items</code> - A list of stage predecessors for a stage.
<ul>
<li><code>id</code> - The OCID of the predecessor stage. If a stage is the first stage in the pipeline, then the ID is the pipeline's OCID.</li>
</ul></li>
</ul></li>
<li><code>deploy_stage_type</code> - Deployment stage type.</li>
<li><code>deployment_spec_deploy_artifact_id</code> - The OCID of the artifact that contains the deployment specification.</li>
<li><code>description</code> - Optional description about the deployment stage.</li>
<li><code>display_name</code> - Deployment stage display name, which can be renamed and is not necessarily unique. Avoid entering confidential information.</li>
<li><code>docker_image_deploy_artifact_id</code> - A Docker image artifact OCID.</li>
<li><code>failure_policy</code> - Specifies a failure policy for a compute instance group rolling deployment stage.
<ul>
<li><code>failure_count</code> - The threshold count of failed instances in the group, which when reached or exceeded sets the stage as FAILED.</li>
<li><code>failure_percentage</code> - The failure percentage threshold, which when reached or exceeded sets the stage as FAILED. Percentage is computed as the ceiling value of the number of failed instances over the total count of the instances in the group.</li>
<li><code>policy_type</code> - Specifies if the failure instance size is given by absolute number or by percentage.</li>
</ul></li>
<li><code>freeform_tags</code> - Simple key-value pair that is applied without any predefined name, type or scope. Exists for cross-compatibility only.  See <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{"bar-key": "value"}</code></li>
<li><code>function_deploy_environment_id</code> - Function environment OCID.</li>
<li><code>function_timeout_in_seconds</code> - Timeout for execution of the Function. Value in seconds.</li>
<li><code>green_backend_ips</code> - Collection of backend environment IP addresses.
<ul>
<li><code>items</code> - The IP address of the backend server. A server could be a compute instance or a load balancer.</li>
</ul></li>
<li><code>helm_chart_deploy_artifact_id</code> - Helm chart artifact OCID.</li>
<li><code>helm_command_artifact_ids</code> - List of Helm command artifact OCIDs.</li>
<li><code>id</code> - Unique identifier that is immutable on creation.</li>
<li><code>is_async</code> - A boolean flag specifies whether this stage executes asynchronously.</li>
<li><code>is_debug_enabled</code> - Enables helm --debug option to stream output to tf stdout. Set to false by default.</li>
<li><code>is_force_enabled</code> - Force resource update through delete; or if required, recreate. Set to false by default.</li>
<li><code>is_uninstall_on_stage_delete</code> - Uninstall the Helm chart release on deleting the stage.</li>
<li><code>is_validation_enabled</code> - A boolean flag specifies whether the invoked function must be validated.</li>
<li><code>kubernetes_manifest_deploy_artifact_ids</code> - List of Kubernetes manifest artifact OCIDs.</li>
<li><code>lifecycle_details</code> - A message describing the current state in more detail. For example, can be used to provide actionable information for a resource in Failed state.</li>
<li><code>load_balancer_config</code> - Specifies config for load balancer traffic shift stages. The Load Balancer specified here should be an Application Load Balancer type. Network Load Balancers are not supported. 
<ul>
<li><code>backend_port</code> - Listen port for the backend server.</li>
<li><code>listener_name</code> - Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - The OCID of the load balancer.</li>
</ul></li>
<li><code>max_history</code> - Limit the maximum number of revisions saved per release. Use 0 for no limit. Set to 10 by default</li>
<li><code>max_memory_in_mbs</code> - Maximum usable memory for the Function (in MB).</li>
<li><code>namespace</code> - Default Namespace to be used for Kubernetes deployment when not specified in the manifest.</li>
<li><code>oke_blue_green_deploy_stage_id</code> - The OCID of the upstream OKE blue-green deployment stage in this pipeline.</li>
<li><code>oke_canary_deploy_stage_id</code> - The OCID of an upstream OKE canary deployment stage in this pipeline.</li>
<li><code>oke_canary_traffic_shift_deploy_stage_id</code> - The OCID of an upstream OKE canary deployment traffic shift stage in this pipeline.</li>
<li><code>oke_cluster_deploy_environment_id</code> - Kubernetes cluster environment OCID for deployment.</li>
<li><code>production_load_balancer_config</code> - Specifies config for load balancer traffic shift stages. The Load Balancer specified here should be an Application Load Balancer type. Network Load Balancers are not supported. 
<ul>
<li><code>backend_port</code> - Listen port for the backend server.</li>
<li><code>listener_name</code> - Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - The OCID of the load balancer.</li>
</ul></li>
<li><code>project_id</code> - The OCID of a project.</li>
<li><code>purpose</code> - The purpose of running this Helm stage</li>
<li><code>release_name</code> - Release name of the Helm chart.</li>
<li><code>rollback_policy</code> - Specifies the rollback policy. This is initiated on the failure of certain stage types.
<ul>
<li><code>policy_type</code> - Specifies type of the deployment stage rollback policy.</li>
</ul></li>
<li><code>rollout_policy</code> - Description of rollout policy for load balancer traffic shift stage.
<ul>
<li><code>batch_count</code> - The number that will be used to determine how many instances will be deployed concurrently.</li>
<li><code>batch_delay_in_seconds</code> - The duration of delay between batch rollout. The default delay is 1 minute.</li>
<li><code>batch_percentage</code> - The percentage that will be used to determine how many instances will be deployed concurrently.</li>
<li><code>policy_type</code> - The type of policy used for rolling out a deployment stage.</li>
<li><code>ramp_limit_percent</code> - Indicates the criteria to stop.</li>
</ul></li>
<li><code>set_string</code> - Specifies the name and value pairs to set helm values.
<ul>
<li><code>items</code> - List of parameters defined to set helm value.
<ul>
<li><code>name</code> - Name of the parameter (case-sensitive).</li>
<li><code>value</code> - Value of the parameter.</li>
</ul></li>
</ul></li>
<li><code>set_values</code> - Specifies the name and value pairs to set helm values.
<ul>
<li><code>items</code> - List of parameters defined to set helm value.
<ul>
<li><code>name</code> - Name of the parameter (case-sensitive).</li>
<li><code>value</code> - Value of the parameter.</li>
</ul></li>
</ul></li>
<li><code>should_cleanup_on_fail</code> - Allow deletion of new resources created during when an upgrade fails. Set to false by default.</li>
<li><code>should_not_wait</code> - Waits until all the resources are in a ready state to mark the release as successful. Set to false by default.</li>
<li><code>should_reset_values</code> - During upgrade, reset the values to the ones built into the chart. It overrides shouldReuseValues. Set to false by default.</li>
<li><code>should_reuse_values</code> - During upgrade, reuse the values of the last release and merge overrides from the command line. Set to false by default.</li>
<li><code>should_skip_crds</code> - If set, no CRDs are installed. By default, CRDs are installed only if they are not present already. Set to false by default.</li>
<li><code>should_skip_render_subchart_notes</code> - If set, renders subchart notes along with the parent. Set to false by default.</li>
<li><code>state</code> - The current state of the deployment stage.</li>
<li><code>system_tags</code> - Usage of system tag keys. These predefined keys are scoped to namespaces. See <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{"orcl-cloud.free-tier-retained": "true"}</code></li>
<li><code>test_load_balancer_config</code> - Specifies config for load balancer traffic shift stages. The Load Balancer specified here should be an Application Load Balancer type. Network Load Balancers are not supported. 
<ul>
<li><code>backend_port</code> - Listen port for the backend server.</li>
<li><code>listener_name</code> - Name of the load balancer listener.</li>
<li><code>load_balancer_id</code> - The OCID of the load balancer.</li>
</ul></li>
<li><code>time_created</code> - Time the deployment stage was created. Format defined by <a href="https://datatracker.ietf.org/doc/html/rfc3339">RFC3339</a>.</li>
<li><code>time_updated</code> - Time the deployment stage was updated. Format defined by <a href="https://datatracker.ietf.org/doc/html/rfc3339">RFC3339</a>.</li>
<li><code>timeout_in_seconds</code> - Time to wait for execution of a Shell/Helm stage. Defaults to 36000 seconds for Shell and 300 seconds for Helm Stage.</li>
<li><code>traffic_shift_target</code> - Specifies the target or destination backend set.</li>
<li><code>values_artifact_ids</code> - List of values.yaml file artifact OCIDs.</li>
<li><code>wait_criteria</code> - Specifies wait criteria for the Wait stage.
<ul>
<li><code>wait_duration</code> - The absolute wait duration. An ISO 8601 formatted duration string. Minimum waitDuration should be 5 seconds. Maximum waitDuration can be up to 2 days.</li>
<li><code>wait_type</code> - Wait criteria type.</li>
</ul></li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://registry.terraform.io/providers/oracle/oci/latest/docs/guides/changing_timeouts">timeouts</a> for certain operations:
    * <code>create</code> - (Defaults to 20 minutes), when creating the Deploy Stage
    * <code>update</code> - (Defaults to 20 minutes), when updating the Deploy Stage
    * <code>delete</code> - (Defaults to 20 minutes), when destroying the Deploy Stage</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>DeployStages can be imported using the <code>id</code>, e.g.</p>

<pre><code>$ terraform import oci_devops_deploy_stage.test_deploy_stage "id"
</code></pre>

            
        
    </body></html>
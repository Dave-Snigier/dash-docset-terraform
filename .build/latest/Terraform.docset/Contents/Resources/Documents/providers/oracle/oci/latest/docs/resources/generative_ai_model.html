<html><!-- Online page at https://registry.terraform.io/providers/oracle/oci/latest/docs/resources/generative_ai_model --><head>
                <title>oci_generative_ai_model</title>
                <meta charset="utf-8"/>
                <link href="../../../../../../style.css" rel="stylesheet"/>
            </head>
            <body>
                <h1 id="oci_generative_ai_model">oci_generative_ai_model</h1>

<p>This resource provides the Model resource in Oracle Cloud Infrastructure Generative AI service.</p>

<p>Creates a custom model by fine-tuning a base model with your own dataset. You can create a new custom models or create a new version of existing custom model..</p>

<p>The header contains an opc-work-request-id, which is the id for the WorkRequest that tracks the model creation progress.</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Example%20Usage"></a><h2 id="example-usage">Example Usage</h2>

<div class="codehilite"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">"oci_generative_ai_model"</span><span class="w"> </span><span class="nv">"test_model"</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">    #Required</span>
<span class="w">    </span><span class="na">base_model_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_generative_ai_model.test_model.id</span><span class="w"></span>
<span class="w">    </span><span class="na">compartment_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.compartment_id</span><span class="w"></span>
<span class="w">    </span><span class="nb">fine_tune_details</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">        #Required</span>
<span class="w">        </span><span class="na">dedicated_ai_cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">oci_generative_ai_dedicated_ai_cluster.test_dedicated_ai_cluster.id</span><span class="w"></span>
<span class="w">        </span><span class="nb">training_dataset</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">            #Required</span>
<span class="w">            </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_dataset_bucket</span><span class="w"></span>
<span class="w">            </span><span class="na">dataset_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_dataset_dataset_type</span><span class="w"></span>
<span class="w">            </span><span class="na">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_dataset_namespace</span><span class="w"></span>
<span class="w">            </span><span class="na">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_dataset_object</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="c1"></span>

<span class="c1">        #Optional</span>
<span class="w">        </span><span class="nb">training_config</span><span class="w"> </span><span class="p">{</span><span class="c1"></span>
<span class="c1">            #Required</span>
<span class="w">            </span><span class="na">training_config_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_training_config_type</span><span class="c1"></span>

<span class="c1">            #Optional</span>
<span class="w">            </span><span class="na">early_stopping_patience</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_early_stopping_patience</span><span class="w"></span>
<span class="w">            </span><span class="na">early_stopping_threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_early_stopping_threshold</span><span class="w"></span>
<span class="w">            </span><span class="na">learning_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_learning_rate</span><span class="w"></span>
<span class="w">            </span><span class="na">log_model_metrics_interval_in_steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_log_model_metrics_interval_in_steps</span><span class="w"></span>
<span class="w">            </span><span class="na">lora_alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_lora_alpha</span><span class="w"></span>
<span class="w">            </span><span class="na">lora_dropout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_lora_dropout</span><span class="w"></span>
<span class="w">            </span><span class="na">lora_r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_lora_r</span><span class="w"></span>
<span class="w">            </span><span class="na">num_of_last_layers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_num_of_last_layers</span><span class="w"></span>
<span class="w">            </span><span class="na">total_training_epochs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_total_training_epochs</span><span class="w"></span>
<span class="w">            </span><span class="na">training_batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_fine_tune_details_training_config_training_batch_size</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="c1"></span>

<span class="c1">    #Optional</span>
<span class="w">    </span><span class="nb">defined_tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"Operations.CostCenter"</span><span class="o">=</span><span class="w"> </span><span class="s2">"42"</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_description</span><span class="w"></span>
<span class="w">    </span><span class="na">display_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_display_name</span><span class="w"></span>
<span class="w">    </span><span class="nb">freeform_tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"Department"</span><span class="o">=</span><span class="w"> </span><span class="s2">"Finance"</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="na">vendor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_vendor</span><span class="w"></span>
<span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.model_version</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Argument%20Reference"></a><h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>base_model_id</code> - (Required) The OCID of the base model that's used for fine-tuning.</li>
<li><code>compartment_id</code> - (Required) (Updatable) The compartment OCID for fine-tuned models. For pretrained models, this value is null.</li>
<li><code>defined_tags</code> - (Optional) (Updatable) Defined tags for this resource. Each key is predefined and scoped to a namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>.  Example: <code>{"Operations.CostCenter": "42"}</code> </li>
<li><code>description</code> - (Optional) (Updatable) An optional description of the model.</li>
<li><code>display_name</code> - (Optional) (Updatable) A user-friendly name.</li>
<li><p><code>fine_tune_details</code> - (Required) Details about fine-tuning a custom model. </p>

<ul>
<li><code>dedicated_ai_cluster_id</code> - (Required) The OCID of the dedicated AI cluster this fine-tuning runs on.</li>
<li><p><code>training_config</code> - (Optional) The fine-tuning method and hyperparameters used for fine-tuning a custom model.</p>

<ul>
<li><code>early_stopping_patience</code> - (Optional) Stop training if the loss metric does not improve beyond 'early_stopping_threshold' for this many times of evaluation. </li>
<li><code>early_stopping_threshold</code> - (Optional) How much the loss must improve to prevent early stopping.</li>
<li><code>learning_rate</code> - (Optional) The initial learning rate to be used during training</li>
<li><p><code>log_model_metrics_interval_in_steps</code> - (Optional) Determines how frequently to log model metrics. </p>

<p>Every step is logged for the first 20 steps and then follows this parameter for log frequency. Set to 0 to disable logging the model metrics. </p></li>
<li><code>lora_alpha</code> - (Applicable when training_config_type=LORA_TRAINING_CONFIG) This parameter represents the scaling factor for the weight matrices in LoRA.</li>
<li><code>lora_dropout</code> - (Applicable when training_config_type=LORA_TRAINING_CONFIG) This parameter indicates the dropout probability for LoRA layers.</li>
<li><code>lora_r</code> - (Applicable when training_config_type=LORA_TRAINING_CONFIG) This parameter represents the LoRA rank of the update matrices.</li>
<li><code>num_of_last_layers</code> - (Applicable when training_config_type=VANILLA_TRAINING_CONFIG) The number of last layers to be fine-tuned.</li>
<li><code>total_training_epochs</code> - (Optional) The maximum number of training epochs to run for.</li>
<li><code>training_batch_size</code> - (Optional) The batch size used during training.</li>
<li><code>training_config_type</code> - (Required) The fine-tuning method for training a custom model.</li>
</ul></li>
<li><p><code>training_dataset</code> - (Required) The dataset used to fine-tune the model. </p>

<p>Only one dataset is allowed per custom model, which is split 80-20 for training and validating. You must provide the dataset in a JSON Lines (JSONL) file. Each line in the JSONL file must have the format: <code>{"prompt": "&lt;first prompt&gt;", "completion": "&lt;expected completion given first prompt&gt;"}</code> </p>

<ul>
<li><code>bucket</code> - (Required) The Object Storage bucket name.</li>
<li><code>dataset_type</code> - (Required) The type of the data asset.</li>
<li><code>namespace</code> - (Required) The Object Storage namespace.</li>
<li><code>object</code> - (Required) The Object Storage object name.</li>
</ul></li>
</ul></li>
<li><code>freeform_tags</code> - (Optional) (Updatable) Free-form tags for this resource. Each tag is a simple key-value pair with no predefined name, type, or namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>.  Example: <code>{"Department": "Finance"}</code> </li>
<li><code>vendor</code> - (Optional) (Updatable) The provider of the model.</li>
<li><code>version</code> - (Optional) (Updatable) The version of the model.</li>
</ul>

<p><em>* IMPORTANT *</em>
Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Attributes%20Reference"></a><h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>base_model_id</code> - The OCID of the base model that's used for fine-tuning. For pretrained models, the value is null.</li>
<li><code>capabilities</code> - Describes what this model can be used for.</li>
<li><code>compartment_id</code> - The compartment OCID for fine-tuned models. For pretrained models, this value is null.</li>
<li><code>defined_tags</code> - Defined tags for this resource. Each key is predefined and scoped to a namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>.  Example: <code>{"Operations.CostCenter": "42"}</code> </li>
<li><code>description</code> - An optional description of the model.</li>
<li><code>display_name</code> - A user-friendly name.</li>
<li><p><code>fine_tune_details</code> - Details about fine-tuning a custom model. </p>

<ul>
<li><code>dedicated_ai_cluster_id</code> - The OCID of the dedicated AI cluster this fine-tuning runs on.</li>
<li><p><code>training_config</code> - The fine-tuning method and hyperparameters used for fine-tuning a custom model.</p>

<ul>
<li><code>early_stopping_patience</code> - Stop training if the loss metric does not improve beyond 'early_stopping_threshold' for this many times of evaluation. </li>
<li><code>early_stopping_threshold</code> - How much the loss must improve to prevent early stopping.</li>
<li><code>learning_rate</code> - The initial learning rate to be used during training</li>
<li><p><code>log_model_metrics_interval_in_steps</code> - Determines how frequently to log model metrics. </p>

<p>Every step is logged for the first 20 steps and then follows this parameter for log frequency. Set to 0 to disable logging the model metrics. </p></li>
<li><code>lora_alpha</code> - This parameter represents the scaling factor for the weight matrices in LoRA.</li>
<li><code>lora_dropout</code> - This parameter indicates the dropout probability for LoRA layers.</li>
<li><code>lora_r</code> - This parameter represents the LoRA rank of the update matrices.</li>
<li><code>num_of_last_layers</code> - The number of last layers to be fine-tuned.</li>
<li><code>total_training_epochs</code> - The maximum number of training epochs to run for.</li>
<li><code>training_batch_size</code> - The batch size used during training.</li>
<li><code>training_config_type</code> - The fine-tuning method for training a custom model.</li>
</ul></li>
<li><p><code>training_dataset</code> - The dataset used to fine-tune the model. </p>

<p>Only one dataset is allowed per custom model, which is split 80-20 for training and validating. You must provide the dataset in a JSON Lines (JSONL) file. Each line in the JSONL file must have the format: <code>{"prompt": "&lt;first prompt&gt;", "completion": "&lt;expected completion given first prompt&gt;"}</code> </p>

<ul>
<li><code>bucket</code> - The Object Storage bucket name.</li>
<li><code>dataset_type</code> - The type of the data asset.</li>
<li><code>namespace</code> - The Object Storage namespace.</li>
<li><code>object</code> - The Object Storage object name.</li>
</ul></li>
</ul></li>
<li><code>freeform_tags</code> - Free-form tags for this resource. Each tag is a simple key-value pair with no predefined name, type, or namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>.  Example: <code>{"Department": "Finance"}</code> </li>
<li><code>id</code> - An ID that uniquely identifies a pretrained or fine-tuned model.</li>
<li><code>is_long_term_supported</code> - Whether a model is supported long-term. Only applicable to base models.</li>
<li><code>lifecycle_details</code> - A message describing the current state of the model in more detail that can provide actionable information.</li>
<li><code>model_metrics</code> - Model metrics during the creation of a new model.
<ul>
<li><code>final_accuracy</code> - Fine-tuned model accuracy.</li>
<li><code>final_loss</code> - Fine-tuned model loss.</li>
<li><code>model_metrics_type</code> - The type of the model metrics. Each type of model can expect a different set of model metrics.</li>
</ul></li>
<li><p><code>previous_state</code> - You can create a custom model by using your dataset to fine-tune an out-of-the-box text generation base model. Have your dataset ready before you create a custom model. See <a href="https://docs.cloud.oracle.com/iaas/Content/generative-ai/training-data-requirements.htm">Training Data Requirements</a>.</p>

<p>To use any of the API operations, you must be authorized in an IAM policy. If you're not authorized, talk to an administrator who gives Oracle Cloud Infrastructure resource access to users. See <a href="https://docs.cloud.oracle.com/iaas/Content/Identity/policiesgs/get-started-with-policies.htm">Getting Started with Policies</a> and <a href="https://docs.cloud.oracle.com/iaas/Content/generative-ai/iam-policies.htm">Getting Access to Generative AI Resouces</a>. </p></li>
<li><code>state</code> - The lifecycle state of the model.</li>
<li><code>system_tags</code> - System tags for this resource. Each key is predefined and scoped to a namespace.  Example: <code>{"orcl-cloud.free-tier-retained": "true"}</code> </li>
<li><code>time_created</code> - The date and time that the model was created in the format of an RFC3339 datetime string.</li>
<li><code>time_deprecated</code> - Corresponds to the time when the custom model and its associated foundation model will be deprecated.</li>
<li><code>time_updated</code> - The date and time that the model was updated in the format of an RFC3339 datetime string.</li>
<li><code>type</code> - The model type indicating whether this is a pretrained/base model or a custom/fine-tuned model.</li>
<li><code>vendor</code> - The provider of the base model.</li>
<li><code>version</code> - The version of the model.</li>
</ul>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Timeouts"></a><h2 id="timeouts">Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://registry.terraform.io/providers/oracle/oci/latest/docs/guides/changing_timeouts">timeouts</a> for certain operations:
    * <code>create</code> - (Defaults to 20 minutes), when creating the Model
    * <code>update</code> - (Defaults to 20 minutes), when updating the Model
    * <code>delete</code> - (Defaults to 20 minutes), when destroying the Model</p>

<a class="dashAnchor" name="//apple_ref/cpp/Section/Import"></a><h2 id="import">Import</h2>

<p>Models can be imported using the <code>id</code>, e.g.</p>

<pre><code>$ terraform import oci_generative_ai_model.test_model "id"
</code></pre>

            
        
    </body></html>